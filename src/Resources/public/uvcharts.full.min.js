!function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function e(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function n(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function r(t){return null===t?NaN:+t}function a(t){return!isNaN(t)}function o(t){return{left:function(e,n,r,a){for(arguments.length<3&&(r=0),arguments.length<4&&(a=e.length);r<a;){var o=r+a>>>1;t(e[o],n)<0?r=o+1:a=o}return r},right:function(e,n,r,a){for(arguments.length<3&&(r=0),arguments.length<4&&(a=e.length);r<a;){var o=r+a>>>1;t(e[o],n)>0?a=o:r=o+1}return r}}}function i(t){return t.length}function l(t){for(var e=1;t*e%1;)e*=10;return e}function u(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function s(){this._=Object.create(null)}function c(t){return(t+="")===xi||t[0]===bi?bi+t:t}function f(t){return(t+="")[0]===bi?t.slice(1):t}function h(t){return c(t)in this._}function g(t){return(t=c(t))in this._&&delete this._[t]}function p(){var t=[];for(var e in this._)t.push(f(e));return t}function d(){var t=0;for(var e in this._)++t;return t}function v(){for(var t in this._)return!1;return!0}function y(){this._=Object.create(null)}function m(t){return t}function x(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function b(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=wi.length;n<r;++n){var a=wi[n]+e;if(a in t)return a}}function w(){}function M(){}function C(t){function e(){for(var e,r=n,a=-1,o=r.length;++a<o;)(e=r[a].on)&&e.apply(this,arguments);return t}var n=[],r=new s;return e.on=function(e,a){var o,i=r.get(e);return arguments.length<2?i&&i.on:(i&&(i.on=null,n=n.slice(0,o=n.indexOf(i)).concat(n.slice(o+1)),r.remove(e)),a&&n.push(r.set(e,{on:a})),t)},e}function k(){ui.event.preventDefault()}function A(){for(var t,e=ui.event;t=e.sourceEvent;)e=t;return e}function N(t){for(var e=new M,n=0,r=arguments.length;++n<r;)e[arguments[n]]=C(e);return e.of=function(n,r){return function(a){try{var o=a.sourceEvent=ui.event;a.target=t,ui.event=a,e[a.type].apply(n,r)}finally{ui.event=o}}},e}function _(t){return Ci(t,_i),t}function S(t){return"function"==typeof t?t:function(){return ki(t,this)}}function E(t){return"function"==typeof t?t:function(){return Ai(t,this)}}function z(t,e){function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function a(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function i(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function l(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=ui.ns.qualify(t),null==e?t.local?r:n:"function"==typeof e?t.local?l:i:t.local?o:a}function F(t){return t.trim().replace(/\s+/g," ")}function B(t){return new RegExp("(?:^|\\s+)"+ui.requote(t)+"(?:\\s+|$)","g")}function D(t){return(t+"").trim().split(/^|\s+/)}function T(t,e){function n(){for(var n=-1;++n<a;)t[n](this,e)}function r(){for(var n=-1,r=e.apply(this,arguments);++n<a;)t[n](this,r)}t=D(t).map(G);var a=t.length;return"function"==typeof e?r:n}function G(t){var e=B(t);return function(n,r){if(a=n.classList)return r?a.add(t):a.remove(t);var a=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(a)||n.setAttribute("class",F(a+" "+t))):n.setAttribute("class",F(a.replace(e," ")))}}function L(t,e,n){function r(){this.style.removeProperty(t)}function a(){this.style.setProperty(t,e,n)}function o(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}return null==e?r:"function"==typeof e?o:a}function P(t,e){function n(){delete this[t]}function r(){this[t]=e}function a(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?a:r}function q(t){function e(){var e=this.ownerDocument,n=this.namespaceURI;return n===Si&&e.documentElement.namespaceURI===Si?e.createElement(t):e.createElementNS(n,t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=ui.ns.qualify(t)).local?n:e}function R(){var t=this.parentNode;t&&t.removeChild(this)}function H(t){return{__data__:t}}function U(t){return function(){return Ni(this,t)}}function V(t){return arguments.length||(t=n),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function j(t,e){for(var n=0,r=t.length;n<r;n++)for(var a,o=t[n],i=0,l=o.length;i<l;i++)(a=o[i])&&e(a,i,n);return t}function O(t){return Ci(t,zi),t}function I(t){var e,n;return function(r,a,o){var i,l=t[o].update,u=l.length;for(o!=n&&(n=o,e=0),a>=e&&(e=a+1);!(i=l[e])&&++e<u;);return i}}function Y(t,e,n){function r(){var e=this[i];e&&(this.removeEventListener(t,e,e.$),delete this[i])}function a(){var a=u(e,ci(arguments));r.call(this),this.addEventListener(t,this[i]=a,a.$=n),a._=e}function o(){var e,n=new RegExp("^__on([^.]+)"+ui.requote(t)+"$");for(var r in this)if(e=r.match(n)){var a=this[r];this.removeEventListener(e[1],a,a.$),delete this[r]}}var i="__on"+t,l=t.indexOf("."),u=Z;l>0&&(t=t.slice(0,l));var s=Fi.get(t);return s&&(t=s,u=W),l?e?a:r:e?w:o}function Z(t,e){return function(n){var r=ui.event;ui.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{ui.event=r}}}function W(t,e){var n=Z(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}function X(n){var r=".dragsuppress-"+ ++Di,a="click"+r,o=ui.select(e(n)).on("touchmove"+r,k).on("dragstart"+r,k).on("selectstart"+r,k);if(null==Bi&&(Bi=!("onselectstart"in n)&&b(n.style,"userSelect")),Bi){var i=t(n).style,l=i[Bi];i[Bi]="none"}return function(t){if(o.on(r,null),Bi&&(i[Bi]=l),t){var e=function(){o.on(a,null)};o.on(a,function(){k(),e()},!0),setTimeout(e,0)}}}function $(t,n){n.changedTouches&&(n=n.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var a=r.createSVGPoint();if(Ti<0){var o=e(t);if(o.scrollX||o.scrollY){r=ui.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var i=r[0][0].getScreenCTM();Ti=!(i.f||i.e),r.remove()}}return Ti?(a.x=n.pageX,a.y=n.pageY):(a.x=n.clientX,a.y=n.clientY),a=a.matrixTransform(t.getScreenCTM().inverse()),[a.x,a.y]}var l=t.getBoundingClientRect();return[n.clientX-l.left-t.clientLeft,n.clientY-l.top-t.clientTop]}function J(){return ui.event.changedTouches[0].identifier}function K(t){return t>0?1:t<0?-1:0}function Q(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function tt(t){return t>1?0:t<-1?Pi:Math.acos(t)}function et(t){return t>1?Hi:t<-1?-Hi:Math.asin(t)}function nt(t){return((t=Math.exp(t))-1/t)/2}function rt(t){return((t=Math.exp(t))+1/t)/2}function at(t){return((t=Math.exp(2*t))-1)/(t+1)}function ot(t){return(t=Math.sin(t/2))*t}function it(){}function lt(t,e,n){return this instanceof lt?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof lt?new lt(t.h,t.s,t.l):wt(""+t,Mt,lt):new lt(t,e,n)}function ut(t,e,n){function r(t){return t>360?t-=360:t<0&&(t+=360),t<60?o+(i-o)*t/60:t<180?i:t<240?o+(i-o)*(240-t)/60:o}function a(t){return Math.round(255*r(t))}var o,i;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:e>1?1:e,n=n<0?0:n>1?1:n,i=n<=.5?n*(1+e):n+e-n*e,o=2*n-i,new yt(a(t+120),a(t),a(t-120))}function st(t,e,n){return this instanceof st?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof st?new st(t.h,t.c,t.l):t instanceof ft?gt(t.l,t.a,t.b):gt((t=Ct((t=ui.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new st(t,e,n)}function ct(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new ft(n,Math.cos(t*=Ui)*e,Math.sin(t)*e)}function ft(t,e,n){return this instanceof ft?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof ft?new ft(t.l,t.a,t.b):t instanceof st?ct(t.h,t.c,t.l):Ct((t=yt(t)).r,t.g,t.b):new ft(t,e,n)}function ht(t,e,n){var r=(t+16)/116,a=r+e/500,o=r-n/200;return a=pt(a)*$i,r=pt(r)*Ji,o=pt(o)*Ki,new yt(vt(3.2404542*a-1.5371385*r-.4985314*o),vt(-.969266*a+1.8760108*r+.041556*o),vt(.0556434*a-.2040259*r+1.0572252*o))}function gt(t,e,n){return t>0?new st(Math.atan2(n,e)*Vi,Math.sqrt(e*e+n*n),t):new st(NaN,NaN,t)}function pt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function dt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function vt(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function yt(t,e,n){return this instanceof yt?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof yt?new yt(t.r,t.g,t.b):wt(""+t,yt,ut):new yt(t,e,n)}function mt(t){return new yt(t>>16,t>>8&255,255&t)}function xt(t){return mt(t)+""}function bt(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function wt(t,e,n){var r,a,o,i=0,l=0,u=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(a=r[2].split(","),r[1]){case"hsl":return n(parseFloat(a[0]),parseFloat(a[1])/100,parseFloat(a[2])/100);case"rgb":return e(At(a[0]),At(a[1]),At(a[2]))}return(o=el.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(i=(3840&o)>>4,i|=i>>4,l=240&o,l|=l>>4,u=15&o,u|=u<<4):7===t.length&&(i=(16711680&o)>>16,l=(65280&o)>>8,u=255&o)),e(i,l,u))}function Mt(t,e,n){var r,a,o=Math.min(t/=255,e/=255,n/=255),i=Math.max(t,e,n),l=i-o,u=(i+o)/2;return l?(a=u<.5?l/(i+o):l/(2-i-o),r=t==i?(e-n)/l+(e<n?6:0):e==i?(n-t)/l+2:(t-e)/l+4,r*=60):(r=NaN,a=u>0&&u<1?0:r),new lt(r,a,u)}function Ct(t,e,n){t=kt(t),e=kt(e),n=kt(n);var r=dt((.4124564*t+.3575761*e+.1804375*n)/$i),a=dt((.2126729*t+.7151522*e+.072175*n)/Ji);return ft(116*a-16,500*(r-a),200*(a-dt((.0193339*t+.119192*e+.9503041*n)/Ki)))}function kt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function At(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function Nt(t){return"function"==typeof t?t:function(){return t}}function _t(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),St(e,n,t,r)}}function St(t,e,n,r){function a(){var t,e=u.status;if(!e&&zt(u)||e>=200&&e<300||304===e){try{t=n.call(o,u)}catch(t){return void i.error.call(o,t)}i.load.call(o,t)}else i.error.call(o,u)}var o={},i=ui.dispatch("beforesend","progress","load","error"),l={},u=new XMLHttpRequest,s=null;return!this.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(t)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=a:u.onreadystatechange=function(){u.readyState>3&&a()},u.onprogress=function(t){var e=ui.event;ui.event=t;try{i.progress.call(o,u)}finally{ui.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l[t]:(null==e?delete l[t]:l[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.responseType=function(t){return arguments.length?(s=t,o):s},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(ci(arguments)))}}),o.send=function(n,r,a){if(2===arguments.length&&"function"==typeof r&&(a=r,r=null),u.open(n,t,!0),null==e||"accept"in l||(l.accept=e+",*/*"),u.setRequestHeader)for(var c in l)u.setRequestHeader(c,l[c]);return null!=e&&u.overrideMimeType&&u.overrideMimeType(e),null!=s&&(u.responseType=s),null!=a&&o.on("error",a).on("load",function(t){a(null,t)}),i.beforesend.call(o,u),u.send(null==r?null:r),o},o.abort=function(){return u.abort(),o},ui.rebind(o,i,"on"),null==r?o:o.get(Et(r))}function Et(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function zt(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Ft(t,e,n){var r=arguments.length;r<2&&(e=0),r<3&&(n=Date.now());var a=n+e,o={c:t,t:a,n:null};return rl?rl.n=o:nl=o,rl=o,al||(ol=clearTimeout(ol),al=1,il(Bt)),o}function Bt(){var t=Dt(),e=Tt()-t;e>24?(isFinite(e)&&(clearTimeout(ol),ol=setTimeout(Bt,e)),al=0):(al=1,il(Bt))}function Dt(){for(var t=Date.now(),e=nl;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Tt(){for(var t,e=nl,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:nl=e.n;return rl=t,n}function Gt(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Lt(t,e){var n=Math.pow(10,3*mi(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function Pt(t){var e=t.decimal,n=t.thousands,r=t.grouping,a=t.currency,o=r&&n?function(t,e){for(var a=t.length,o=[],i=0,l=r[0],u=0;a>0&&l>0&&(u+l+1>e&&(l=Math.max(1,e-u)),o.push(t.substring(a-=l,a+l)),!((u+=l+1)>e));)l=r[i=(i+1)%r.length];return o.reverse().join(n)}:m;return function(t){var n=ul.exec(t),r=n[1]||" ",i=n[2]||">",l=n[3]||"-",u=n[4]||"",s=n[5],c=+n[6],f=n[7],h=n[8],g=n[9],p=1,d="",v="",y=!1,m=!0;switch(h&&(h=+h.substring(1)),(s||"0"===r&&"="===i)&&(s=r="0",i="="),g){case"n":f=!0,g="g";break;case"%":p=100,v="%",g="f";break;case"p":p=100,v="%",g="r";break;case"b":case"o":case"x":case"X":"#"===u&&(d="0"+g.toLowerCase());case"c":m=!1;case"d":y=!0,h=0;break;case"s":p=-1,g="r"}"$"===u&&(d=a[0],v=a[1]),"r"!=g||h||(g="g"),null!=h&&("g"==g?h=Math.max(1,Math.min(21,h)):"e"!=g&&"f"!=g||(h=Math.max(0,Math.min(20,h)))),g=sl.get(g)||qt;var x=s&&f;return function(t){var n=v;if(y&&t%1)return"";var a=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===l?"":l;if(p<0){var u=ui.formatPrefix(t,h);t=u.scale(t),n=u.symbol+v}else t*=p;t=g(t,h);var b,w,M=t.lastIndexOf(".");if(M<0){var C=m?t.lastIndexOf("e"):-1;C<0?(b=t,w=""):(b=t.substring(0,C),w=t.substring(C))}else b=t.substring(0,M),w=e+t.substring(M+1);!s&&f&&(b=o(b,1/0));var k=d.length+b.length+w.length+(x?0:a.length),A=k<c?new Array(k=c-k+1).join(r):"";return x&&(b=o(A+b,A.length?c-w.length:1/0)),a+=d,t=b+w,("<"===i?a+t+A:">"===i?A+a+t:"^"===i?A.substring(0,k>>=1)+a+t+A.substring(k):a+(x?t:A+t))+n}}}function qt(t){return t+""}function Rt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ht(t,e,n){function r(e){var n=t(e),r=o(n,1);return e-n<r-e?n:r}function a(n){return e(n=t(new fl(n-1)),1),n}function o(t,n){return e(t=new fl(+t),n),t}function i(t,r,o){var i=a(t),l=[];if(o>1)for(;i<r;)n(i)%o||l.push(new Date(+i)),e(i,1);else for(;i<r;)l.push(new Date(+i)),e(i,1);return l}function l(t,e,n){try{fl=Rt;var r=new Rt;return r._=t,i(r,e,n)}finally{fl=Date}}t.floor=t,t.round=r,t.ceil=a,t.offset=o,t.range=i;var u=t.utc=Ut(t);return u.floor=u,u.round=Ut(r),u.ceil=Ut(a),u.offset=Ut(o),u.range=l,t}function Ut(t){return function(e,n){try{fl=Rt;var r=new Rt;return r._=e,t(r,n)._}finally{fl=Date}}}function Vt(t){function e(t){function e(e){for(var n,a,o,i=[],l=-1,u=0;++l<r;)37===t.charCodeAt(l)&&(i.push(t.slice(u,l)),null!=(a=gl[n=t.charAt(++l)])&&(n=t.charAt(++l)),(o=S[n])&&(n=o(e,null==a?"e"===n?" ":"0":a)),i.push(n),u=l+1);return i.push(t.slice(u,l)),i.join("")}var r=t.length;return e.parse=function(e){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(n(r,t,e,0)!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var a=null!=r.Z&&fl!==Rt,o=new(a?Rt:fl);return"j"in r?o.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),a?o._:o},e.toString=function(){return t},e}function n(t,e,n,r){for(var a,o,i,l=0,u=e.length,s=n.length;l<u;){if(r>=s)return-1;if(37===(a=e.charCodeAt(l++))){if(i=e.charAt(l++),!(o=E[i in gl?e.charAt(l++):i])||(r=o(t,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}function r(t,e,n){M.lastIndex=0;var r=M.exec(e.slice(n));return r?(t.w=C.get(r[0].toLowerCase()),n+r[0].length):-1}function a(t,e,n){b.lastIndex=0;var r=b.exec(e.slice(n));return r?(t.w=w.get(r[0].toLowerCase()),n+r[0].length):-1}function o(t,e,n){N.lastIndex=0;var r=N.exec(e.slice(n));return r?(t.m=_.get(r[0].toLowerCase()),n+r[0].length):-1}function i(t,e,n){k.lastIndex=0;var r=k.exec(e.slice(n));return r?(t.m=A.get(r[0].toLowerCase()),n+r[0].length):-1}function l(t,e,r){return n(t,S.c.toString(),e,r)}function u(t,e,r){return n(t,S.x.toString(),e,r)}function s(t,e,r){return n(t,S.X.toString(),e,r)}function c(t,e,n){var r=x.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)}var f=t.dateTime,h=t.date,g=t.time,p=t.periods,d=t.days,v=t.shortDays,y=t.months,m=t.shortMonths;e.utc=function(t){function n(t){try{fl=Rt;var e=new fl;return e._=t,r(e)}finally{fl=Date}}var r=e(t);return n.parse=function(t){try{fl=Rt;var e=r.parse(t);return e&&e._}finally{fl=Date}},n.toString=r.toString,n},e.multi=e.utc.multi=ue;var x=ui.map(),b=Ot(d),w=It(d),M=Ot(v),C=It(v),k=Ot(y),A=It(y),N=Ot(m),_=It(m);p.forEach(function(t,e){x.set(t.toLowerCase(),e)});var S={a:function(t){return v[t.getDay()]},A:function(t){return d[t.getDay()]},b:function(t){return m[t.getMonth()]},B:function(t){return y[t.getMonth()]},c:e(f),d:function(t,e){return jt(t.getDate(),e,2)},e:function(t,e){return jt(t.getDate(),e,2)},H:function(t,e){return jt(t.getHours(),e,2)},I:function(t,e){return jt(t.getHours()%12||12,e,2)},j:function(t,e){return jt(1+cl.dayOfYear(t),e,3)},L:function(t,e){return jt(t.getMilliseconds(),e,3)},m:function(t,e){return jt(t.getMonth()+1,e,2)},M:function(t,e){return jt(t.getMinutes(),e,2)},p:function(t){return p[+(t.getHours()>=12)]},S:function(t,e){return jt(t.getSeconds(),e,2)},U:function(t,e){return jt(cl.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return jt(cl.mondayOfYear(t),e,2)},x:e(h),X:e(g),y:function(t,e){return jt(t.getFullYear()%100,e,2)},Y:function(t,e){return jt(t.getFullYear()%1e4,e,4)},Z:ie,"%":function(){return"%"}},E={a:r,A:a,b:o,B:i,c:l,d:te,e:te,H:ne,I:ne,j:ee,L:oe,m:Qt,M:re,p:c,S:ae,U:Zt,w:Yt,W:Wt,x:u,X:s,y:$t,Y:Xt,Z:Jt,"%":le};return e}function jt(t,e,n){var r=t<0?"-":"",a=(r?-t:t)+"",o=a.length;return r+(o<n?new Array(n-o+1).join(e)+a:a)}function Ot(t){return new RegExp("^(?:"+t.map(ui.requote).join("|")+")","i")}function It(t){for(var e=new s,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Yt(t,e,n){pl.lastIndex=0;var r=pl.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Zt(t,e,n){pl.lastIndex=0;var r=pl.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function Wt(t,e,n){pl.lastIndex=0;var r=pl.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function Xt(t,e,n){pl.lastIndex=0;var r=pl.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function $t(t,e,n){pl.lastIndex=0;var r=pl.exec(e.slice(n,n+2));return r?(t.y=Kt(+r[0]),n+r[0].length):-1}function Jt(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Kt(t){return t+(t>68?1900:2e3)}function Qt(t,e,n){pl.lastIndex=0;var r=pl.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function te(t,e,n){pl.lastIndex=0;var r=pl.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ee(t,e,n){pl.lastIndex=0;var r=pl.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function ne(t,e,n){pl.lastIndex=0;var r=pl.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function re(t,e,n){pl.lastIndex=0;var r=pl.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function ae(t,e,n){pl.lastIndex=0;var r=pl.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function oe(t,e,n){pl.lastIndex=0;var r=pl.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ie(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=mi(e)/60|0,a=mi(e)%60;return n+jt(r,"0",2)+jt(a,"0",2)}function le(t,e,n){dl.lastIndex=0;var r=dl.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ue(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}function se(){}function ce(t,e,n){var r=n.s=t+e,a=r-t,o=r-a;n.t=t-o+(e-a)}function fe(t,e){t&&xl.hasOwnProperty(t.type)&&xl[t.type](t,e)}function he(t,e,n){var r,a=-1,o=t.length-n;for(e.lineStart();++a<o;)r=t[a],e.point(r[0],r[1],r[2]);e.lineEnd()}function ge(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)he(t[n],e,1);e.polygonEnd()}function pe(){function t(t,e){t*=Ui,e=e*Ui/2+Pi/4;var n=t-r,i=n>=0?1:-1,l=i*n,u=Math.cos(e),s=Math.sin(e),c=o*s,f=a*u+c*Math.cos(l),h=c*i*Math.sin(l);wl.add(Math.atan2(h,f)),r=t,a=u,o=s}var e,n,r,a,o;Ml.point=function(i,l){Ml.point=t,r=(e=i)*Ui,a=Math.cos(l=(n=l)*Ui/2+Pi/4),o=Math.sin(l)},Ml.lineEnd=function(){t(e,n)}}function de(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function ve(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ye(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function me(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function xe(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function be(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function we(t){return[Math.atan2(t[1],t[0]),et(t[2])]}function Me(t,e){return mi(t[0]-e[0])<Gi&&mi(t[1]-e[1])<Gi}function Ce(t,e){t*=Ui;var n=Math.cos(e*=Ui);ke(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function ke(t,e,n){++Cl,Al+=(t-Al)/Cl,Nl+=(e-Nl)/Cl,_l+=(n-_l)/Cl}function Ae(){function t(t,a){t*=Ui;var o=Math.cos(a*=Ui),i=o*Math.cos(t),l=o*Math.sin(t),u=Math.sin(a),s=Math.atan2(Math.sqrt((s=n*u-r*l)*s+(s=r*i-e*u)*s+(s=e*l-n*i)*s),e*i+n*l+r*u);kl+=s,Sl+=s*(e+(e=i)),El+=s*(n+(n=l)),zl+=s*(r+(r=u)),ke(e,n,r)}var e,n,r;Tl.point=function(a,o){a*=Ui;var i=Math.cos(o*=Ui);e=i*Math.cos(a),n=i*Math.sin(a),r=Math.sin(o),Tl.point=t,ke(e,n,r)}}function Ne(){Tl.point=Ce}function _e(){function t(t,e){t*=Ui;var n=Math.cos(e*=Ui),i=n*Math.cos(t),l=n*Math.sin(t),u=Math.sin(e),s=a*u-o*l,c=o*i-r*u,f=r*l-a*i,h=Math.sqrt(s*s+c*c+f*f),g=r*i+a*l+o*u,p=h&&-tt(g)/h,d=Math.atan2(h,g);Fl+=p*s,Bl+=p*c,Dl+=p*f,kl+=d,Sl+=d*(r+(r=i)),El+=d*(a+(a=l)),zl+=d*(o+(o=u)),ke(r,a,o)}var e,n,r,a,o;Tl.point=function(i,l){e=i,n=l,Tl.point=t,i*=Ui;var u=Math.cos(l*=Ui);r=u*Math.cos(i),a=u*Math.sin(i),o=Math.sin(l),ke(r,a,o)},Tl.lineEnd=function(){t(e,n),Tl.lineEnd=Ne,Tl.point=Ce}}function Se(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Ee(){return!0}function ze(t,e,n,r,a){var o=[],i=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(Me(n,r)){a.lineStart();for(var l=0;l<e;++l)a.point((n=t[l])[0],n[1]);return void a.lineEnd()}var u=new Be(n,t,null,!0),s=new Be(n,null,u,!1);u.o=s,o.push(u),i.push(s),u=new Be(r,t,null,!1),s=new Be(r,null,u,!0),u.o=s,o.push(u),i.push(s)}}),i.sort(e),Fe(o),Fe(i),o.length){for(var l=0,u=n,s=i.length;l<s;++l)i[l].e=u=!u;for(var c,f,h=o[0];;){for(var g=h,p=!0;g.v;)if((g=g.n)===h)return;c=g.z,a.lineStart();do{if(g.v=g.o.v=!0,g.e){if(p)for(var l=0,s=c.length;l<s;++l)a.point((f=c[l])[0],f[1]);else r(g.x,g.n.x,1,a);g=g.n}else{if(p){c=g.p.z;for(var l=c.length-1;l>=0;--l)a.point((f=c[l])[0],f[1])}else r(g.x,g.p.x,-1,a);g=g.p}g=g.o,c=g.z,p=!p}while(!g.v);a.lineEnd()}}}function Fe(t){if(e=t.length){for(var e,n,r=0,a=t[0];++r<e;)a.n=n=t[r],n.p=a,a=n;a.n=n=t[0],n.p=a}}function Be(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function De(t,e,n,r){return function(a,o){function i(e,n){var r=a(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function l(t,e){var n=a(t,e);v.point(n[0],n[1])}function u(){m.point=l,v.lineStart()}function s(){m.point=i,v.lineEnd()}function c(t,e){d.push([t,e]);var n=a(t,e);b.point(n[0],n[1])}function f(){b.lineStart(),d=[]}function h(){c(d[0][0],d[0][1]),b.lineEnd();var t,e=b.clean(),n=x.buffer(),r=n.length;if(d.pop(),p.push(d),d=null,r)if(1&e){t=n[0];var a,r=t.length-1,i=-1;if(r>0){for(w||(o.polygonStart(),w=!0),o.lineStart();++i<r;)o.point((a=t[i])[0],a[1]);o.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),g.push(n.filter(Te))}var g,p,d,v=e(o),y=a.invert(r[0],r[1]),m={point:i,lineStart:u,lineEnd:s,polygonStart:function(){m.point=c,m.lineStart=f,m.lineEnd=h,g=[],p=[]},polygonEnd:function(){m.point=i,m.lineStart=u,m.lineEnd=s,g=ui.merge(g);var t=He(y,p);g.length?(w||(o.polygonStart(),w=!0),ze(g,Le,t,n,o)):t&&(w||(o.polygonStart(),w=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),w&&(o.polygonEnd(),w=!1),g=p=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},x=Ge(),b=e(x),w=!1;return m}}function Te(t){return t.length>1}function Ge(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:w,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Le(t,e){return((t=t.x)[0]<0?t[1]-Hi-Gi:Hi-t[1])-((e=e.x)[0]<0?e[1]-Hi-Gi:Hi-e[1])}function Pe(t){var e,n=NaN,r=NaN,a=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,i){var l=o>0?Pi:-Pi,u=mi(o-n);mi(u-Pi)<Gi?(t.point(n,r=(r+i)/2>0?Hi:-Hi),t.point(a,r),t.lineEnd(),t.lineStart(),t.point(l,r),t.point(o,r),e=0):a!==l&&u>=Pi&&(mi(n-a)<Gi&&(n-=a*Gi),mi(o-l)<Gi&&(o-=l*Gi),r=qe(n,r,o,i),t.point(a,r),t.lineEnd(),t.lineStart(),t.point(l,r),e=0),t.point(n=o,r=i),a=l},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function qe(t,e,n,r){var a,o,i=Math.sin(t-n);return mi(i)>Gi?Math.atan((Math.sin(e)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(a=Math.cos(e))*Math.sin(t))/(a*o*i)):(e+r)/2}function Re(t,e,n,r){var a;if(null==t)a=n*Hi,r.point(-Pi,a),r.point(0,a),r.point(Pi,a),r.point(Pi,0),r.point(Pi,-a),r.point(0,-a),r.point(-Pi,-a),r.point(-Pi,0),r.point(-Pi,a);else if(mi(t[0]-e[0])>Gi){var o=t[0]<e[0]?Pi:-Pi;a=n*o/2,r.point(-o,a),r.point(0,a),r.point(o,a)}else r.point(e[0],e[1])}function He(t,e){var n=t[0],r=t[1],a=[Math.sin(n),-Math.cos(n),0],o=0,i=0;wl.reset();for(var l=0,u=e.length;l<u;++l){var s=e[l],c=s.length;if(c)for(var f=s[0],h=f[0],g=f[1]/2+Pi/4,p=Math.sin(g),d=Math.cos(g),v=1;;){v===c&&(v=0),t=s[v];var y=t[0],m=t[1]/2+Pi/4,x=Math.sin(m),b=Math.cos(m),w=y-h,M=w>=0?1:-1,C=M*w,k=C>Pi,A=p*x;if(wl.add(Math.atan2(A*M*Math.sin(C),d*b+A*Math.cos(C))),o+=k?w+M*qi:w,k^h>=n^y>=n){var N=ye(de(f),de(t));be(N);var _=ye(a,N);be(_);var S=(k^w>=0?-1:1)*et(_[2]);(r>S||r===S&&(N[0]||N[1]))&&(i+=k^w>=0?1:-1)}if(!v++)break;h=y,p=x,d=b,f=t}}return(o<-Gi||o<Gi&&wl<-Gi)^1&i}function Ue(t){function e(t,e){return Math.cos(t)*Math.cos(e)>o}function n(t){var n,o,u,s,c;return{lineStart:function(){s=u=!1,c=1},point:function(f,h){var g,p=[f,h],d=e(f,h),v=i?d?0:a(f,h):d?a(f+(f<0?Pi:-Pi),h):0;if(!n&&(s=u=d)&&t.lineStart(),d!==u&&(g=r(n,p),(Me(n,g)||Me(p,g))&&(p[0]+=Gi,p[1]+=Gi,d=e(p[0],p[1]))),d!==u)c=0,d?(t.lineStart(),g=r(p,n),t.point(g[0],g[1])):(g=r(n,p),t.point(g[0],g[1]),t.lineEnd()),n=g;else if(l&&n&&i^d){var y;v&o||!(y=r(p,n,!0))||(c=0,i?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!d||n&&Me(n,p)||t.point(p[0],p[1]),n=p,u=d,o=v},lineEnd:function(){u&&t.lineEnd(),n=null},clean:function(){return c|(s&&u)<<1}}}function r(t,e,n){var r=de(t),a=de(e),i=[1,0,0],l=ye(r,a),u=ve(l,l),s=l[0],c=u-s*s;if(!c)return!n&&t;var f=o*u/c,h=-o*s/c,g=ye(i,l),p=xe(i,f);me(p,xe(l,h));var d=g,v=ve(p,d),y=ve(d,d),m=v*v-y*(ve(p,p)-1);if(!(m<0)){var x=Math.sqrt(m),b=xe(d,(-v-x)/y);if(me(b,p),b=we(b),!n)return b;var w,M=t[0],C=e[0],k=t[1],A=e[1];C<M&&(w=M,M=C,C=w);var N=C-M,_=mi(N-Pi)<Gi,S=_||N<Gi;if(!_&&A<k&&(w=k,k=A,A=w),S?_?k+A>0^b[1]<(mi(b[0]-M)<Gi?k:A):k<=b[1]&&b[1]<=A:N>Pi^(M<=b[0]&&b[0]<=C)){var E=xe(d,(-v+x)/y);return me(E,p),[b,we(E)]}}}function a(e,n){var r=i?t:Pi-t,a=0;return e<-r?a|=1:e>r&&(a|=2),n<-r?a|=4:n>r&&(a|=8),a}var o=Math.cos(t),i=o>0,l=mi(o)>Gi;return De(e,n,dn(t,6*Ui),i?[0,-t]:[-Pi,t-Pi])}function Ve(t,e,n,r){return function(a){var o,i=a.a,l=a.b,u=i.x,s=i.y,c=l.x,f=l.y,h=0,g=1,p=c-u,d=f-s;if(o=t-u,p||!(o>0)){if(o/=p,p<0){if(o<h)return;o<g&&(g=o)}else if(p>0){if(o>g)return;o>h&&(h=o)}if(o=n-u,p||!(o<0)){if(o/=p,p<0){if(o>g)return;o>h&&(h=o)}else if(p>0){if(o<h)return;o<g&&(g=o)}if(o=e-s,d||!(o>0)){if(o/=d,d<0){if(o<h)return;o<g&&(g=o)}else if(d>0){if(o>g)return;o>h&&(h=o)}if(o=r-s,d||!(o<0)){if(o/=d,d<0){if(o>g)return;o>h&&(h=o)}else if(d>0){if(o<h)return;o<g&&(g=o)}return h>0&&(a.a={x:u+h*p,y:s+h*d}),g<1&&(a.b={x:u+g*p,y:s+g*d}),a}}}}}}function je(t,e,n,r){function a(r,a){return mi(r[0]-t)<Gi?a>0?0:3:mi(r[0]-n)<Gi?a>0?2:1:mi(r[1]-e)<Gi?a>0?1:0:a>0?3:2}function o(t,e){return i(t.x,e.x)}function i(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(l){function u(t){for(var e=0,n=v.length,r=t[1],a=0;a<n;++a)for(var o,i=1,l=v[a],u=l.length,s=l[0];i<u;++i)o=l[i],s[1]<=r?o[1]>r&&Q(s,o,t)>0&&++e:o[1]<=r&&Q(s,o,t)<0&&--e,s=o;return 0!==e}function s(o,l,u,s){var c=0,f=0;if(null==o||(c=a(o,u))!==(f=a(l,u))||i(o,l)<0^u>0)do{s.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+u+4)%4)!==f);else s.point(l[0],l[1])}function c(a,o){return t<=a&&a<=n&&e<=o&&o<=r}function f(t,e){c(t,e)&&l.point(t,e)}function h(){E.point=p,v&&v.push(y=[]),k=!0,C=!1,w=M=NaN}function g(){d&&(p(m,x),b&&C&&_.rejoin(),d.push(_.buffer())),E.point=f,C&&l.lineEnd()}function p(t,e){t=Math.max(-Ll,Math.min(Ll,t)),e=Math.max(-Ll,Math.min(Ll,e));var n=c(t,e);if(v&&y.push([t,e]),k)m=t,x=e,b=n,k=!1,n&&(l.lineStart(),l.point(t,e));else if(n&&C)l.point(t,e);else{var r={a:{x:w,y:M},b:{x:t,y:e}};S(r)?(C||(l.lineStart(),l.point(r.a.x,r.a.y)),l.point(r.b.x,r.b.y),n||l.lineEnd(),A=!1):n&&(l.lineStart(),l.point(t,e),A=!1)}w=t,M=e,C=n}var d,v,y,m,x,b,w,M,C,k,A,N=l,_=Ge(),S=Ve(t,e,n,r),E={point:f,lineStart:h,lineEnd:g,polygonStart:function(){l=_,d=[],v=[],A=!0},polygonEnd:function(){l=N,d=ui.merge(d);var e=u([t,r]),n=A&&e,a=d.length;(n||a)&&(l.polygonStart(),n&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),a&&ze(d,o,e,s,l),l.polygonEnd()),d=v=y=null}};return E}}function Oe(t){var e=0,n=Pi/3,r=ln(t),a=r(e,n);return a.parallels=function(t){return arguments.length?r(e=t[0]*Pi/180,n=t[1]*Pi/180):[e/Pi*180,n/Pi*180]},a}function Ie(t,e){function n(t,e){var n=Math.sqrt(o-2*a*Math.sin(e))/a;return[n*Math.sin(t*=a),i-n*Math.cos(t)]}var r=Math.sin(t),a=(r+Math.sin(e))/2,o=1+r*(2*a-r),i=Math.sqrt(o)/a;return n.invert=function(t,e){var n=i-e;return[Math.atan2(t,n)/a,et((o-(t*t+n*n)*a*a)/(2*a))]},n}function Ye(){function t(t,e){ql+=a*t-r*e,r=t,a=e}var e,n,r,a;jl.point=function(o,i){jl.point=t,e=r=o,n=a=i},jl.lineEnd=function(){t(e,n)}}function Ze(t,e){t<Rl&&(Rl=t),t>Ul&&(Ul=t),e<Hl&&(Hl=e),e>Vl&&(Vl=e)}function We(){function t(t,e){i.push("M",t,",",e,o)}function e(t,e){i.push("M",t,",",e),l.point=n}function n(t,e){i.push("L",t,",",e)}function r(){l.point=t}function a(){i.push("Z")}var o=Xe(4.5),i=[],l={point:t,lineStart:function(){l.point=e},lineEnd:r,polygonStart:function(){l.lineEnd=a},polygonEnd:function(){l.lineEnd=r,l.point=t},pointRadius:function(t){return o=Xe(t),l},result:function(){if(i.length){var t=i.join("");return i=[],t}}};return l}function Xe(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function $e(t,e){Al+=t,Nl+=e,++_l}function Je(){function t(t,r){var a=t-e,o=r-n,i=Math.sqrt(a*a+o*o);Sl+=i*(e+t)/2,El+=i*(n+r)/2,zl+=i,$e(e=t,n=r)}var e,n;Il.point=function(r,a){Il.point=t,$e(e=r,n=a)}}function Ke(){Il.point=$e}function Qe(){function t(t,e){var n=t-r,o=e-a,i=Math.sqrt(n*n+o*o);Sl+=i*(r+t)/2,El+=i*(a+e)/2,zl+=i,i=a*t-r*e,Fl+=i*(r+t),Bl+=i*(a+e),Dl+=3*i,$e(r=t,a=e)}var e,n,r,a;Il.point=function(o,i){Il.point=t,$e(e=r=o,n=a=i)},Il.lineEnd=function(){t(e,n)}}function tn(t){function e(e,n){t.moveTo(e+i,n),t.arc(e,n,i,0,qi)}function n(e,n){t.moveTo(e,n),l.point=r}function r(e,n){t.lineTo(e,n)}function a(){l.point=e}function o(){t.closePath()}var i=4.5,l={point:e,lineStart:function(){l.point=n},lineEnd:a,polygonStart:function(){l.lineEnd=o},polygonEnd:function(){l.lineEnd=a,l.point=e},pointRadius:function(t){return i=t,l},result:w};return l}function en(t){function e(t){return(l?r:n)(t)}function n(e){return an(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})}function r(e){function n(n,r){n=t(n,r),e.point(n[0],n[1])}function r(){x=NaN,k.point=o,e.lineStart()}function o(n,r){var o=de([n,r]),i=t(n,r);a(x,b,m,w,M,C,x=i[0],b=i[1],m=n,w=o[0],M=o[1],C=o[2],l,e),e.point(x,b)}function i(){k.point=n,e.lineEnd()}function u(){r(),
k.point=s,k.lineEnd=c}function s(t,e){o(f=t,h=e),g=x,p=b,d=w,v=M,y=C,k.point=o}function c(){a(x,b,m,w,M,C,g,p,f,d,v,y,l,e),k.lineEnd=i,i()}var f,h,g,p,d,v,y,m,x,b,w,M,C,k={point:n,lineStart:r,lineEnd:i,polygonStart:function(){e.polygonStart(),k.lineStart=u},polygonEnd:function(){e.polygonEnd(),k.lineStart=r}};return k}function a(e,n,r,l,u,s,c,f,h,g,p,d,v,y){var m=c-e,x=f-n,b=m*m+x*x;if(b>4*o&&v--){var w=l+g,M=u+p,C=s+d,k=Math.sqrt(w*w+M*M+C*C),A=Math.asin(C/=k),N=mi(mi(C)-1)<Gi||mi(r-h)<Gi?(r+h)/2:Math.atan2(M,w),_=t(N,A),S=_[0],E=_[1],z=S-e,F=E-n,B=x*z-m*F;(B*B/b>o||mi((m*z+x*F)/b-.5)>.3||l*g+u*p+s*d<i)&&(a(e,n,r,l,u,s,S,E,N,w/=k,M/=k,C,v,y),y.point(S,E),a(S,E,N,w,M,C,c,f,h,g,p,d,v,y))}}var o=.5,i=Math.cos(30*Ui),l=16;return e.precision=function(t){return arguments.length?(l=(o=t*t)>0&&16,e):Math.sqrt(o)},e}function nn(t){var e=en(function(e,n){return t([e*Vi,n*Vi])});return function(t){return un(e(t))}}function rn(t){this.stream=t}function an(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function on(t){return ln(function(){return t})()}function ln(t){function e(t){return t=l(t[0]*Ui,t[1]*Ui),[t[0]*h+u,s-t[1]*h]}function n(t){return(t=l.invert((t[0]-u)/h,(s-t[1])/h))&&[t[0]*Vi,t[1]*Vi]}function r(){l=Se(i=fn(y,x,b),o);var t=o(d,v);return u=g-t[0]*h,s=p+t[1]*h,a()}function a(){return c&&(c.valid=!1,c=null),e}var o,i,l,u,s,c,f=en(function(t,e){return t=o(t,e),[t[0]*h+u,s-t[1]*h]}),h=150,g=480,p=250,d=0,v=0,y=0,x=0,b=0,w=Gl,M=m,C=null,k=null;return e.stream=function(t){return c&&(c.valid=!1),c=un(w(i,f(M(t)))),c.valid=!0,c},e.clipAngle=function(t){return arguments.length?(w=null==t?(C=t,Gl):Ue((C=+t)*Ui),a()):C},e.clipExtent=function(t){return arguments.length?(k=t,M=t?je(t[0][0],t[0][1],t[1][0],t[1][1]):m,a()):k},e.scale=function(t){return arguments.length?(h=+t,r()):h},e.translate=function(t){return arguments.length?(g=+t[0],p=+t[1],r()):[g,p]},e.center=function(t){return arguments.length?(d=t[0]%360*Ui,v=t[1]%360*Ui,r()):[d*Vi,v*Vi]},e.rotate=function(t){return arguments.length?(y=t[0]%360*Ui,x=t[1]%360*Ui,b=t.length>2?t[2]%360*Ui:0,r()):[y*Vi,x*Vi,b*Vi]},ui.rebind(e,f,"precision"),function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,r()}}function un(t){return an(t,function(e,n){t.point(e*Ui,n*Ui)})}function sn(t,e){return[t,e]}function cn(t,e){return[t>Pi?t-qi:t<-Pi?t+qi:t,e]}function fn(t,e,n){return t?e||n?Se(gn(t),pn(e,n)):gn(t):e||n?pn(e,n):cn}function hn(t){return function(e,n){return e+=t,[e>Pi?e-qi:e<-Pi?e+qi:e,n]}}function gn(t){var e=hn(t);return e.invert=hn(-t),e}function pn(t,e){function n(t,e){var n=Math.cos(e),l=Math.cos(t)*n,u=Math.sin(t)*n,s=Math.sin(e),c=s*r+l*a;return[Math.atan2(u*o-c*i,l*r-s*a),et(c*o+u*i)]}var r=Math.cos(t),a=Math.sin(t),o=Math.cos(e),i=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),l=Math.cos(t)*n,u=Math.sin(t)*n,s=Math.sin(e),c=s*o-u*i;return[Math.atan2(u*o+s*i,l*r+c*a),et(c*r-l*a)]},n}function dn(t,e){var n=Math.cos(t),r=Math.sin(t);return function(a,o,i,l){var u=i*e;null!=a?(a=vn(n,a),o=vn(n,o),(i>0?a<o:a>o)&&(a+=i*qi)):(a=t+i*qi,o=t-.5*u);for(var s,c=a;i>0?c>o:c<o;c-=u)l.point((s=we([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],s[1])}}function vn(t,e){var n=de(e);n[0]-=t,be(n);var r=tt(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Gi)%(2*Math.PI)}function yn(t,e,n){var r=ui.range(t,e-Gi,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function mn(t,e,n){var r=ui.range(t,e-Gi,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function xn(t){return t.source}function bn(t){return t.target}function wn(t,e,n,r){var a=Math.cos(e),o=Math.sin(e),i=Math.cos(r),l=Math.sin(r),u=a*Math.cos(t),s=a*Math.sin(t),c=i*Math.cos(n),f=i*Math.sin(n),h=2*Math.asin(Math.sqrt(ot(r-e)+a*i*ot(n-t))),g=1/Math.sin(h),p=h?function(t){var e=Math.sin(t*=h)*g,n=Math.sin(h-t)*g,r=n*u+e*c,a=n*s+e*f,i=n*o+e*l;return[Math.atan2(a,r)*Vi,Math.atan2(i,Math.sqrt(r*r+a*a))*Vi]}:function(){return[t*Vi,e*Vi]};return p.distance=h,p}function Mn(){function t(t,a){var o=Math.sin(a*=Ui),i=Math.cos(a),l=mi((t*=Ui)-e),u=Math.cos(l);Yl+=Math.atan2(Math.sqrt((l=i*Math.sin(l))*l+(l=r*o-n*i*u)*l),n*o+r*i*u),e=t,n=o,r=i}var e,n,r;Zl.point=function(a,o){e=a*Ui,n=Math.sin(o*=Ui),r=Math.cos(o),Zl.point=t},Zl.lineEnd=function(){Zl.point=Zl.lineEnd=w}}function Cn(t,e){function n(e,n){var r=Math.cos(e),a=Math.cos(n),o=t(r*a);return[o*a*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),a=e(r),o=Math.sin(a),i=Math.cos(a);return[Math.atan2(t*o,r*i),Math.asin(r&&n*o/r)]},n}function kn(t,e){function n(t,e){i>0?e<-Hi+Gi&&(e=-Hi+Gi):e>Hi-Gi&&(e=Hi-Gi);var n=i/Math.pow(a(e),o);return[n*Math.sin(o*t),i-n*Math.cos(o*t)]}var r=Math.cos(t),a=function(t){return Math.tan(Pi/4+t/2)},o=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(a(e)/a(t)),i=r*Math.pow(a(t),o)/o;return o?(n.invert=function(t,e){var n=i-e,r=K(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(i/r,1/o))-Hi]},n):Nn}function An(t,e){function n(t,e){var n=o-e;return[n*Math.sin(a*t),o-n*Math.cos(a*t)]}var r=Math.cos(t),a=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),o=r/a+t;return mi(a)<Gi?sn:(n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/a,o-K(a)*Math.sqrt(t*t+n*n)]},n)}function Nn(t,e){return[t,Math.log(Math.tan(Pi/4+e/2))]}function _n(t){var e,n=on(t),r=n.scale,a=n.translate,o=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=a.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var i=o.apply(n,arguments);if(i===n){if(e=null==t){var l=Pi*r(),u=a();o([[u[0]-l,u[1]-l],[u[0]+l,u[1]+l]])}}else e&&(i=null);return i},n.clipExtent(null)}function Sn(t,e){return[Math.log(Math.tan(Pi/4+e/2)),-t]}function En(t){return t[0]}function zn(t){return t[1]}function Fn(t){for(var e=t.length,n=[0,1],r=2,a=2;a<e;a++){for(;r>1&&Q(t[n[r-2]],t[n[r-1]],t[a])<=0;)--r;n[r++]=a}return n.slice(0,r)}function Bn(t,e){return t[0]-e[0]||t[1]-e[1]}function Dn(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Tn(t,e,n,r){var a=t[0],o=n[0],i=e[0]-a,l=r[0]-o,u=t[1],s=n[1],c=e[1]-u,f=r[1]-s,h=(l*(u-s)-f*(a-o))/(f*i-l*c);return[a+h*i,u+h*c]}function Gn(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function Ln(){rr(this),this.edge=this.site=this.circle=null}function Pn(t){var e=ou.pop()||new Ln;return e.site=t,e}function qn(t){Wn(t),nu.remove(t),ou.push(t),rr(t)}function Rn(t){var e=t.circle,n=e.x,r=e.cy,a={x:n,y:r},o=t.P,i=t.N,l=[t];qn(t);for(var u=o;u.circle&&mi(n-u.circle.x)<Gi&&mi(r-u.circle.cy)<Gi;)o=u.P,l.unshift(u),qn(u),u=o;l.unshift(u),Wn(u);for(var s=i;s.circle&&mi(n-s.circle.x)<Gi&&mi(r-s.circle.cy)<Gi;)i=s.N,l.push(s),qn(s),s=i;l.push(s),Wn(s);var c,f=l.length;for(c=1;c<f;++c)s=l[c],u=l[c-1],tr(s.edge,u.site,s.site,a);u=l[0],s=l[f-1],s.edge=Kn(u.site,s.site,null,a),Zn(u),Zn(s)}function Hn(t){for(var e,n,r,a,o=t.x,i=t.y,l=nu._;l;)if((r=Un(l,i)-o)>Gi)l=l.L;else{if(!((a=o-Vn(l,i))>Gi)){r>-Gi?(e=l.P,n=l):a>-Gi?(e=l,n=l.N):e=n=l;break}if(!l.R){e=l;break}l=l.R}var u=Pn(t);if(nu.insert(e,u),e||n){if(e===n)return Wn(e),n=Pn(e.site),nu.insert(u,n),u.edge=n.edge=Kn(e.site,u.site),Zn(e),void Zn(n);if(!n)return void(u.edge=Kn(e.site,u.site));Wn(e),Wn(n);var s=e.site,c=s.x,f=s.y,h=t.x-c,g=t.y-f,p=n.site,d=p.x-c,v=p.y-f,y=2*(h*v-g*d),m=h*h+g*g,x=d*d+v*v,b={x:(v*m-g*x)/y+c,y:(h*x-d*m)/y+f};tr(n.edge,s,p,b),u.edge=Kn(s,t,null,b),n.edge=Kn(t,p,null,b),Zn(e),Zn(n)}}function Un(t,e){var n=t.site,r=n.x,a=n.y,o=a-e;if(!o)return r;var i=t.P;if(!i)return-1/0;n=i.site;var l=n.x,u=n.y,s=u-e;if(!s)return l;var c=l-r,f=1/o-1/s,h=c/s;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*s)-u+s/2+a-o/2)))/f+r:(r+l)/2}function Vn(t,e){var n=t.N;if(n)return Un(n,e);var r=t.site;return r.y===e?r.x:1/0}function jn(t){this.site=t,this.edges=[]}function On(t){for(var e,n,r,a,o,i,l,u,s,c,f=t[0][0],h=t[1][0],g=t[0][1],p=t[1][1],d=eu,v=d.length;v--;)if((o=d[v])&&o.prepare())for(l=o.edges,u=l.length,i=0;i<u;)c=l[i].end(),r=c.x,a=c.y,s=l[++i%u].start(),e=s.x,n=s.y,(mi(r-e)>Gi||mi(a-n)>Gi)&&(l.splice(i,0,new er(Qn(o.site,c,mi(r-f)<Gi&&p-a>Gi?{x:f,y:mi(e-f)<Gi?n:p}:mi(a-p)<Gi&&h-r>Gi?{x:mi(n-p)<Gi?e:h,y:p}:mi(r-h)<Gi&&a-g>Gi?{x:h,y:mi(e-h)<Gi?n:g}:mi(a-g)<Gi&&r-f>Gi?{x:mi(n-g)<Gi?e:f,y:g}:null),o.site,null)),++u)}function In(t,e){return e.angle-t.angle}function Yn(){rr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Zn(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,a=t.site,o=n.site;if(r!==o){var i=a.x,l=a.y,u=r.x-i,s=r.y-l,c=o.x-i,f=o.y-l,h=2*(u*f-s*c);if(!(h>=-Li)){var g=u*u+s*s,p=c*c+f*f,d=(f*g-s*p)/h,v=(u*p-c*g)/h,f=v+l,y=iu.pop()||new Yn;y.arc=t,y.site=a,y.x=d+i,y.y=f+Math.sqrt(d*d+v*v),y.cy=f,t.circle=y;for(var m=null,x=au._;x;)if(y.y<x.y||y.y===x.y&&y.x<=x.x){if(!x.L){m=x.P;break}x=x.L}else{if(!x.R){m=x;break}x=x.R}au.insert(m,y),m||(ru=y)}}}}function Wn(t){var e=t.circle;e&&(e.P||(ru=e.N),au.remove(e),iu.push(e),rr(e),t.circle=null)}function Xn(t){for(var e,n=tu,r=Ve(t[0][0],t[0][1],t[1][0],t[1][1]),a=n.length;a--;)e=n[a],(!$n(e,t)||!r(e)||mi(e.a.x-e.b.x)<Gi&&mi(e.a.y-e.b.y)<Gi)&&(e.a=e.b=null,n.splice(a,1))}function $n(t,e){var n=t.b;if(n)return!0;var r,a,o=t.a,i=e[0][0],l=e[1][0],u=e[0][1],s=e[1][1],c=t.l,f=t.r,h=c.x,g=c.y,p=f.x,d=f.y,v=(h+p)/2,y=(g+d)/2;if(d===g){if(v<i||v>=l)return;if(h>p){if(o){if(o.y>=s)return}else o={x:v,y:u};n={x:v,y:s}}else{if(o){if(o.y<u)return}else o={x:v,y:s};n={x:v,y:u}}}else if(r=(h-p)/(d-g),a=y-r*v,r<-1||r>1)if(h>p){if(o){if(o.y>=s)return}else o={x:(u-a)/r,y:u};n={x:(s-a)/r,y:s}}else{if(o){if(o.y<u)return}else o={x:(s-a)/r,y:s};n={x:(u-a)/r,y:u}}else if(g<d){if(o){if(o.x>=l)return}else o={x:i,y:r*i+a};n={x:l,y:r*l+a}}else{if(o){if(o.x<i)return}else o={x:l,y:r*l+a};n={x:i,y:r*i+a}}return t.a=o,t.b=n,!0}function Jn(t,e){this.l=t,this.r=e,this.a=this.b=null}function Kn(t,e,n,r){var a=new Jn(t,e);return tu.push(a),n&&tr(a,t,e,n),r&&tr(a,e,t,r),eu[t.i].edges.push(new er(a,t,e)),eu[e.i].edges.push(new er(a,e,t)),a}function Qn(t,e,n){var r=new Jn(t,null);return r.a=e,r.b=n,tu.push(r),r}function tr(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function er(t,e,n){var r=t.a,a=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(a.x-r.x,r.y-a.y):Math.atan2(r.x-a.x,a.y-r.y)}function nr(){this._=null}function rr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ar(t,e){var n=e,r=e.R,a=n.U;a?a.L===n?a.L=r:a.R=r:t._=r,r.U=a,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function or(t,e){var n=e,r=e.L,a=n.U;a?a.L===n?a.L=r:a.R=r:t._=r,r.U=a,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ir(t){for(;t.L;)t=t.L;return t}function lr(t,e){var n,r,a,o=t.sort(ur).pop();for(tu=[],eu=new Array(t.length),nu=new nr,au=new nr;;)if(a=ru,o&&(!a||o.y<a.y||o.y===a.y&&o.x<a.x))o.x===n&&o.y===r||(eu[o.i]=new jn(o),Hn(o),n=o.x,r=o.y),o=t.pop();else{if(!a)break;Rn(a.arc)}e&&(Xn(e),On(e));var i={cells:eu,edges:tu};return nu=au=tu=eu=null,i}function ur(t,e){return e.y-t.y||e.x-t.x}function sr(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function cr(t){return t.x}function fr(t){return t.y}function hr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function gr(t,e,n,r,a,o){if(!t(e,n,r,a,o)){var i=.5*(n+a),l=.5*(r+o),u=e.nodes;u[0]&&gr(t,u[0],n,r,i,l),u[1]&&gr(t,u[1],i,r,a,l),u[2]&&gr(t,u[2],n,l,i,o),u[3]&&gr(t,u[3],i,l,a,o)}}function pr(t,e,n,r,a,o,i){var l,u=1/0;return function t(s,c,f,h,g){if(!(c>o||f>i||h<r||g<a)){if(p=s.point){var p,d=e-s.x,v=n-s.y,y=d*d+v*v;if(y<u){var m=Math.sqrt(u=y);r=e-m,a=n-m,o=e+m,i=n+m,l=p}}for(var x=s.nodes,b=.5*(c+h),w=.5*(f+g),M=e>=b,C=n>=w,k=C<<1|M,A=k+4;k<A;++k)if(s=x[3&k])switch(3&k){case 0:t(s,c,f,b,w);break;case 1:t(s,b,f,h,w);break;case 2:t(s,c,w,b,g);break;case 3:t(s,b,w,h,g)}}}(t,r,a,o,i),l}function dr(t,e){t=ui.rgb(t),e=ui.rgb(e);var n=t.r,r=t.g,a=t.b,o=e.r-n,i=e.g-r,l=e.b-a;return function(t){return"#"+bt(Math.round(n+o*t))+bt(Math.round(r+i*t))+bt(Math.round(a+l*t))}}function vr(t,e){var n,r={},a={};for(n in t)n in e?r[n]=xr(t[n],e[n]):a[n]=t[n];for(n in e)n in t||(a[n]=e[n]);return function(t){for(n in r)a[n]=r[n](t);return a}}function yr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function mr(t,e){var n,r,a,o=uu.lastIndex=su.lastIndex=0,i=-1,l=[],u=[];for(t+="",e+="";(n=uu.exec(t))&&(r=su.exec(e));)(a=r.index)>o&&(a=e.slice(o,a),l[i]?l[i]+=a:l[++i]=a),(n=n[0])===(r=r[0])?l[i]?l[i]+=r:l[++i]=r:(l[++i]=null,u.push({i:i,x:yr(n,r)})),o=su.lastIndex;return o<e.length&&(a=e.slice(o),l[i]?l[i]+=a:l[++i]=a),l.length<2?u[0]?(e=u[0].x,function(t){return e(t)+""}):function(){return e}:(e=u.length,function(t){for(var n,r=0;r<e;++r)l[(n=u[r]).i]=n.x(t);return l.join("")})}function xr(t,e){for(var n,r=ui.interpolators.length;--r>=0&&!(n=ui.interpolators[r](t,e)););return n}function br(t,e){var n,r=[],a=[],o=t.length,i=e.length,l=Math.min(t.length,e.length);for(n=0;n<l;++n)r.push(xr(t[n],e[n]));for(;n<o;++n)a[n]=t[n];for(;n<i;++n)a[n]=e[n];return function(t){for(n=0;n<l;++n)a[n]=r[n](t);return a}}function wr(t){return function(e){return e<=0?0:e>=1?1:t(e)}}function Mr(t){return function(e){return 1-t(1-e)}}function Cr(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function kr(t){return t*t}function Ar(t){return t*t*t}function Nr(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function _r(t){return function(e){return Math.pow(e,t)}}function Sr(t){return 1-Math.cos(t*Hi)}function Er(t){return Math.pow(2,10*(t-1))}function zr(t){return 1-Math.sqrt(1-t*t)}function Fr(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/qi*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*qi/e)}}function Br(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Dr(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Tr(t,e){t=ui.hcl(t),e=ui.hcl(e);var n=t.h,r=t.c,a=t.l,o=e.h-n,i=e.c-r,l=e.l-a;return isNaN(i)&&(i=0,r=isNaN(r)?e.c:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:o<-180&&(o+=360),function(t){return ct(n+o*t,r+i*t,a+l*t)+""}}function Gr(t,e){t=ui.hsl(t),e=ui.hsl(e);var n=t.h,r=t.s,a=t.l,o=e.h-n,i=e.s-r,l=e.l-a;return isNaN(i)&&(i=0,r=isNaN(r)?e.s:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:o<-180&&(o+=360),function(t){return ut(n+o*t,r+i*t,a+l*t)+""}}function Lr(t,e){t=ui.lab(t),e=ui.lab(e);var n=t.l,r=t.a,a=t.b,o=e.l-n,i=e.a-r,l=e.b-a;return function(t){return ht(n+o*t,r+i*t,a+l*t)+""}}function Pr(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function qr(t){var e=[t.a,t.b],n=[t.c,t.d],r=Hr(e),a=Rr(e,n),o=Hr(Ur(n,e,-a))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,a*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Vi,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(a,o)*Vi:0}function Rr(t,e){return t[0]*e[0]+t[1]*e[1]}function Hr(t){var e=Math.sqrt(Rr(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Ur(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Vr(t){return t.length?t.pop()+",":""}function jr(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var a=n.push("translate(",null,",",null,")");r.push({i:a-4,x:yr(t[0],e[0])},{i:a-2,x:yr(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}function Or(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(Vr(n)+"rotate(",null,")")-2,x:yr(t,e)})):e&&n.push(Vr(n)+"rotate("+e+")")}function Ir(t,e,n,r){t!==e?r.push({i:n.push(Vr(n)+"skewX(",null,")")-2,x:yr(t,e)}):e&&n.push(Vr(n)+"skewX("+e+")")}function Yr(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var a=n.push(Vr(n)+"scale(",null,",",null,")");r.push({i:a-4,x:yr(t[0],e[0])},{i:a-2,x:yr(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(Vr(n)+"scale("+e+")")}function Zr(t,e){var n=[],r=[];return t=ui.transform(t),e=ui.transform(e),jr(t.translate,e.translate,n,r),Or(t.rotate,e.rotate,n,r),Ir(t.skew,e.skew,n,r),Yr(t.scale,e.scale,n,r),t=e=null,function(t){for(var e,a=-1,o=r.length;++a<o;)n[(e=r[a]).i]=e.x(t);return n.join("")}}function Wr(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function Xr(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function $r(t){for(var e=t.source,n=t.target,r=Kr(e,n),a=[e];e!==r;)e=e.parent,a.push(e);for(var o=a.length;n!==r;)a.splice(o,0,n),n=n.parent;return a}function Jr(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Kr(t,e){if(t===e)return t;for(var n=Jr(t),r=Jr(e),a=n.pop(),o=r.pop(),i=null;a===o;)i=a,a=n.pop(),o=r.pop();return i}function Qr(t){t.fixed|=2}function ta(t){t.fixed&=-7}function ea(t){t.fixed|=4,t.px=t.x,t.py=t.y}function na(t){t.fixed&=-5}function ra(t,e,n){var r=0,a=0;if(t.charge=0,!t.leaf)for(var o,i=t.nodes,l=i.length,u=-1;++u<l;)null!=(o=i[u])&&(ra(o,e,n),t.charge+=o.charge,r+=o.charge*o.cx,a+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var s=e*n[t.point.index];t.charge+=t.pointCharge=s,r+=s*t.point.x,a+=s*t.point.y}t.cx=r/t.charge,t.cy=a/t.charge}function aa(t,e){return ui.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=ca,t}function oa(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(a=t.children)&&(r=a.length))for(var r,a;--r>=0;)n.push(a[r])}function ia(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(o=t.children)&&(a=o.length))for(var a,o,i=-1;++i<a;)n.push(o[i]);for(;null!=(t=r.pop());)e(t)}function la(t){return t.children}function ua(t){return t.value}function sa(t,e){return e.value-t.value}function ca(t){return ui.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function fa(t){return t.x}function ha(t){return t.y}function ga(t,e,n){t.y0=e,t.y=n}function pa(t){return ui.range(t.length)}function da(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function va(t){for(var e,n=1,r=0,a=t[0][1],o=t.length;n<o;++n)(e=t[n][1])>a&&(r=n,a=e);return r}function ya(t){return t.reduce(ma,0)}function ma(t,e){return t+e[1]}function xa(t,e){return ba(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function ba(t,e){for(var n=-1,r=+t[0],a=(t[1]-r)/e,o=[];++n<=e;)o[n]=a*n+r;return o}function wa(t){return[ui.min(t),ui.max(t)]}function Ma(t,e){return t.value-e.value}function Ca(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function ka(t,e){t._pack_next=e,e._pack_prev=t}function Aa(t,e){var n=e.x-t.x,r=e.y-t.y,a=t.r+e.r;return.999*a*a>n*n+r*r}function Na(t){function e(t){c=Math.min(t.x-t.r,c),f=Math.max(t.x+t.r,f),h=Math.min(t.y-t.r,h),g=Math.max(t.y+t.r,g)}if((n=t.children)&&(s=n.length)){var n,r,a,o,i,l,u,s,c=1/0,f=-1/0,h=1/0,g=-1/0;if(n.forEach(_a),r=n[0],r.x=-r.r,r.y=0,e(r),s>1&&(a=n[1],a.x=a.r,a.y=0,e(a),s>2))for(o=n[2],za(r,a,o),e(o),Ca(r,o),r._pack_prev=o,Ca(o,a),a=r._pack_next,i=3;i<s;i++){za(r,a,o=n[i]);var p=0,d=1,v=1;for(l=a._pack_next;l!==a;l=l._pack_next,d++)if(Aa(l,o)){p=1;break}if(1==p)for(u=r._pack_prev;u!==l._pack_prev&&!Aa(u,o);u=u._pack_prev,v++);p?(d<v||d==v&&a.r<r.r?ka(r,a=l):ka(r=u,a),i--):(Ca(r,o),a=o,e(o))}var y=(c+f)/2,m=(h+g)/2,x=0;for(i=0;i<s;i++)o=n[i],o.x-=y,o.y-=m,x=Math.max(x,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=x,n.forEach(Sa)}}function _a(t){t._pack_next=t._pack_prev=t}function Sa(t){delete t._pack_next,delete t._pack_prev}function Ea(t,e,n,r){var a=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,a)for(var o=-1,i=a.length;++o<i;)Ea(a[o],e,n,r)}function za(t,e,n){var r=t.r+n.r,a=e.x-t.x,o=e.y-t.y;if(r&&(a||o)){var i=e.r+n.r,l=a*a+o*o;i*=i,r*=r;var u=.5+(r-i)/(2*l),s=Math.sqrt(Math.max(0,2*i*(r+l)-(r-=l)*r-i*i))/(2*l);n.x=t.x+u*a+s*o,n.y=t.y+u*o-s*a}else n.x=t.x+r,n.y=t.y}function Fa(t,e){return t.parent==e.parent?1:2}function Ba(t){var e=t.children;return e.length?e[0]:t.t}function Da(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function Ta(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Ga(t){for(var e,n=0,r=0,a=t.children,o=a.length;--o>=0;)e=a[o],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function La(t,e,n){return t.a.parent===e.parent?t.a:n}function Pa(t){return 1+ui.max(t,function(t){return t.y})}function qa(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Ra(t){var e=t.children;return e&&e.length?Ra(e[0]):t}function Ha(t){var e,n=t.children;return n&&(e=n.length)?Ha(n[e-1]):t}function Ua(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Va(t,e){var n=t.x+e[3],r=t.y+e[0],a=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return a<0&&(n+=a/2,a=0),o<0&&(r+=o/2,o=0),{x:n,y:r,dx:a,dy:o}}function ja(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function Oa(t){return t.rangeExtent?t.rangeExtent():ja(t.range())}function Ia(t,e,n,r){var a=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(a(t))}}function Ya(t,e){var n,r=0,a=t.length-1,o=t[r],i=t[a];return i<o&&(n=r,r=a,a=n,n=o,o=i,i=n),t[r]=e.floor(o),t[a]=e.ceil(i),t}function Za(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:bu}function Wa(t,e,n,r){var a=[],o=[],i=0,l=Math.min(t.length,e.length)-1;for(t[l]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<=l;)a.push(n(t[i-1],t[i])),o.push(r(e[i-1],e[i]));return function(e){var n=ui.bisect(t,e,1,l)-1;return o[n](a[n](e))}}function Xa(t,e,n,r){function a(){var a=Math.min(t.length,e.length)>2?Wa:Ia,u=r?Xr:Wr;return i=a(t,e,u,n),l=a(e,t,u,xr),o}function o(t){return i(t)}var i,l;return o.invert=function(t){return l(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),a()):t},o.range=function(t){return arguments.length?(e=t,a()):e},o.rangeRound=function(t){return o.range(t).interpolate(Pr)},o.clamp=function(t){return arguments.length?(r=t,a()):r},o.interpolate=function(t){return arguments.length?(n=t,a()):n},o.ticks=function(e){return Qa(t,e)},o.tickFormat=function(e,n){return to(t,e,n)},o.nice=function(e){return Ja(t,e),a()},o.copy=function(){return Xa(t,e,n,r)},a()}function $a(t,e){return ui.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Ja(t,e){return Ya(t,Za(Ka(t,e)[2])),Ya(t,Za(Ka(t,e)[2])),t}function Ka(t,e){null==e&&(e=10);var n=ja(t),r=n[1]-n[0],a=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*a;return o<=.15?a*=10:o<=.35?a*=5:o<=.75&&(a*=2),n[0]=Math.ceil(n[0]/a)*a,n[1]=Math.floor(n[1]/a)*a+.5*a,n[2]=a,n}function Qa(t,e){return ui.range.apply(ui,Ka(t,e))}function to(t,e,n){var r=Ka(t,e);if(n){var a=ul.exec(n);if(a.shift(),"s"===a[8]){var o=ui.formatPrefix(Math.max(mi(r[0]),mi(r[1])));return a[7]||(a[7]="."+eo(o.scale(r[2]))),a[8]="f",n=ui.format(a.join("")),function(t){return n(o.scale(t))+o.symbol}}a[7]||(a[7]="."+no(a[8],r)),n=a.join("")}else n=",."+eo(r[2])+"f";return ui.format(n)}function eo(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function no(t,e){var n=eo(e[2]);return t in wu?Math.abs(n-eo(Math.max(mi(e[0]),mi(e[1]))))+ +("e"!==t):n-2*("%"===t)}function ro(t,e,n,r){function a(t){return(n?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function o(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function i(e){return t(a(e))}return i.invert=function(e){return o(t.invert(e))},i.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((r=e.map(Number)).map(a)),i):r},i.base=function(n){return arguments.length?(e=+n,t.domain(r.map(a)),i):e},i.nice=function(){var e=Ya(r.map(a),n?Math:Cu);return t.domain(e),r=e.map(o),i},i.ticks=function(){var t=ja(r),i=[],l=t[0],u=t[1],s=Math.floor(a(l)),c=Math.ceil(a(u)),f=e%1?2:e;if(isFinite(c-s)){if(n){for(;s<c;s++)for(var h=1;h<f;h++)i.push(o(s)*h);i.push(o(s))}else for(i.push(o(s));s++<c;)for(var h=f-1;h>0;h--)i.push(o(s)*h);for(s=0;i[s]<l;s++);for(c=i.length;i[c-1]>u;c--);i=i.slice(s,c)}return i},i.tickFormat=function(t,n){if(!arguments.length)return Mu;arguments.length<2?n=Mu:"function"!=typeof n&&(n=ui.format(n));var r=Math.max(1,e*t/i.ticks().length);return function(t){var i=t/o(Math.round(a(t)));return i*e<e-.5&&(i*=e),i<=r?n(t):""}},i.copy=function(){return ro(t.copy(),e,n,r)},$a(i,t)}function ao(t,e,n){function r(e){return t(a(e))}var a=oo(e),o=oo(1/e);return r.invert=function(e){return o(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(a)),r):n},r.ticks=function(t){return Qa(n,t)},r.tickFormat=function(t,e){return to(n,t,e)},r.nice=function(t){return r.domain(Ja(n,t))},r.exponent=function(i){return arguments.length?(a=oo(e=i),o=oo(1/e),t.domain(n.map(a)),r):e},r.copy=function(){return ao(t.copy(),e,n)},$a(r,t)}function oo(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function io(t,e){function n(n){return o[((a.get(n)||("range"===e.t?a.set(n,t.push(n)):NaN))-1)%o.length]}function r(e,n){return ui.range(t.length).map(function(t){return e+n*t})}var a,o,i;return n.domain=function(r){if(!arguments.length)return t;t=[],a=new s;for(var o,i=-1,l=r.length;++i<l;)a.has(o=r[i])||a.set(o,t.push(o));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(o=t,i=0,e={t:"range",a:arguments},n):o},n.rangePoints=function(a,l){arguments.length<2&&(l=0);var u=a[0],s=a[1],c=t.length<2?(u=(u+s)/2,0):(s-u)/(t.length-1+l);return o=r(u+c*l/2,c),i=0,e={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(a,l){arguments.length<2&&(l=0);var u=a[0],s=a[1],c=t.length<2?(u=s=Math.round((u+s)/2),0):(s-u)/(t.length-1+l)|0;return o=r(u+Math.round(c*l/2+(s-u-(t.length-1+l)*c)/2),c),i=0,e={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(a,l,u){arguments.length<2&&(l=0),arguments.length<3&&(u=l);var s=a[1]<a[0],c=a[s-0],f=a[1-s],h=(f-c)/(t.length-l+2*u);return o=r(c+h*u,h),s&&o.reverse(),i=h*(1-l),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(a,l,u){arguments.length<2&&(l=0),arguments.length<3&&(u=l);var s=a[1]<a[0],c=a[s-0],f=a[1-s],h=Math.floor((f-c)/(t.length-l+2*u));return o=r(c+Math.round((f-c-(t.length-l)*h)/2),h),s&&o.reverse(),i=Math.round(h*(1-l)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return i},n.rangeExtent=function(){return ja(e.a[0])},n.copy=function(){return io(t,e)},n.domain(t)}function lo(t,e){function o(){var n=0,r=e.length;for(l=[];++n<r;)l[n-1]=ui.quantile(t,n/r);return i}function i(t){if(!isNaN(t=+t))return e[ui.bisect(l,t)]}var l;return i.domain=function(e){return arguments.length?(t=e.map(r).filter(a).sort(n),o()):t},i.range=function(t){return arguments.length?(e=t,o()):e},i.quantiles=function(){return l},i.invertExtent=function(n){return n=e.indexOf(n),n<0?[NaN,NaN]:[n>0?l[n-1]:t[0],n<l.length?l[n]:t[t.length-1]]},i.copy=function(){return lo(t,e)},o()}function uo(t,e,n){function r(e){return n[Math.max(0,Math.min(i,Math.floor(o*(e-t))))]}function a(){return o=n.length/(e-t),i=n.length-1,r}var o,i;return r.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],a()):[t,e]},r.range=function(t){return arguments.length?(n=t,a()):n},r.invertExtent=function(e){return e=n.indexOf(e),e=e<0?NaN:e/o+t,[e,e+1/o]},r.copy=function(){return uo(t,e,n)},a()}function so(t,e){function n(n){if(n<=n)return e[ui.bisect(t,n)]}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return so(t,e)},n}function co(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return Qa(t,e)},e.tickFormat=function(e,n){return to(t,e,n)},e.copy=function(){return co(t)},e}function fo(){return 0}function ho(t){return t.innerRadius}function go(t){return t.outerRadius}function po(t){return t.startAngle}function vo(t){return t.endAngle}function yo(t){return t&&t.padAngle}function mo(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function xo(t,e,n,r,a){var o=t[0]-e[0],i=t[1]-e[1],l=(a?r:-r)/Math.sqrt(o*o+i*i),u=l*i,s=-l*o,c=t[0]+u,f=t[1]+s,h=e[0]+u,g=e[1]+s,p=(c+h)/2,d=(f+g)/2,v=h-c,y=g-f,m=v*v+y*y,x=n-r,b=c*g-h*f,w=(y<0?-1:1)*Math.sqrt(Math.max(0,x*x*m-b*b)),M=(b*y-v*w)/m,C=(-b*v-y*w)/m,k=(b*y+v*w)/m,A=(-b*v+y*w)/m,N=M-p,_=C-d,S=k-p,E=A-d;return N*N+_*_>S*S+E*E&&(M=k,C=A),[[M-u,C-s],[M*n/x,C*n/x]]}function bo(t){function e(e){function i(){s.push("M",o(t(c),l))}for(var u,s=[],c=[],f=-1,h=e.length,g=Nt(n),p=Nt(r);++f<h;)a.call(this,u=e[f],f)?c.push([+g.call(this,u,f),+p.call(this,u,f)]):c.length&&(i(),c=[]);return c.length&&i(),s.length?s.join(""):null}var n=En,r=zn,a=Ee,o=wo,i=o.key,l=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e.defined=function(t){return arguments.length?(a=t,e):a},e.interpolate=function(t){return arguments.length?(i="function"==typeof t?o=t:(o=Eu.get(t)||wo).key,e):i},e.tension=function(t){return arguments.length?(l=t,e):l},e}function wo(t){return t.length>1?t.join("L"):t+"Z"}function Mo(t){return t.join("L")+"Z"}function Co(t){for(var e=0,n=t.length,r=t[0],a=[r[0],",",r[1]];++e<n;)a.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&a.push("H",r[0]),a.join("")}function ko(t){for(var e=0,n=t.length,r=t[0],a=[r[0],",",r[1]];++e<n;)a.push("V",(r=t[e])[1],"H",r[0]);return a.join("")}function Ao(t){for(var e=0,n=t.length,r=t[0],a=[r[0],",",r[1]];++e<n;)a.push("H",(r=t[e])[0],"V",r[1]);return a.join("")}function No(t,e){return t.length<4?wo(t):t[1]+Eo(t.slice(1,-1),zo(t,e))}function _o(t,e){return t.length<3?Mo(t):t[0]+Eo((t.push(t[0]),t),zo([t[t.length-2]].concat(t,[t[1]]),e))}function So(t,e){return t.length<3?wo(t):t[0]+Eo(t,zo(t,e))}function Eo(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return wo(t);var n=t.length!=e.length,r="",a=t[0],o=t[1],i=e[0],l=i,u=1;if(n&&(r+="Q"+(o[0]-2*i[0]/3)+","+(o[1]-2*i[1]/3)+","+o[0]+","+o[1],a=t[1],u=2),e.length>1){l=e[1],o=t[u],u++,r+="C"+(a[0]+i[0])+","+(a[1]+i[1])+","+(o[0]-l[0])+","+(o[1]-l[1])+","+o[0]+","+o[1];for(var s=2;s<e.length;s++,u++)o=t[u],l=e[s],r+="S"+(o[0]-l[0])+","+(o[1]-l[1])+","+o[0]+","+o[1]}if(n){var c=t[u];r+="Q"+(o[0]+2*l[0]/3)+","+(o[1]+2*l[1]/3)+","+c[0]+","+c[1]}return r}function zo(t,e){for(var n,r=[],a=(1-e)/2,o=t[0],i=t[1],l=1,u=t.length;++l<u;)n=o,o=i,i=t[l],r.push([a*(i[0]-n[0]),a*(i[1]-n[1])]);return r}function Fo(t){if(t.length<3)return wo(t);var e=1,n=t.length,r=t[0],a=r[0],o=r[1],i=[a,a,a,(r=t[1])[0]],l=[o,o,o,r[1]],u=[a,",",o,"L",Go(Bu,i),",",Go(Bu,l)];for(t.push(t[n-1]);++e<=n;)r=t[e],i.shift(),i.push(r[0]),l.shift(),l.push(r[1]),Lo(u,i,l);return t.pop(),u.push("L",r),u.join("")}function Bo(t){if(t.length<4)return wo(t);for(var e,n=[],r=-1,a=t.length,o=[0],i=[0];++r<3;)e=t[r],o.push(e[0]),i.push(e[1]);for(n.push(Go(Bu,o)+","+Go(Bu,i)),--r;++r<a;)e=t[r],o.shift(),o.push(e[0]),i.shift(),i.push(e[1]),Lo(n,o,i);return n.join("")}function Do(t){for(var e,n,r=-1,a=t.length,o=a+4,i=[],l=[];++r<4;)n=t[r%a],i.push(n[0]),l.push(n[1]);for(e=[Go(Bu,i),",",Go(Bu,l)],--r;++r<o;)n=t[r%a],i.shift(),i.push(n[0]),l.shift(),l.push(n[1]),Lo(e,i,l);return e.join("")}function To(t,e){var n=t.length-1;if(n)for(var r,a,o=t[0][0],i=t[0][1],l=t[n][0]-o,u=t[n][1]-i,s=-1;++s<=n;)r=t[s],a=s/n,r[0]=e*r[0]+(1-e)*(o+a*l),r[1]=e*r[1]+(1-e)*(i+a*u);return Fo(t)}function Go(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Lo(t,e,n){t.push("C",Go(zu,e),",",Go(zu,n),",",Go(Fu,e),",",Go(Fu,n),",",Go(Bu,e),",",Go(Bu,n))}function Po(t,e){return(e[1]-t[1])/(e[0]-t[0])}function qo(t){for(var e=0,n=t.length-1,r=[],a=t[0],o=t[1],i=r[0]=Po(a,o);++e<n;)r[e]=(i+(i=Po(a=o,o=t[e+1])))/2;return r[e]=i,r}function Ro(t){for(var e,n,r,a,o=[],i=qo(t),l=-1,u=t.length-1;++l<u;)e=Po(t[l],t[l+1]),mi(e)<Gi?i[l]=i[l+1]=0:(n=i[l]/e,r=i[l+1]/e,(a=n*n+r*r)>9&&(a=3*e/Math.sqrt(a),i[l]=a*n,i[l+1]=a*r));for(l=-1;++l<=u;)a=(t[Math.min(u,l+1)][0]-t[Math.max(0,l-1)][0])/(6*(1+i[l]*i[l])),o.push([a||0,i[l]*a||0]);return o}function Ho(t){return t.length<3?wo(t):t[0]+Eo(t,Ro(t))}function Uo(t){for(var e,n,r,a=-1,o=t.length;++a<o;)e=t[a],n=e[0],r=e[1]-Hi,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function Vo(t){function e(e){function u(){d.push("M",l(t(y),f),c,s(t(v.reverse()),f),"Z")}
for(var h,g,p,d=[],v=[],y=[],m=-1,x=e.length,b=Nt(n),w=Nt(a),M=n===r?function(){return g}:Nt(r),C=a===o?function(){return p}:Nt(o);++m<x;)i.call(this,h=e[m],m)?(v.push([g=+b.call(this,h,m),p=+w.call(this,h,m)]),y.push([+M.call(this,h,m),+C.call(this,h,m)])):v.length&&(u(),v=[],y=[]);return v.length&&u(),d.length?d.join(""):null}var n=En,r=En,a=0,o=zn,i=Ee,l=wo,u=l.key,s=l,c="L",f=.7;return e.x=function(t){return arguments.length?(n=r=t,e):r},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(a=o=t,e):o},e.y0=function(t){return arguments.length?(a=t,e):a},e.y1=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(i=t,e):i},e.interpolate=function(t){return arguments.length?(u="function"==typeof t?l=t:(l=Eu.get(t)||wo).key,s=l.reverse||l,c=l.closed?"M":"L",e):u},e.tension=function(t){return arguments.length?(f=t,e):f},e}function jo(t){return t.radius}function Oo(t){return[t.x,t.y]}function Io(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-Hi;return[n*Math.cos(r),n*Math.sin(r)]}}function Yo(){return 64}function Zo(){return"circle"}function Wo(t){var e=Math.sqrt(t/Pi);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Xo(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function $o(t,e,n){return Ci(t,Ru),t.namespace=e,t.id=n,t}function Jo(t,e,n,r){var a=t.id,o=t.namespace;return j(t,"function"==typeof n?function(t,i,l){t[o][a].tween.set(e,r(n.call(t,t.__data__,i,l)))}:(n=r(n),function(t){t[o][a].tween.set(e,n)}))}function Ko(t){return null==t&&(t=""),function(){this.textContent=t}}function Qo(t){return null==t?"__transition__":"__transition_"+t+"__"}function ti(t,e,n,r,a){function o(t){var e=d.delay;if(c.t=e+u,e<=t)return i(t-e);c.c=i}function i(n){var a=p.active,o=p[a];o&&(o.timer.c=null,o.timer.t=NaN,--p.count,delete p[a],o.event&&o.event.interrupt.call(t,t.__data__,o.index));for(var i in p)if(+i<r){var s=p[i];s.timer.c=null,s.timer.t=NaN,--p.count,delete p[i]}c.c=l,Ft(function(){return c.c&&l(n||1)&&(c.c=null,c.t=NaN),1},0,u),p.active=r,d.event&&d.event.start.call(t,t.__data__,e),g=[],d.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&g.push(r)}),h=d.ease,f=d.duration}function l(a){for(var o=a/f,i=h(o),l=g.length;l>0;)g[--l].call(t,i);if(o>=1)return d.event&&d.event.end.call(t,t.__data__,e),--p.count?delete p[r]:delete t[n],1}var u,c,f,h,g,p=t[n]||(t[n]={active:0,count:0}),d=p[r];d||(u=a.time,c=Ft(o,0,u),d=p[r]={tween:new s,time:u,timer:c,delay:a.delay,duration:a.duration,ease:a.ease,index:e},a=null,++p.count)}function ei(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function ni(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}function ri(t){return t.toISOString()}function ai(t,e,n){function r(e){return t(e)}function a(t,n){var r=t[1]-t[0],a=r/n,o=ui.bisect(Wu,a);return o==Wu.length?[e.year,Ka(t.map(function(t){return t/31536e6}),n)[2]]:o?e[a/Wu[o-1]<Wu[o]/a?o-1:o]:[Ju,Ka(t,n)[2]]}return r.invert=function(e){return oi(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(oi)},r.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,oi(+n+1),e).length}var o=r.domain(),i=ja(o),l=null==t?a(i,10):"number"==typeof t&&a(i,t);return l&&(t=l[0],e=l[1]),r.domain(Ya(o,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=oi(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=oi(+e+1);return e}}:t))},r.ticks=function(t,e){var n=ja(r.domain()),o=null==t?a(n,10):"number"==typeof t?a(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],oi(+n[1]+1),e<1?1:e)},r.tickFormat=function(){return n},r.copy=function(){return ai(t.copy(),e,n)},$a(r,t)}function oi(t){return new Date(t)}function ii(t){return JSON.parse(t.responseText)}function li(t){var e=fi.createRange();return e.selectNode(fi.body),e.createContextualFragment(t.responseText)}var ui={version:"3.5.17"},si=[].slice,ci=function(t){return si.call(t)},fi=this.document;if(fi)try{ci(fi.documentElement.childNodes)[0].nodeType}catch(t){ci=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),fi)try{fi.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var hi=this.Element.prototype,gi=hi.setAttribute,pi=hi.setAttributeNS,di=this.CSSStyleDeclaration.prototype,vi=di.setProperty;hi.setAttribute=function(t,e){gi.call(this,t,e+"")},hi.setAttributeNS=function(t,e,n){pi.call(this,t,e,n+"")},di.setProperty=function(t,e,n){vi.call(this,t,e+"",n)}}ui.ascending=n,ui.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},ui.min=function(t,e){var n,r,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=t[a])&&r>=r){n=r;break}for(;++a<o;)null!=(r=t[a])&&n>r&&(n=r)}else{for(;++a<o;)if(null!=(r=e.call(t,t[a],a))&&r>=r){n=r;break}for(;++a<o;)null!=(r=e.call(t,t[a],a))&&n>r&&(n=r)}return n},ui.max=function(t,e){var n,r,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=t[a])&&r>=r){n=r;break}for(;++a<o;)null!=(r=t[a])&&r>n&&(n=r)}else{for(;++a<o;)if(null!=(r=e.call(t,t[a],a))&&r>=r){n=r;break}for(;++a<o;)null!=(r=e.call(t,t[a],a))&&r>n&&(n=r)}return n},ui.extent=function(t,e){var n,r,a,o=-1,i=t.length;if(1===arguments.length){for(;++o<i;)if(null!=(r=t[o])&&r>=r){n=a=r;break}for(;++o<i;)null!=(r=t[o])&&(n>r&&(n=r),a<r&&(a=r))}else{for(;++o<i;)if(null!=(r=e.call(t,t[o],o))&&r>=r){n=a=r;break}for(;++o<i;)null!=(r=e.call(t,t[o],o))&&(n>r&&(n=r),a<r&&(a=r))}return[n,a]},ui.sum=function(t,e){var n,r=0,o=t.length,i=-1;if(1===arguments.length)for(;++i<o;)a(n=+t[i])&&(r+=n);else for(;++i<o;)a(n=+e.call(t,t[i],i))&&(r+=n);return r},ui.mean=function(t,e){var n,o=0,i=t.length,l=-1,u=i;if(1===arguments.length)for(;++l<i;)a(n=r(t[l]))?o+=n:--u;else for(;++l<i;)a(n=r(e.call(t,t[l],l)))?o+=n:--u;if(u)return o/u},ui.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),a=+t[r-1],o=n-r;return o?a+o*(t[r]-a):a},ui.median=function(t,e){var o,i=[],l=t.length,u=-1;if(1===arguments.length)for(;++u<l;)a(o=r(t[u]))&&i.push(o);else for(;++u<l;)a(o=r(e.call(t,t[u],u)))&&i.push(o);if(i.length)return ui.quantile(i.sort(n),.5)},ui.variance=function(t,e){var n,o,i=t.length,l=0,u=0,s=-1,c=0;if(1===arguments.length)for(;++s<i;)a(n=r(t[s]))&&(o=n-l,l+=o/++c,u+=o*(n-l));else for(;++s<i;)a(n=r(e.call(t,t[s],s)))&&(o=n-l,l+=o/++c,u+=o*(n-l));if(c>1)return u/(c-1)},ui.deviation=function(){var t=ui.variance.apply(this,arguments);return t?Math.sqrt(t):t};var yi=o(n);ui.bisectLeft=yi.left,ui.bisect=ui.bisectRight=yi.right,ui.bisector=function(t){return o(1===t.length?function(e,r){return n(t(e),r)}:t)},ui.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,o<2&&(e=0));for(var r,a,o=n-e;o;)a=Math.random()*o--|0,r=t[o+e],t[o+e]=t[a+e],t[a+e]=r;return t},ui.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},ui.pairs=function(t){for(var e=0,n=t.length-1,r=t[0],a=new Array(n<0?0:n);e<n;)a[e]=[r,r=t[++e]];return a},ui.transpose=function(t){if(!(a=t.length))return[];for(var e=-1,n=ui.min(t,i),r=new Array(n);++e<n;)for(var a,o=-1,l=r[e]=new Array(a);++o<a;)l[o]=t[o][e];return r},ui.zip=function(){return ui.transpose(arguments)},ui.keys=function(t){var e=[];for(var n in t)e.push(n);return e},ui.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},ui.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},ui.merge=function(t){for(var e,n,r,a=t.length,o=-1,i=0;++o<a;)i+=t[o].length;for(n=new Array(i);--a>=0;)for(r=t[a],e=r.length;--e>=0;)n[--i]=r[e];return n};var mi=Math.abs;ui.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var r,a=[],o=l(mi(n)),i=-1;if(t*=o,e*=o,n*=o,n<0)for(;(r=t+n*++i)>e;)a.push(r/o);else for(;(r=t+n*++i)<e;)a.push(r/o);return a},ui.map=function(t,e){var n=new s;if(t instanceof s)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,a=-1,o=t.length;if(1===arguments.length)for(;++a<o;)n.set(a,t[a]);else for(;++a<o;)n.set(e.call(t,r=t[a],a),r)}else for(var i in t)n.set(i,t[i]);return n};var xi="__proto__",bi="\0";u(s,{has:h,get:function(t){return this._[c(t)]},set:function(t,e){return this._[c(t)]=e},remove:g,keys:p,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:f(e),value:this._[e]});return t},size:d,empty:v,forEach:function(t){for(var e in this._)t.call(this,f(e),this._[e])}}),ui.nest=function(){function t(e,i,l){if(l>=o.length)return r?r.call(a,i):n?i.sort(n):i;for(var u,c,f,h,g=-1,p=i.length,d=o[l++],v=new s;++g<p;)(h=v.get(u=d(c=i[g])))?h.push(c):v.set(u,[c]);return e?(c=e(),f=function(n,r){c.set(n,t(e,r,l))}):(c={},f=function(n,r){c[n]=t(e,r,l)}),v.forEach(f),c}function e(t,n){if(n>=o.length)return t;var r=[],a=i[n++];return t.forEach(function(t,a){r.push({key:t,values:e(a,n)})}),a?r.sort(function(t,e){return a(t.key,e.key)}):r}var n,r,a={},o=[],i=[];return a.map=function(e,n){return t(n,e,0)},a.entries=function(n){return e(t(ui.map,n,0),0)},a.key=function(t){return o.push(t),a},a.sortKeys=function(t){return i[o.length-1]=t,a},a.sortValues=function(t){return n=t,a},a.rollup=function(t){return r=t,a},a},ui.set=function(t){var e=new y;if(t)for(var n=0,r=t.length;n<r;++n)e.add(t[n]);return e},u(y,{has:h,add:function(t){return this._[c(t+="")]=!0,t},remove:g,values:p,size:d,empty:v,forEach:function(t){for(var e in this._)t.call(this,f(e))}}),ui.behavior={},ui.rebind=function(t,e){for(var n,r=1,a=arguments.length;++r<a;)t[n=arguments[r]]=x(t,e,e[n]);return t};var wi=["webkit","ms","moz","Moz","o","O"];ui.dispatch=function(){for(var t=new M,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=C(t);return t},M.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},ui.event=null,ui.requote=function(t){return t.replace(Mi,"\\$&")};var Mi=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Ci={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},ki=function(t,e){return e.querySelector(t)},Ai=function(t,e){return e.querySelectorAll(t)},Ni=function(t,e){var n=t.matches||t[b(t,"matchesSelector")];return(Ni=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(ki=function(t,e){return Sizzle(t,e)[0]||null},Ai=Sizzle,Ni=Sizzle.matchesSelector),ui.selection=function(){return ui.select(fi.documentElement)};var _i=ui.selection.prototype=[];_i.select=function(t){var e,n,r,a,o=[];t=S(t);for(var i=-1,l=this.length;++i<l;){o.push(e=[]),e.parentNode=(r=this[i]).parentNode;for(var u=-1,s=r.length;++u<s;)(a=r[u])?(e.push(n=t.call(a,a.__data__,u,i)),n&&"__data__"in a&&(n.__data__=a.__data__)):e.push(null)}return _(o)},_i.selectAll=function(t){var e,n,r=[];t=E(t);for(var a=-1,o=this.length;++a<o;)for(var i=this[a],l=-1,u=i.length;++l<u;)(n=i[l])&&(r.push(e=ci(t.call(n,n.__data__,l,a))),e.parentNode=n);return _(r)};var Si="http://www.w3.org/1999/xhtml",Ei={svg:"http://www.w3.org/2000/svg",xhtml:Si,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ui.ns={prefix:Ei,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Ei.hasOwnProperty(n)?{space:Ei[n],local:t}:t}},_i.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=ui.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(z(e,t[e]));return this}return this.each(z(t,e))},_i.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=D(t)).length,a=-1;if(e=n.classList){for(;++a<r;)if(!e.contains(t[a]))return!1}else for(e=n.getAttribute("class");++a<r;)if(!B(t[a]).test(e))return!1;return!0}for(e in t)this.each(T(e,t[e]));return this}return this.each(T(t,e))},_i.style=function(t,n,r){var a=arguments.length;if(a<3){if("string"!=typeof t){a<2&&(n="");for(r in t)this.each(L(r,t[r],n));return this}if(a<2){var o=this.node();return e(o).getComputedStyle(o,null).getPropertyValue(t)}r=""}return this.each(L(t,n,r))},_i.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(P(e,t[e]));return this}return this.each(P(t,e))},_i.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},_i.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},_i.append=function(t){return t=q(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},_i.insert=function(t,e){return t=q(t),e=S(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},_i.remove=function(){return this.each(R)},_i.data=function(t,e){function n(t,n){var r,a,o,i=t.length,f=n.length,h=Math.min(i,f),g=new Array(f),p=new Array(f),d=new Array(i);if(e){var v,y=new s,m=new Array(i);for(r=-1;++r<i;)(a=t[r])&&(y.has(v=e.call(a,a.__data__,r))?d[r]=a:y.set(v,a),m[r]=v);for(r=-1;++r<f;)(a=y.get(v=e.call(n,o=n[r],r)))?!0!==a&&(g[r]=a,a.__data__=o):p[r]=H(o),y.set(v,!0);for(r=-1;++r<i;)r in m&&!0!==y.get(m[r])&&(d[r]=t[r])}else{for(r=-1;++r<h;)a=t[r],o=n[r],a?(a.__data__=o,g[r]=a):p[r]=H(o);for(;r<f;++r)p[r]=H(n[r]);for(;r<i;++r)d[r]=t[r]}p.update=g,p.parentNode=g.parentNode=d.parentNode=t.parentNode,l.push(p),u.push(g),c.push(d)}var r,a,o=-1,i=this.length;if(!arguments.length){for(t=new Array(i=(r=this[0]).length);++o<i;)(a=r[o])&&(t[o]=a.__data__);return t}var l=O([]),u=_([]),c=_([]);if("function"==typeof t)for(;++o<i;)n(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<i;)n(r=this[o],t);return u.enter=function(){return l},u.exit=function(){return c},u},_i.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},_i.filter=function(t){var e,n,r,a=[];"function"!=typeof t&&(t=U(t));for(var o=0,i=this.length;o<i;o++){a.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var l=0,u=n.length;l<u;l++)(r=n[l])&&t.call(r,r.__data__,l,o)&&e.push(r)}return _(a)},_i.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],a=r.length-1,o=r[a];--a>=0;)(n=r[a])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},_i.sort=function(t){t=V.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},_i.each=function(t){return j(this,function(e,n,r){t.call(e,e.__data__,n,r)})},_i.call=function(t){var e=ci(arguments);return t.apply(e[0]=this,e),this},_i.empty=function(){return!this.node()},_i.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],r=0,a=n.length;r<a;r++){var o=n[r];if(o)return o}return null},_i.size=function(){var t=0;return j(this,function(){++t}),t};var zi=[];ui.selection.enter=O,ui.selection.enter.prototype=zi,zi.append=_i.append,zi.empty=_i.empty,zi.node=_i.node,zi.call=_i.call,zi.size=_i.size,zi.select=function(t){for(var e,n,r,a,o,i=[],l=-1,u=this.length;++l<u;){r=(a=this[l]).update,i.push(e=[]),e.parentNode=a.parentNode;for(var s=-1,c=a.length;++s<c;)(o=a[s])?(e.push(r[s]=n=t.call(a.parentNode,o.__data__,s,l)),n.__data__=o.__data__):e.push(null)}return _(i)},zi.insert=function(t,e){return arguments.length<2&&(e=I(this)),_i.insert.call(this,t,e)},ui.select=function(e){var n;return"string"==typeof e?(n=[ki(e,fi)],n.parentNode=fi.documentElement):(n=[e],n.parentNode=t(e)),_([n])},ui.selectAll=function(t){var e;return"string"==typeof t?(e=ci(Ai(t,fi)),e.parentNode=fi.documentElement):(e=ci(t),e.parentNode=null),_([e])},_i.on=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){r<2&&(e=!1);for(n in t)this.each(Y(n,t[n],e));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(Y(t,e,n))};var Fi=ui.map({mouseenter:"mouseover",mouseleave:"mouseout"});fi&&Fi.forEach(function(t){"on"+t in fi&&Fi.remove(t)});var Bi,Di=0;ui.mouse=function(t){return $(t,A())};var Ti=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ui.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=A().changedTouches),e)for(var r,a=0,o=e.length;a<o;++a)if((r=e[a]).identifier===n)return $(t,r)},ui.behavior.drag=function(){function t(){this.on("mousedown.drag",o).on("touchstart.drag",i)}function n(t,e,n,o,i){return function(){function l(){var t,n,r=e(h,d);r&&(t=r[0]-x[0],n=r[1]-x[1],p|=t|n,x=r,g({type:"drag",x:r[0]+s[0],y:r[1]+s[1],dx:t,dy:n}))}function u(){e(h,d)&&(y.on(o+v,null).on(i+v,null),m(p),g({type:"dragend"}))}var s,c=this,f=ui.event.target.correspondingElement||ui.event.target,h=c.parentNode,g=r.of(c,arguments),p=0,d=t(),v=".drag"+(null==d?"":"-"+d),y=ui.select(n(f)).on(o+v,l).on(i+v,u),m=X(f),x=e(h,d);a?(s=a.apply(c,arguments),s=[s.x-x[0],s.y-x[1]]):s=[0,0],g({type:"dragstart"})}}var r=N(t,"drag","dragstart","dragend"),a=null,o=n(w,ui.mouse,e,"mousemove","mouseup"),i=n(J,ui.touch,m,"touchmove","touchend");return t.origin=function(e){return arguments.length?(a=e,t):a},ui.rebind(t,r,"on")},ui.touches=function(t,e){return arguments.length<2&&(e=A().touches),e?ci(e).map(function(e){var n=$(t,e);return n.identifier=e.identifier,n}):[]};var Gi=1e-6,Li=Gi*Gi,Pi=Math.PI,qi=2*Pi,Ri=qi-Gi,Hi=Pi/2,Ui=Pi/180,Vi=180/Pi,ji=Math.SQRT2;ui.interpolateZoom=function(t,e){var n,r,a=t[0],o=t[1],i=t[2],l=e[0],u=e[1],s=e[2],c=l-a,f=u-o,h=c*c+f*f;if(h<Li)r=Math.log(s/i)/ji,n=function(t){return[a+t*c,o+t*f,i*Math.exp(ji*t*r)]};else{var g=Math.sqrt(h),p=(s*s-i*i+4*h)/(2*i*2*g),d=(s*s-i*i-4*h)/(2*s*2*g),v=Math.log(Math.sqrt(p*p+1)-p),y=Math.log(Math.sqrt(d*d+1)-d);r=(y-v)/ji,n=function(t){var e=t*r,n=rt(v),l=i/(2*g)*(n*at(ji*e+v)-nt(v));return[a+l*c,o+l*f,i*n/rt(ji*e+v)]}}return n.duration=1e3*r,n},ui.behavior.zoom=function(){function t(t){t.on(F,f).on(Ii+".zoom",g).on("dblclick.zoom",p).on(T,h)}function n(t){return[(t[0]-A.x)/A.k,(t[1]-A.y)/A.k]}function r(t){return[t[0]*A.k+A.x,t[1]*A.k+A.y]}function a(t){A.k=Math.max(S[0],Math.min(S[1],t))}function o(t,e){e=r(e),A.x+=t[0]-e[0],A.y+=t[1]-e[1]}function i(e,n,r,i){e.__chart__={x:A.x,y:A.y,k:A.k},a(Math.pow(2,i)),o(v=n,r),e=ui.select(e),E>0&&(e=e.transition().duration(E)),e.call(t.event)}function l(){w&&w.domain(b.range().map(function(t){return(t-A.x)/A.k}).map(b.invert)),C&&C.domain(M.range().map(function(t){return(t-A.y)/A.k}).map(M.invert))}function u(t){z++||t({type:"zoomstart"})}function s(t){l(),t({type:"zoom",scale:A.k,translate:[A.x,A.y]})}function c(t){--z||(t({type:"zoomend"}),v=null)}function f(){function t(){l=1,o(ui.mouse(a),h),s(i)}function r(){f.on(B,null).on(D,null),g(l),c(i)}var a=this,i=G.of(a,arguments),l=0,f=ui.select(e(a)).on(B,t).on(D,r),h=n(ui.mouse(a)),g=X(a);qu.call(a),u(i)}function h(){function t(){var t=ui.touches(p);return g=A.k,t.forEach(function(t){t.identifier in v&&(v[t.identifier]=n(t))}),t}function e(){var e=ui.event.target;ui.select(e).on(b,r).on(w,l),M.push(e);for(var n=ui.event.changedTouches,a=0,o=n.length;a<o;++a)v[n[a].identifier]=null;var u=t(),s=Date.now();if(1===u.length){if(s-x<500){var c=u[0];i(p,c,v[c.identifier],Math.floor(Math.log(A.k)/Math.LN2)+1),k()}x=s}else if(u.length>1){var c=u[0],f=u[1],h=c[0]-f[0],g=c[1]-f[1];y=h*h+g*g}}function r(){var t,e,n,r,i=ui.touches(p);qu.call(p);for(var l=0,u=i.length;l<u;++l,r=null)if(n=i[l],r=v[n.identifier]){if(e)break;t=n,e=r}if(r){var c=(c=n[0]-t[0])*c+(c=n[1]-t[1])*c,f=y&&Math.sqrt(c/y);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+r[0])/2,(e[1]+r[1])/2],a(f*g)}x=null,o(t,e),s(d)}function l(){if(ui.event.touches.length){for(var e=ui.event.changedTouches,n=0,r=e.length;n<r;++n)delete v[e[n].identifier];for(var a in v)return void t()}ui.selectAll(M).on(m,null),C.on(F,f).on(T,h),N(),c(d)}var g,p=this,d=G.of(p,arguments),v={},y=0,m=".zoom-"+ui.event.changedTouches[0].identifier,b="touchmove"+m,w="touchend"+m,M=[],C=ui.select(p),N=X(p);e(),u(d),C.on(F,null).on(T,e)}function g(){var t=G.of(this,arguments);m?clearTimeout(m):(qu.call(this),d=n(v=y||ui.mouse(this)),u(t)),m=setTimeout(function(){m=null,c(t)},50),k(),a(Math.pow(2,.002*Oi())*A.k),o(v,d),s(t)}function p(){var t=ui.mouse(this),e=Math.log(A.k)/Math.LN2;i(this,t,n(t),ui.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var d,v,y,m,x,b,w,M,C,A={x:0,y:0,k:1},_=[960,500],S=Yi,E=250,z=0,F="mousedown.zoom",B="mousemove.zoom",D="mouseup.zoom",T="touchstart.zoom",G=N(t,"zoomstart","zoom","zoomend");return Ii||(Ii="onwheel"in fi?(Oi=function(){return-ui.event.deltaY*(ui.event.deltaMode?120:1)},"wheel"):"onmousewheel"in fi?(Oi=function(){return ui.event.wheelDelta},"mousewheel"):(Oi=function(){return-ui.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=G.of(this,arguments),e=A;Lu?ui.select(this).transition().each("start.zoom",function(){A=this.__chart__||{x:0,y:0,k:1},u(t)}).tween("zoom:zoom",function(){var n=_[0],r=_[1],a=v?v[0]:n/2,o=v?v[1]:r/2,i=ui.interpolateZoom([(a-A.x)/A.k,(o-A.y)/A.k,n/A.k],[(a-e.x)/e.k,(o-e.y)/e.k,n/e.k]);return function(e){var r=i(e),l=n/r[2];this.__chart__=A={x:a-r[0]*l,y:o-r[1]*l,k:l},s(t)}}).each("interrupt.zoom",function(){c(t)}).each("end.zoom",function(){c(t)}):(this.__chart__=A,u(t),s(t),c(t))})},t.translate=function(e){return arguments.length?(A={x:+e[0],y:+e[1],k:A.k},l(),t):[A.x,A.y]},t.scale=function(e){return arguments.length?(A={x:A.x,y:A.y,k:null},a(+e),l(),t):A.k},t.scaleExtent=function(e){return arguments.length?(S=null==e?Yi:[+e[0],+e[1]],t):S},t.center=function(e){return arguments.length?(y=e&&[+e[0],+e[1]],t):y},t.size=function(e){return arguments.length?(_=e&&[+e[0],+e[1]],t):_},t.duration=function(e){return arguments.length?(E=+e,t):E},t.x=function(e){return arguments.length?(w=e,b=e.copy(),A={x:0,y:0,k:1},t):w},t.y=function(e){return arguments.length?(C=e,M=e.copy(),A={x:0,y:0,k:1},t):C},ui.rebind(t,G,"on")};var Oi,Ii,Yi=[0,1/0];ui.color=it,it.prototype.toString=function(){return this.rgb()+""},ui.hsl=lt;var Zi=lt.prototype=new it;Zi.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new lt(this.h,this.s,this.l/t)},Zi.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new lt(this.h,this.s,t*this.l)},Zi.rgb=function(){return ut(this.h,this.s,this.l)},ui.hcl=st;var Wi=st.prototype=new it;Wi.brighter=function(t){return new st(this.h,this.c,Math.min(100,this.l+Xi*(arguments.length?t:1)))},Wi.darker=function(t){return new st(this.h,this.c,Math.max(0,this.l-Xi*(arguments.length?t:1)))},Wi.rgb=function(){return ct(this.h,this.c,this.l).rgb()},ui.lab=ft;var Xi=18,$i=.95047,Ji=1,Ki=1.08883,Qi=ft.prototype=new it;Qi.brighter=function(t){return new ft(Math.min(100,this.l+Xi*(arguments.length?t:1)),this.a,this.b)},Qi.darker=function(t){return new ft(Math.max(0,this.l-Xi*(arguments.length?t:1)),this.a,this.b)},Qi.rgb=function(){return ht(this.l,this.a,this.b)},ui.rgb=yt;var tl=yt.prototype=new it;tl.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,a=30;return e||n||r?(e&&e<a&&(e=a),n&&n<a&&(n=a),r&&r<a&&(r=a),new yt(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new yt(a,a,a)},tl.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new yt(t*this.r,t*this.g,t*this.b)},tl.hsl=function(){return Mt(this.r,this.g,this.b)},tl.toString=function(){return"#"+bt(this.r)+bt(this.g)+bt(this.b)};var el=ui.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});el.forEach(function(t,e){el.set(t,mt(e))}),ui.functor=Nt,ui.xhr=_t(m),ui.dsv=function(t,e){function n(t,n,o){arguments.length<3&&(o=n,n=null);var i=St(t,e,null==n?r:a(n),o);return i.row=function(t){return arguments.length?i.response(null==(n=t)?r:a(t)):n},i}function r(t){return n.parse(t.responseText)}function a(t){return function(e){return n.parse(e.responseText,t)}}function o(e){return e.map(i).join(t)}function i(t){return l.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var l=new RegExp('["'+t+"\n]"),u=t.charCodeAt(0);return n.parse=function(t,e){var r;return n.parseRows(t,function(t,n){if(r)return r(t,n-1);var a=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=e?function(t,n){return e(a(t),n)}:a})},n.parseRows=function(t,e){function n(){if(c>=s)return i;if(a)return a=!1,o;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<s;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}c=n+2;var r=t.charCodeAt(n+1);return 13===r?(a=!0,10===t.charCodeAt(n+2)&&++c):10===r&&(a=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;c<s;){var r=t.charCodeAt(c++),l=1;if(10===r)a=!0;else if(13===r)a=!0,10===t.charCodeAt(c)&&(++c,++l);else if(r!==u)continue;return t.slice(e,c-l)}return t.slice(e)}for(var r,a,o={},i={},l=[],s=t.length,c=0,f=0;(r=n())!==i;){for(var h=[];r!==o&&r!==i;)h.push(r),r=n();e&&null==(h=e(h,f++))||l.push(h)}return l},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var r=new y,a=[];return e.forEach(function(t){for(var e in t)r.has(e)||a.push(r.add(e))}),[a.map(i).join(t)].concat(e.map(function(e){return a.map(function(t){return i(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(o).join("\n")},n},ui.csv=ui.dsv(",","text/csv"),ui.tsv=ui.dsv("\t","text/tab-separated-values");var nl,rl,al,ol,il=this[b(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};ui.timer=function(){Ft.apply(this,arguments)},ui.timer.flush=function(){Dt(),Tt()},ui.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var ll=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Lt);ui.formatPrefix=function(t,e){var n=0;return(t=+t)&&(t<0&&(t*=-1),e&&(t=ui.round(t,Gt(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),ll[8+n/3]};var ul=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,sl=ui.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=ui.round(t,Gt(t,e))).toFixed(Math.max(0,Math.min(20,Gt(t*(1+1e-15),e))))}}),cl=ui.time={},fl=Date;Rt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){hl.setUTCDate.apply(this._,arguments)},setDay:function(){hl.setUTCDay.apply(this._,arguments)},setFullYear:function(){hl.setUTCFullYear.apply(this._,arguments)},setHours:function(){hl.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){hl.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){hl.setUTCMinutes.apply(this._,arguments)},setMonth:function(){hl.setUTCMonth.apply(this._,arguments)},setSeconds:function(){hl.setUTCSeconds.apply(this._,arguments)},setTime:function(){hl.setTime.apply(this._,arguments)}};var hl=Date.prototype;cl.year=Ht(function(t){return t=cl.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),cl.years=cl.year.range,cl.years.utc=cl.year.utc.range,cl.day=Ht(function(t){var e=new fl(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),cl.days=cl.day.range,cl.days.utc=cl.day.utc.range,cl.dayOfYear=function(t){var e=cl.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=cl[t]=Ht(function(t){return(t=cl.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=cl.year(t).getDay();return Math.floor((cl.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});cl[t+"s"]=n.range,cl[t+"s"].utc=n.utc.range,cl[t+"OfYear"]=function(t){var n=cl.year(t).getDay();return Math.floor((cl.dayOfYear(t)+(n+e)%7)/7)}}),cl.week=cl.sunday,cl.weeks=cl.sunday.range,cl.weeks.utc=cl.sunday.utc.range,cl.weekOfYear=cl.sundayOfYear;var gl={"-":"",_:" ",0:"0"},pl=/^\s*\d+/,dl=/^%/;ui.locale=function(t){return{numberFormat:Pt(t),timeFormat:Vt(t)}};var vl=ui.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",
time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ui.format=vl.numberFormat,ui.geo={},se.prototype={s:0,t:0,add:function(t){ce(t,this.t,yl),ce(yl.s,this.s,this),this.s?this.t+=yl.t:this.s=yl.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var yl=new se;ui.geo.stream=function(t,e){t&&ml.hasOwnProperty(t.type)?ml[t.type](t,e):fe(t,e)};var ml={Feature:function(t,e){fe(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,a=n.length;++r<a;)fe(n[r].geometry,e)}},xl={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){he(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)he(n[r],e,0)},Polygon:function(t,e){ge(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)ge(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,a=n.length;++r<a;)fe(n[r],e)}};ui.geo.area=function(t){return bl=0,ui.geo.stream(t,Ml),bl};var bl,wl=new se,Ml={sphere:function(){bl+=4*Pi},point:w,lineStart:w,lineEnd:w,polygonStart:function(){wl.reset(),Ml.lineStart=pe},polygonEnd:function(){var t=2*wl;bl+=t<0?4*Pi+t:t,Ml.lineStart=Ml.lineEnd=Ml.point=w}};ui.geo.bounds=function(){function t(t,e){x.push(b=[c=t,h=t]),e<f&&(f=e),e>g&&(g=e)}function e(e,n){var r=de([e*Ui,n*Ui]);if(y){var a=ye(y,r),o=[a[1],-a[0],0],i=ye(o,a);be(i),i=we(i);var u=e-p,s=u>0?1:-1,d=i[0]*Vi*s,v=mi(u)>180;if(v^(s*p<d&&d<s*e)){var m=i[1]*Vi;m>g&&(g=m)}else if(d=(d+360)%360-180,v^(s*p<d&&d<s*e)){var m=-i[1]*Vi;m<f&&(f=m)}else n<f&&(f=n),n>g&&(g=n);v?e<p?l(c,e)>l(c,h)&&(h=e):l(e,h)>l(c,h)&&(c=e):h>=c?(e<c&&(c=e),e>h&&(h=e)):e>p?l(c,e)>l(c,h)&&(h=e):l(e,h)>l(c,h)&&(c=e)}else t(e,n);y=r,p=e}function n(){w.point=e}function r(){b[0]=c,b[1]=h,w.point=t,y=null}function a(t,n){if(y){var r=t-p;m+=mi(r)>180?r+(r>0?360:-360):r}else d=t,v=n;Ml.point(t,n),e(t,n)}function o(){Ml.lineStart()}function i(){a(d,v),Ml.lineEnd(),mi(m)>Gi&&(c=-(h=180)),b[0]=c,b[1]=h,y=null}function l(t,e){return(e-=t)<0?e+360:e}function u(t,e){return t[0]-e[0]}function s(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,f,h,g,p,d,v,y,m,x,b,w={point:t,lineStart:n,lineEnd:r,polygonStart:function(){w.point=a,w.lineStart=o,w.lineEnd=i,m=0,Ml.polygonStart()},polygonEnd:function(){Ml.polygonEnd(),w.point=t,w.lineStart=n,w.lineEnd=r,wl<0?(c=-(h=180),f=-(g=90)):m>Gi?g=90:m<-Gi&&(f=-90),b[0]=c,b[1]=h}};return function(t){g=h=-(c=f=1/0),x=[],ui.geo.stream(t,w);var e=x.length;if(e){x.sort(u);for(var n,r=1,a=x[0],o=[a];r<e;++r)n=x[r],s(n[0],a)||s(n[1],a)?(l(a[0],n[1])>l(a[0],a[1])&&(a[1]=n[1]),l(n[0],a[1])>l(a[0],a[1])&&(a[0]=n[0])):o.push(a=n);for(var i,n,p=-1/0,e=o.length-1,r=0,a=o[e];r<=e;a=n,++r)n=o[r],(i=l(a[1],n[0]))>p&&(p=i,c=n[0],h=a[1])}return x=b=null,c===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,f],[h,g]]}}(),ui.geo.centroid=function(t){Cl=kl=Al=Nl=_l=Sl=El=zl=Fl=Bl=Dl=0,ui.geo.stream(t,Tl);var e=Fl,n=Bl,r=Dl,a=e*e+n*n+r*r;return a<Li&&(e=Sl,n=El,r=zl,kl<Gi&&(e=Al,n=Nl,r=_l),(a=e*e+n*n+r*r)<Li)?[NaN,NaN]:[Math.atan2(n,e)*Vi,et(r/Math.sqrt(a))*Vi]};var Cl,kl,Al,Nl,_l,Sl,El,zl,Fl,Bl,Dl,Tl={sphere:w,point:Ce,lineStart:Ae,lineEnd:Ne,polygonStart:function(){Tl.lineStart=_e},polygonEnd:function(){Tl.lineStart=Ae}},Gl=De(Ee,Pe,Re,[-Pi,-Pi/2]),Ll=1e9;ui.geo.clipExtent=function(){var t,e,n,r,a,o,i={stream:function(t){return a&&(a.valid=!1),a=o(t),a.valid=!0,a},extent:function(l){return arguments.length?(o=je(t=+l[0][0],e=+l[0][1],n=+l[1][0],r=+l[1][1]),a&&(a.valid=!1,a=null),i):[[t,e],[n,r]]}};return i.extent([[0,0],[960,500]])},(ui.geo.conicEqualArea=function(){return Oe(Ie)}).raw=Ie,ui.geo.albers=function(){return ui.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ui.geo.albersUsa=function(){function t(t){var o=t[0],i=t[1];return e=null,n(o,i),e||(r(o,i),e)||a(o,i),e}var e,n,r,a,o=ui.geo.albers(),i=ui.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=ui.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,a=(t[1]-n[1])/e;return(a>=.12&&a<.234&&r>=-.425&&r<-.214?i:a>=.166&&a<.234&&r>=-.214&&r<-.115?l:o).invert(t)},t.stream=function(t){var e=o.stream(t),n=i.stream(t),r=l.stream(t);return{point:function(t,a){e.point(t,a),n.point(t,a),r.point(t,a)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},t.precision=function(e){return arguments.length?(o.precision(e),i.precision(e),l.precision(e),t):o.precision()},t.scale=function(e){return arguments.length?(o.scale(e),i.scale(.35*e),l.scale(e),t.translate(o.translate())):o.scale()},t.translate=function(e){if(!arguments.length)return o.translate();var s=o.scale(),c=+e[0],f=+e[1];return n=o.translate(e).clipExtent([[c-.455*s,f-.238*s],[c+.455*s,f+.238*s]]).stream(u).point,r=i.translate([c-.307*s,f+.201*s]).clipExtent([[c-.425*s+Gi,f+.12*s+Gi],[c-.214*s-Gi,f+.234*s-Gi]]).stream(u).point,a=l.translate([c-.205*s,f+.212*s]).clipExtent([[c-.214*s+Gi,f+.166*s+Gi],[c-.115*s-Gi,f+.234*s-Gi]]).stream(u).point,t},t.scale(1070)};var Pl,ql,Rl,Hl,Ul,Vl,jl={point:w,lineStart:w,lineEnd:w,polygonStart:function(){ql=0,jl.lineStart=Ye},polygonEnd:function(){jl.lineStart=jl.lineEnd=jl.point=w,Pl+=mi(ql/2)}},Ol={point:Ze,lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},Il={point:$e,lineStart:Je,lineEnd:Ke,polygonStart:function(){Il.lineStart=Qe},polygonEnd:function(){Il.point=$e,Il.lineStart=Je,Il.lineEnd=Ke}};ui.geo.path=function(){function t(t){return t&&("function"==typeof l&&o.pointRadius(+l.apply(this,arguments)),i&&i.valid||(i=a(o)),ui.geo.stream(t,i)),o.result()}function e(){return i=null,t}var n,r,a,o,i,l=4.5;return t.area=function(t){return Pl=0,ui.geo.stream(t,a(jl)),Pl},t.centroid=function(t){return Al=Nl=_l=Sl=El=zl=Fl=Bl=Dl=0,ui.geo.stream(t,a(Il)),Dl?[Fl/Dl,Bl/Dl]:zl?[Sl/zl,El/zl]:_l?[Al/_l,Nl/_l]:[NaN,NaN]},t.bounds=function(t){return Ul=Vl=-(Rl=Hl=1/0),ui.geo.stream(t,a(Ol)),[[Rl,Hl],[Ul,Vl]]},t.projection=function(t){return arguments.length?(a=(n=t)?t.stream||nn(t):m,e()):n},t.context=function(t){return arguments.length?(o=null==(r=t)?new We:new tn(t),"function"!=typeof l&&o.pointRadius(l),e()):r},t.pointRadius=function(e){return arguments.length?(l="function"==typeof e?e:(o.pointRadius(+e),+e),t):l},t.projection(ui.geo.albersUsa()).context(null)},ui.geo.transform=function(t){return{stream:function(e){var n=new rn(e);for(var r in t)n[r]=t[r];return n}}},rn.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ui.geo.projection=on,ui.geo.projectionMutator=ln,(ui.geo.equirectangular=function(){return on(sn)}).raw=sn.invert=sn,ui.geo.rotation=function(t){function e(e){return e=t(e[0]*Ui,e[1]*Ui),e[0]*=Vi,e[1]*=Vi,e}return t=fn(t[0]%360*Ui,t[1]*Ui,t.length>2?t[2]*Ui:0),e.invert=function(e){return e=t.invert(e[0]*Ui,e[1]*Ui),e[0]*=Vi,e[1]*=Vi,e},e},cn.invert=sn,ui.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,e=fn(-t[0]*Ui,-t[1]*Ui,0).invert,a=[];return n(null,null,1,{point:function(t,n){a.push(t=e(t,n)),t[0]*=Vi,t[1]*=Vi}}),{type:"Polygon",coordinates:[a]}}var e,n,r=[0,0],a=6;return t.origin=function(e){return arguments.length?(r=e,t):r},t.angle=function(r){return arguments.length?(n=dn((e=+r)*Ui,a*Ui),t):e},t.precision=function(r){return arguments.length?(n=dn(e*Ui,(a=+r)*Ui),t):a},t.angle(90)},ui.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Ui,a=t[1]*Ui,o=e[1]*Ui,i=Math.sin(r),l=Math.cos(r),u=Math.sin(a),s=Math.cos(a),c=Math.sin(o),f=Math.cos(o);return Math.atan2(Math.sqrt((n=f*i)*n+(n=s*c-u*f*l)*n),u*c+s*f*l)},ui.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return ui.range(Math.ceil(o/v)*v,a,v).map(h).concat(ui.range(Math.ceil(s/y)*y,u,y).map(g)).concat(ui.range(Math.ceil(r/p)*p,n,p).filter(function(t){return mi(t%v)>Gi}).map(c)).concat(ui.range(Math.ceil(l/d)*d,i,d).filter(function(t){return mi(t%y)>Gi}).map(f))}var n,r,a,o,i,l,u,s,c,f,h,g,p=10,d=p,v=90,y=360,m=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[h(o).concat(g(u).slice(1),h(a).reverse().slice(1),g(s).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(o=+e[0][0],a=+e[1][0],s=+e[0][1],u=+e[1][1],o>a&&(e=o,o=a,a=e),s>u&&(e=s,s=u,u=e),t.precision(m)):[[o,s],[a,u]]},t.minorExtent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],l=+e[0][1],i=+e[1][1],r>n&&(e=r,r=n,n=e),l>i&&(e=l,l=i,i=e),t.precision(m)):[[r,l],[n,i]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(v=+e[0],y=+e[1],t):[v,y]},t.minorStep=function(e){return arguments.length?(p=+e[0],d=+e[1],t):[p,d]},t.precision=function(e){return arguments.length?(m=+e,c=yn(l,i,90),f=mn(r,n,m),h=yn(s,u,90),g=mn(o,a,m),t):m},t.majorExtent([[-180,-90+Gi],[180,90-Gi]]).minorExtent([[-180,-80-Gi],[180,80+Gi]])},ui.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||a.apply(this,arguments)]}}var e,n,r=xn,a=bn;return t.distance=function(){return ui.geo.distance(e||r.apply(this,arguments),n||a.apply(this,arguments))},t.source=function(n){return arguments.length?(r=n,e="function"==typeof n?null:n,t):r},t.target=function(e){return arguments.length?(a=e,n="function"==typeof e?null:e,t):a},t.precision=function(){return arguments.length?t:0},t},ui.geo.interpolate=function(t,e){return wn(t[0]*Ui,t[1]*Ui,e[0]*Ui,e[1]*Ui)},ui.geo.length=function(t){return Yl=0,ui.geo.stream(t,Zl),Yl};var Yl,Zl={sphere:w,point:w,lineStart:Mn,lineEnd:w,polygonStart:w,polygonEnd:w},Wl=Cn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(ui.geo.azimuthalEqualArea=function(){return on(Wl)}).raw=Wl;var Xl=Cn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},m);(ui.geo.azimuthalEquidistant=function(){return on(Xl)}).raw=Xl,(ui.geo.conicConformal=function(){return Oe(kn)}).raw=kn,(ui.geo.conicEquidistant=function(){return Oe(An)}).raw=An;var $l=Cn(function(t){return 1/t},Math.atan);(ui.geo.gnomonic=function(){return on($l)}).raw=$l,Nn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Hi]},(ui.geo.mercator=function(){return _n(Nn)}).raw=Nn;var Jl=Cn(function(){return 1},Math.asin);(ui.geo.orthographic=function(){return on(Jl)}).raw=Jl;var Kl=Cn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(ui.geo.stereographic=function(){return on(Kl)}).raw=Kl,Sn.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Hi]},(ui.geo.transverseMercator=function(){var t=_n(Sn),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90])}).raw=Sn,ui.geom={},ui.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,a=Nt(n),o=Nt(r),i=t.length,l=[],u=[];for(e=0;e<i;e++)l.push([+a.call(this,t[e],e),+o.call(this,t[e],e),e]);for(l.sort(Bn),e=0;e<i;e++)u.push([l[e][0],-l[e][1]]);var s=Fn(l),c=Fn(u),f=c[0]===s[0],h=c[c.length-1]===s[s.length-1],g=[];for(e=s.length-1;e>=0;--e)g.push(t[l[s[e]][2]]);for(e=+f;e<c.length-h;++e)g.push(t[l[c[e]][2]]);return g}var n=En,r=zn;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e)},ui.geom.polygon=function(t){return Ci(t,Ql),t};var Ql=ui.geom.polygon.prototype=[];Ql.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],a=0;++e<n;)t=r,r=this[e],a+=t[1]*r[0]-t[0]*r[1];return.5*a},Ql.centroid=function(t){var e,n,r=-1,a=this.length,o=0,i=0,l=this[a-1];for(arguments.length||(t=-1/(6*this.area()));++r<a;)e=l,l=this[r],n=e[0]*l[1]-l[0]*e[1],o+=(e[0]+l[0])*n,i+=(e[1]+l[1])*n;return[o*t,i*t]},Ql.clip=function(t){for(var e,n,r,a,o,i,l=Gn(t),u=-1,s=this.length-Gn(this),c=this[s-1];++u<s;){for(e=t.slice(),t.length=0,a=this[u],o=e[(r=e.length-l)-1],n=-1;++n<r;)i=e[n],Dn(i,c,a)?(Dn(o,c,a)||t.push(Tn(o,i,c,a)),t.push(i)):Dn(o,c,a)&&t.push(Tn(o,i,c,a)),o=i;l&&t.push(t[0]),c=a}return t};var tu,eu,nu,ru,au,ou=[],iu=[];jn.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(In),e.length},er.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},nr.prototype={insert:function(t,e){var n,r,a;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=ir(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(a=r.R,a&&a.C?(n.C=a.C=!1,r.C=!0,t=r):(t===n.R&&(ar(this,n),t=n,n=t.U),n.C=!1,r.C=!0,or(this,r))):(a=r.L,a&&a.C?(n.C=a.C=!1,r.C=!0,t=r):(t===n.L&&(or(this,n),t=n,n=t.U),n.C=!1,r.C=!0,ar(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,a=t.U,o=t.L,i=t.R;if(n=o?i?ir(i):o:i,a?a.L===t?a.L=n:a.R=n:this._=n,o&&i?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==i?(a=n.U,n.U=t.U,t=n.R,a.L=t,n.R=i,i.U=n):(n.U=a,a=n,t=n.R)):(r=t.C,t=n),t&&(t.U=a),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===a.L){if(e=a.R,e.C&&(e.C=!1,a.C=!0,ar(this,a),e=a.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,or(this,e),e=a.R),e.C=a.C,a.C=e.R.C=!1,ar(this,a),t=this._;break}}else if(e=a.L,e.C&&(e.C=!1,a.C=!0,or(this,a),e=a.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ar(this,e),e=a.L),e.C=a.C,a.C=e.L.C=!1,or(this,a),t=this._;break}e.C=!0,t=a,a=a.U}while(!t.C);t&&(t.C=!1)}}},ui.geom.voronoi=function(t){function e(t){var e=new Array(t.length),r=l[0][0],a=l[0][1],o=l[1][0],i=l[1][1];return lr(n(t),l).cells.forEach(function(n,l){var u=n.edges,s=n.site;(e[l]=u.length?u.map(function(t){var e=t.start();return[e.x,e.y]}):s.x>=r&&s.x<=o&&s.y>=a&&s.y<=i?[[r,i],[o,i],[o,a],[r,a]]:[]).point=t[l]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(o(t,e)/Gi)*Gi,y:Math.round(i(t,e)/Gi)*Gi,i:e}})}var r=En,a=zn,o=r,i=a,l=lu;return t?e(t):(e.links=function(t){return lr(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return lr(n(t)).cells.forEach(function(n,r){for(var a,o=n.site,i=n.edges.sort(In),l=-1,u=i.length,s=i[u-1].edge,c=s.l===o?s.r:s.l;++l<u;)s,a=c,s=i[l].edge,c=s.l===o?s.r:s.l,r<a.i&&r<c.i&&sr(o,a,c)<0&&e.push([t[r],t[a.i],t[c.i]])}),e},e.x=function(t){return arguments.length?(o=Nt(r=t),e):r},e.y=function(t){return arguments.length?(i=Nt(a=t),e):a},e.clipExtent=function(t){return arguments.length?(l=null==t?lu:t,e):l===lu?null:l},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):l===lu?null:l&&l[1]},e)};var lu=[[-1e6,-1e6],[1e6,1e6]];ui.geom.delaunay=function(t){return ui.geom.voronoi().triangles(t)},ui.geom.quadtree=function(t,e,n,r,a){function o(t){function o(t,e,n,r,a,o,i,l){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var u=t.x,c=t.y;if(null!=u)if(mi(u-n)+mi(c-r)<.01)s(t,e,n,r,a,o,i,l);else{var f=t.point;t.x=t.y=t.point=null,s(t,f,u,c,a,o,i,l),s(t,e,n,r,a,o,i,l)}else t.x=n,t.y=r,t.point=e}else s(t,e,n,r,a,o,i,l)}function s(t,e,n,r,a,i,l,u){var s=.5*(a+l),c=.5*(i+u),f=n>=s,h=r>=c,g=h<<1|f;t.leaf=!1,t=t.nodes[g]||(t.nodes[g]=hr()),f?a=s:l=s,h?i=c:u=c,o(t,e,n,r,a,i,l,u)}var c,f,h,g,p,d,v,y,m,x=Nt(l),b=Nt(u);if(null!=e)d=e,v=n,y=r,m=a;else if(y=m=-(d=v=1/0),f=[],h=[],p=t.length,i)for(g=0;g<p;++g)c=t[g],c.x<d&&(d=c.x),c.y<v&&(v=c.y),c.x>y&&(y=c.x),c.y>m&&(m=c.y),f.push(c.x),h.push(c.y);else for(g=0;g<p;++g){var w=+x(c=t[g],g),M=+b(c,g);w<d&&(d=w),M<v&&(v=M),w>y&&(y=w),M>m&&(m=M),f.push(w),h.push(M)}var C=y-d,k=m-v;C>k?m=v+C:y=d+k;var A=hr();if(A.add=function(t){o(A,t,+x(t,++g),+b(t,g),d,v,y,m)},A.visit=function(t){gr(t,A,d,v,y,m)},A.find=function(t){return pr(A,t[0],t[1],d,v,y,m)},g=-1,null==e){for(;++g<p;)o(A,t[g],f[g],h[g],d,v,y,m);--g}else t.forEach(A.add);return f=h=t=c=null,A}var i,l=En,u=zn;return(i=arguments.length)?(l=cr,u=fr,3===i&&(a=n,r=e,n=e=0),o(t)):(o.x=function(t){return arguments.length?(l=t,o):l},o.y=function(t){return arguments.length?(u=t,o):u},o.extent=function(t){return arguments.length?(null==t?e=n=r=a=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],a=+t[1][1]),o):null==e?null:[[e,n],[r,a]]},o.size=function(t){return arguments.length?(null==t?e=n=r=a=null:(e=n=0,r=+t[0],a=+t[1]),o):null==e?null:[r-e,a-n]},o)},ui.interpolateRgb=dr,ui.interpolateObject=vr,ui.interpolateNumber=yr,ui.interpolateString=mr;var uu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,su=new RegExp(uu.source,"g");ui.interpolate=xr,ui.interpolators=[function(t,e){var n=typeof e;return("string"===n?el.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?dr:mr:e instanceof it?dr:Array.isArray(e)?br:"object"===n&&isNaN(e)?vr:yr)(t,e)}],ui.interpolateArray=br;var cu=function(){return m},fu=ui.map({linear:cu,poly:_r,quad:function(){return kr},cubic:function(){return Ar},sin:function(){return Sr},exp:function(){return Er},circle:function(){return zr},elastic:Fr,back:Br,bounce:function(){return Dr}}),hu=ui.map({in:m,out:Mr,"in-out":Cr,"out-in":function(t){return Cr(Mr(t))}});ui.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,r=e>=0?t.slice(e+1):"in";return n=fu.get(n)||cu,r=hu.get(r)||m,wr(r(n.apply(null,si.call(arguments,1))))},ui.interpolateHcl=Tr,ui.interpolateHsl=Gr,ui.interpolateLab=Lr,ui.interpolateRound=Pr,ui.transform=function(t){var e=fi.createElementNS(ui.ns.prefix.svg,"g");return(ui.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new qr(n?n.matrix:gu)})(t)},qr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var gu={a:1,b:0,c:0,d:1,e:0,f:0};ui.interpolateTransform=Zr,ui.layout={},ui.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push($r(t[n]));return e}},ui.layout.chord=function(){function t(){var t,s,f,h,g,p={},d=[],v=ui.range(o),y=[];for(n=[],r=[],t=0,h=-1;++h<o;){for(s=0,g=-1;++g<o;)s+=a[h][g];d.push(s),y.push(ui.range(o)),t+=s}for(i&&v.sort(function(t,e){return i(d[t],d[e])}),l&&y.forEach(function(t,e){t.sort(function(t,n){return l(a[e][t],a[e][n])})}),t=(qi-c*o)/t,s=0,h=-1;++h<o;){for(f=s,g=-1;++g<o;){var m=v[h],x=y[m][g],b=a[m][x],w=s,M=s+=b*t;p[m+"-"+x]={index:m,subindex:x,startAngle:w,endAngle:M,value:b}}r[m]={index:m,startAngle:f,endAngle:s,value:d[m]},s+=c}for(h=-1;++h<o;)for(g=h-1;++g<o;){var C=p[h+"-"+g],k=p[g+"-"+h];(C.value||k.value)&&n.push(C.value<k.value?{source:k,target:C}:{source:C,target:k})}u&&e()}function e(){n.sort(function(t,e){return u((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,r,a,o,i,l,u,s={},c=0;return s.matrix=function(t){return arguments.length?(o=(a=t)&&a.length,n=r=null,s):a},s.padding=function(t){return arguments.length?(c=t,n=r=null,s):c},s.sortGroups=function(t){return arguments.length?(i=t,n=r=null,s):i},s.sortSubgroups=function(t){return arguments.length?(l=t,n=null,s):l},s.sortChords=function(t){return arguments.length?(u=t,n&&e(),s):u},s.chords=function(){return n||t(),n},s.groups=function(){return r||t(),r},s},ui.layout.force=function(){function t(t){return function(e,n,r,a){if(e.point!==t){var o=e.cx-t.x,i=e.cy-t.y,l=a-n,u=o*o+i*i;if(l*l/y<u){if(u<d){var s=e.charge/u;t.px-=o*s,t.py-=i*s}return!0}if(e.point&&u&&u<d){var s=e.pointCharge/u;t.px-=o*s,t.py-=i*s}}return!e.charge}}function e(t){t.px=ui.event.x,t.py=ui.event.y,u.resume()}var n,r,a,o,i,l,u={},s=ui.dispatch("start","tick","end"),c=[1,1],f=.9,h=pu,g=du,p=-30,d=vu,v=.1,y=.64,x=[],b=[];return u.tick=function(){if((a*=.99)<.005)return n=null,s.end({type:"end",alpha:a=0}),!0;var e,r,u,h,g,d,y,m,w,M=x.length,C=b.length;for(r=0;r<C;++r)u=b[r],h=u.source,g=u.target,m=g.x-h.x,w=g.y-h.y,(d=m*m+w*w)&&(d=a*i[r]*((d=Math.sqrt(d))-o[r])/d,m*=d,w*=d,g.x-=m*(y=h.weight+g.weight?h.weight/(h.weight+g.weight):.5),g.y-=w*y,h.x+=m*(y=1-y),h.y+=w*y);if((y=a*v)&&(m=c[0]/2,w=c[1]/2,r=-1,y))for(;++r<M;)u=x[r],u.x+=(m-u.x)*y,u.y+=(w-u.y)*y;if(p)for(ra(e=ui.geom.quadtree(x),a,l),r=-1;++r<M;)(u=x[r]).fixed||e.visit(t(u));for(r=-1;++r<M;)u=x[r],u.fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*f,u.y-=(u.py-(u.py=u.y))*f);s.tick({type:"tick",alpha:a})},u.nodes=function(t){return arguments.length?(x=t,u):x},u.links=function(t){return arguments.length?(b=t,u):b},u.size=function(t){return arguments.length?(c=t,u):c},u.linkDistance=function(t){return arguments.length?(h="function"==typeof t?t:+t,u):h},u.distance=u.linkDistance,u.linkStrength=function(t){return arguments.length?(g="function"==typeof t?t:+t,u):g},u.friction=function(t){return arguments.length?(f=+t,u):f},u.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,u):p},u.chargeDistance=function(t){return arguments.length?(d=t*t,u):Math.sqrt(d)},u.gravity=function(t){return arguments.length?(v=+t,u):v},u.theta=function(t){return arguments.length?(y=t*t,u):Math.sqrt(y)},u.alpha=function(t){return arguments.length?(t=+t,a?t>0?a=t:(n.c=null,n.t=NaN,n=null,s.end({type:"end",alpha:a=0})):t>0&&(s.start({type:"start",alpha:a=t}),n=Ft(u.tick)),u):a},u.start=function(){function t(t,r){if(!n){for(n=new Array(a),u=0;u<a;++u)n[u]=[];for(u=0;u<s;++u){var o=b[u];n[o.source.index].push(o.target),n[o.target.index].push(o.source)}}for(var i,l=n[e],u=-1,c=l.length;++u<c;)if(!isNaN(i=l[u][t]))return i;return Math.random()*r}var e,n,r,a=x.length,s=b.length,f=c[0],d=c[1];for(e=0;e<a;++e)(r=x[e]).index=e,r.weight=0;for(e=0;e<s;++e)r=b[e],"number"==typeof r.source&&(r.source=x[r.source]),"number"==typeof r.target&&(r.target=x[r.target]),++r.source.weight,++r.target.weight;for(e=0;e<a;++e)r=x[e],isNaN(r.x)&&(r.x=t("x",f)),isNaN(r.y)&&(r.y=t("y",d)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(o=[],"function"==typeof h)for(e=0;e<s;++e)o[e]=+h.call(this,b[e],e);else for(e=0;e<s;++e)o[e]=h;if(i=[],"function"==typeof g)for(e=0;e<s;++e)i[e]=+g.call(this,b[e],e);else for(e=0;e<s;++e)i[e]=g;if(l=[],"function"==typeof p)for(e=0;e<a;++e)l[e]=+p.call(this,x[e],e);else for(e=0;e<a;++e)l[e]=p;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){if(r||(r=ui.behavior.drag().origin(m).on("dragstart.force",Qr).on("drag.force",e).on("dragend.force",ta)),!arguments.length)return r;this.on("mouseover.force",ea).on("mouseout.force",na).call(r)},ui.rebind(u,s,"on")};var pu=20,du=1,vu=1/0;ui.layout.hierarchy=function(){function t(a){var o,i=[a],l=[];for(a.depth=0;null!=(o=i.pop());)if(l.push(o),(s=n.call(t,o,o.depth))&&(u=s.length)){for(var u,s,c;--u>=0;)i.push(c=s[u]),c.parent=o,c.depth=o.depth+1;r&&(o.value=0),o.children=s}else r&&(o.value=+r.call(t,o,o.depth)||0),delete o.children;return ia(a,function(t){var n,a;e&&(n=t.children)&&n.sort(e),r&&(a=t.parent)&&(a.value+=t.value)}),l}var e=sa,n=la,r=ua;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(r=e,t):r},t.revalue=function(e){return r&&(oa(e,function(t){t.children&&(t.value=0)}),ia(e,function(e){var n;e.children||(e.value=+r.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},ui.layout.partition=function(){function t(e,n,r,a){var o=e.children;if(e.x=n,e.y=e.depth*a,e.dx=r,e.dy=a,o&&(i=o.length)){var i,l,u,s=-1;for(r=e.value?r/e.value:0;++s<i;)t(l=o[s],n,u=l.value*r,a),n+=u}}function e(t){var n=t.children,r=0;if(n&&(a=n.length))for(var a,o=-1;++o<a;)r=Math.max(r,e(n[o]));return 1+r}function n(n,o){var i=r.call(this,n,o);return t(i[0],0,a[0],a[1]/e(i[0])),i}var r=ui.layout.hierarchy(),a=[1,1];return n.size=function(t){return arguments.length?(a=t,n):a},aa(n,r)},ui.layout.pie=function(){function t(i){var l,u=i.length,s=i.map(function(n,r){return+e.call(t,n,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof a?a.apply(this,arguments):a)-c,h=Math.min(Math.abs(f)/u,+("function"==typeof o?o.apply(this,arguments):o)),g=h*(f<0?-1:1),p=ui.sum(s),d=p?(f-u*g)/p:0,v=ui.range(u),y=[];return null!=n&&v.sort(n===yu?function(t,e){return s[e]-s[t]}:function(t,e){return n(i[t],i[e])}),v.forEach(function(t){y[t]={data:i[t],value:l=s[t],startAngle:c,endAngle:c+=l*d+g,padAngle:h}}),y}var e=Number,n=yu,r=0,a=qi,o=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(r=e,t):r},t.endAngle=function(e){return arguments.length?(a=e,t):a},t.padAngle=function(e){return arguments.length?(o=e,t):o},t};var yu={};ui.layout.stack=function(){function t(l,u){if(!(h=l.length))return l;var s=l.map(function(n,r){return e.call(t,n,r)}),c=s.map(function(e){return e.map(function(e,n){return[o.call(t,e,n),i.call(t,e,n)]})}),f=n.call(t,c,u);s=ui.permute(s,f),c=ui.permute(c,f);var h,g,p,d,v=r.call(t,c,u),y=s[0].length;for(p=0;p<y;++p)for(a.call(t,s[0][p],d=v[p],c[0][p][1]),g=1;g<h;++g)a.call(t,s[g][p],d+=c[g-1][p][1],c[g][p][1]);return l}var e=m,n=pa,r=da,a=ga,o=fa,i=ha;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:mu.get(e)||pa,t):n},t.offset=function(e){return arguments.length?(r="function"==typeof e?e:xu.get(e)||da,t):r},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(i=e,t):i},t.out=function(e){return arguments.length?(a=e,t):a},t};var mu=ui.map({"inside-out":function(t){var e,n,r=t.length,a=t.map(va),o=t.map(ya),i=ui.range(r).sort(function(t,e){return a[t]-a[e]}),l=0,u=0,s=[],c=[];for(e=0;e<r;++e)n=i[e],l<u?(l+=o[n],s.push(n)):(u+=o[n],c.push(n));return c.reverse().concat(s)},reverse:function(t){return ui.range(t.length).reverse()},default:pa}),xu=ui.map({silhouette:function(t){var e,n,r,a=t.length,o=t[0].length,i=[],l=0,u=[];for(n=0;n<o;++n){for(e=0,r=0;e<a;e++)r+=t[e][n][1];r>l&&(l=r),i.push(r)}for(n=0;n<o;++n)u[n]=(l-i[n])/2;return u},wiggle:function(t){var e,n,r,a,o,i,l,u,s,c=t.length,f=t[0],h=f.length,g=[];for(g[0]=u=s=0,n=1;n<h;++n){for(e=0,a=0;e<c;++e)a+=t[e][n][1];for(e=0,o=0,l=f[n][0]-f[n-1][0];e<c;++e){for(r=0,i=(t[e][n][1]-t[e][n-1][1])/(2*l);r<e;++r)i+=(t[r][n][1]-t[r][n-1][1])/l;o+=i*t[e][n][1]}g[n]=u-=a?o/a*l:0,u<s&&(s=u)}for(n=0;n<h;++n)g[n]-=s;return g},expand:function(t){var e,n,r,a=t.length,o=t[0].length,i=1/a,l=[];for(n=0;n<o;++n){for(e=0,r=0;e<a;e++)r+=t[e][n][1];if(r)for(e=0;e<a;e++)t[e][n][1]/=r;else for(e=0;e<a;e++)t[e][n][1]=i}for(n=0;n<o;++n)l[n]=0;return l},zero:da});ui.layout.histogram=function(){function t(t,o){for(var i,l,u=[],s=t.map(n,this),c=r.call(this,s,o),f=a.call(this,c,s,o),o=-1,h=s.length,g=f.length-1,p=e?1:1/h;++o<g;)i=u[o]=[],i.dx=f[o+1]-(i.x=f[o]),i.y=0;if(g>0)for(o=-1;++o<h;)(l=s[o])>=c[0]&&l<=c[1]&&(i=u[ui.bisect(f,l,1,g)-1],i.y+=p,i.push(t[o]));return u}var e=!0,n=Number,r=wa,a=xa;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(r=Nt(e),t):r},t.bins=function(e){return arguments.length?(a="number"==typeof e?function(t){return ba(t,e)}:Nt(e),t):a},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},ui.layout.pack=function(){function t(t,o){var i=n.call(this,t,o),l=i[0],u=a[0],s=a[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(l.x=l.y=0,ia(l,function(t){t.r=+c(t.value)}),ia(l,Na),r){var f=r*(e?1:Math.max(2*l.r/u,2*l.r/s))/2;ia(l,function(t){t.r+=f}),ia(l,Na),ia(l,function(t){t.r-=f})}return Ea(l,u/2,s/2,e?1:1/Math.max(2*l.r/u,2*l.r/s)),i}var e,n=ui.layout.hierarchy().sort(Ma),r=0,a=[1,1];return t.size=function(e){return arguments.length?(a=e,t):a},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(r=+e,t):r},aa(t,n)},ui.layout.tree=function(){function t(t,a){var c=i.call(this,t,a),f=c[0],h=e(f);if(ia(h,n),h.parent.m=-h.z,oa(h,r),s)oa(f,o);else{var g=f,p=f,d=f;oa(f,function(t){t.x<g.x&&(g=t),t.x>p.x&&(p=t),t.depth>d.depth&&(d=t)});var v=l(g,p)/2-g.x,y=u[0]/(p.x+l(p,g)/2+v),m=u[1]/(d.depth||1);oa(f,function(t){t.x=(t.x+v)*y,t.y=t.depth*m})}return c}function e(t){for(var e,n={A:null,children:[t]},r=[n];null!=(e=r.pop());)for(var a,o=e.children,i=0,l=o.length;i<l;++i)r.push((o[i]=a={_:o[i],parent:e,children:(a=o[i].children)&&a.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:i}).a=a);return n.children[0]}function n(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e.length){Ga(t);var o=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+l(t._,r._),t.m=t.z-o):t.z=o}else r&&(t.z=r.z+l(t._,r._));t.parent.A=a(t,r,t.parent.A||n[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function a(t,e,n){if(e){for(var r,a=t,o=t,i=e,u=a.parent.children[0],s=a.m,c=o.m,f=i.m,h=u.m;i=Da(i),a=Ba(a),i&&a;)u=Ba(u),o=Da(o),o.a=t,r=i.z+f-a.z-s+l(i._,a._),r>0&&(Ta(La(i,t,n),t,r),s+=r,c+=r),f+=i.m,s+=a.m,h+=u.m,c+=o.m;i&&!Da(o)&&(o.t=i,o.m+=f-c),a&&!Ba(u)&&(u.t=a,u.m+=s-h,n=t)}return n}function o(t){t.x*=u[0],t.y=t.depth*u[1]}var i=ui.layout.hierarchy().sort(null).value(null),l=Fa,u=[1,1],s=null;return t.separation=function(e){return arguments.length?(l=e,t):l},t.size=function(e){return arguments.length?(s=null==(u=e)?o:null,t):s?null:u},t.nodeSize=function(e){return arguments.length?(s=null==(u=e)?null:o,t):s?u:null},aa(t,i)},ui.layout.cluster=function(){function t(t,o){var i,l=e.call(this,t,o),u=l[0],s=0;ia(u,function(t){var e=t.children;e&&e.length?(t.x=qa(e),t.y=Pa(e)):(t.x=i?s+=n(t,i):0,t.y=0,i=t)});var c=Ra(u),f=Ha(u),h=c.x-n(c,f)/2,g=f.x+n(f,c)/2;return ia(u,a?function(t){t.x=(t.x-u.x)*r[0],t.y=(u.y-t.y)*r[1]}:function(t){t.x=(t.x-h)/(g-h)*r[0],t.y=(1-(u.y?t.y/u.y:1))*r[1]}),l}var e=ui.layout.hierarchy().sort(null).value(null),n=Fa,r=[1,1],a=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(a=null==(r=e),t):a?null:r},t.nodeSize=function(e){return arguments.length?(a=null!=(r=e),t):a?r:null},aa(t,e)},ui.layout.treemap=function(){function t(t,e){for(var n,r,a=-1,o=t.length;++a<o;)r=(n=t[a]).value*(e<0?0:e),n.area=isNaN(r)||r<=0?0:r}function e(n){var o=n.children;if(o&&o.length){var i,l,u,s=f(n),c=[],h=o.slice(),p=1/0,d="slice"===g?s.dx:"dice"===g?s.dy:"slice-dice"===g?1&n.depth?s.dy:s.dx:Math.min(s.dx,s.dy);for(t(h,s.dx*s.dy/n.value),c.area=0;(u=h.length)>0;)c.push(i=h[u-1]),c.area+=i.area,"squarify"!==g||(l=r(c,d))<=p?(h.pop(),p=l):(c.area-=c.pop().area,a(c,d,s,!1),d=Math.min(s.dx,s.dy),c.length=c.area=0,p=1/0);c.length&&(a(c,d,s,!0),c.length=c.area=0),o.forEach(e)}}function n(e){var r=e.children;if(r&&r.length){var o,i=f(e),l=r.slice(),u=[];for(t(l,i.dx*i.dy/e.value),u.area=0;o=l.pop();)u.push(o),u.area+=o.area,null!=o.z&&(a(u,o.z?i.dx:i.dy,i,!l.length),u.length=u.area=0);r.forEach(n)}}function r(t,e){
for(var n,r=t.area,a=0,o=1/0,i=-1,l=t.length;++i<l;)(n=t[i].area)&&(n<o&&(o=n),n>a&&(a=n));return r*=r,e*=e,r?Math.max(e*a*p/r,r/(e*o*p)):1/0}function a(t,e,n,r){var a,o=-1,i=t.length,l=n.x,s=n.y,c=e?u(t.area/e):0;if(e==n.dx){for((r||c>n.dy)&&(c=n.dy);++o<i;)a=t[o],a.x=l,a.y=s,a.dy=c,l+=a.dx=Math.min(n.x+n.dx-l,c?u(a.area/c):0);a.z=!0,a.dx+=n.x+n.dx-l,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++o<i;)a=t[o],a.x=l,a.y=s,a.dx=c,s+=a.dy=Math.min(n.y+n.dy-s,c?u(a.area/c):0);a.z=!1,a.dy+=n.y+n.dy-s,n.x+=c,n.dx-=c}}function o(r){var a=i||l(r),o=a[0];return o.x=o.y=0,o.value?(o.dx=s[0],o.dy=s[1]):o.dx=o.dy=0,i&&l.revalue(o),t([o],o.dx*o.dy/o.value),(i?n:e)(o),h&&(i=a),a}var i,l=ui.layout.hierarchy(),u=Math.round,s=[1,1],c=null,f=Ua,h=!1,g="squarify",p=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(s=t,o):s},o.padding=function(t){function e(e){var n=t.call(o,e,e.depth);return null==n?Ua(e):Va(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Va(e,t)}if(!arguments.length)return c;var r;return f=null==(c=t)?Ua:"function"==(r=typeof t)?e:"number"===r?(t=[t,t,t,t],n):n,o},o.round=function(t){return arguments.length?(u=t?Math.round:Number,o):u!=Number},o.sticky=function(t){return arguments.length?(h=t,i=null,o):h},o.ratio=function(t){return arguments.length?(p=t,o):p},o.mode=function(t){return arguments.length?(g=t+"",o):g},aa(o,l)},ui.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){var n,r,a;do{n=2*Math.random()-1,r=2*Math.random()-1,a=n*n+r*r}while(!a||a>1);return t+e*n*Math.sqrt(-2*Math.log(a)/a)}},logNormal:function(){var t=ui.random.normal.apply(ui,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=ui.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},ui.scale={};var bu={floor:m,ceil:m};ui.scale.linear=function(){return Xa([0,1],[0,1],xr,!1)};var wu={s:1,g:1,p:1,r:1,e:1};ui.scale.log=function(){return ro(ui.scale.linear().domain([0,1]),10,!0,[1,10])};var Mu=ui.format(".0e"),Cu={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};ui.scale.pow=function(){return ao(ui.scale.linear(),1,[0,1])},ui.scale.sqrt=function(){return ui.scale.pow().exponent(.5)},ui.scale.ordinal=function(){return io([],{t:"range",a:[[]]})},ui.scale.category10=function(){return ui.scale.ordinal().range(ku)},ui.scale.category20=function(){return ui.scale.ordinal().range(Au)},ui.scale.category20b=function(){return ui.scale.ordinal().range(Nu)},ui.scale.category20c=function(){return ui.scale.ordinal().range(_u)};var ku=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(xt),Au=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(xt),Nu=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(xt),_u=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(xt);ui.scale.quantile=function(){return lo([],[])},ui.scale.quantize=function(){return uo(0,1,[0,1])},ui.scale.threshold=function(){return so([.5],[0,1])},ui.scale.identity=function(){return co([0,1])},ui.svg={},ui.svg.arc=function(){function t(){var t=Math.max(0,+n.apply(this,arguments)),s=Math.max(0,+r.apply(this,arguments)),c=i.apply(this,arguments)-Hi,f=l.apply(this,arguments)-Hi,h=Math.abs(f-c),g=c>f?0:1;if(s<t&&(p=s,s=t,t=p),h>=Ri)return e(s,g)+(t?e(t,1-g):"")+"Z";var p,d,v,y,m,x,b,w,M,C,k,A,N=0,_=0,S=[];if((y=(+u.apply(this,arguments)||0)/2)&&(v=o===Su?Math.sqrt(t*t+s*s):+o.apply(this,arguments),g||(_*=-1),s&&(_=et(v/s*Math.sin(y))),t&&(N=et(v/t*Math.sin(y)))),s){m=s*Math.cos(c+_),x=s*Math.sin(c+_),b=s*Math.cos(f-_),w=s*Math.sin(f-_);var E=Math.abs(f-c-2*_)<=Pi?0:1;if(_&&mo(m,x,b,w)===g^E){var z=(c+f)/2;m=s*Math.cos(z),x=s*Math.sin(z),b=w=null}}else m=x=0;if(t){M=t*Math.cos(f-N),C=t*Math.sin(f-N),k=t*Math.cos(c+N),A=t*Math.sin(c+N);var F=Math.abs(c-f+2*N)<=Pi?0:1;if(N&&mo(M,C,k,A)===1-g^F){var B=(c+f)/2;M=t*Math.cos(B),C=t*Math.sin(B),k=A=null}}else M=C=0;if(h>Gi&&(p=Math.min(Math.abs(s-t)/2,+a.apply(this,arguments)))>.001){d=t<s^g?0:1;var D=p,T=p;if(h<Pi){var G=null==k?[M,C]:null==b?[m,x]:Tn([m,x],[k,A],[b,w],[M,C]),L=m-G[0],P=x-G[1],q=b-G[0],R=w-G[1],H=1/Math.sin(Math.acos((L*q+P*R)/(Math.sqrt(L*L+P*P)*Math.sqrt(q*q+R*R)))/2),U=Math.sqrt(G[0]*G[0]+G[1]*G[1]);T=Math.min(p,(t-U)/(H-1)),D=Math.min(p,(s-U)/(H+1))}if(null!=b){var V=xo(null==k?[M,C]:[k,A],[m,x],s,D,g),j=xo([b,w],[M,C],s,D,g);p===D?S.push("M",V[0],"A",D,",",D," 0 0,",d," ",V[1],"A",s,",",s," 0 ",1-g^mo(V[1][0],V[1][1],j[1][0],j[1][1]),",",g," ",j[1],"A",D,",",D," 0 0,",d," ",j[0]):S.push("M",V[0],"A",D,",",D," 0 1,",d," ",j[0])}else S.push("M",m,",",x);if(null!=k){var O=xo([m,x],[k,A],t,-T,g),I=xo([M,C],null==b?[m,x]:[b,w],t,-T,g);p===T?S.push("L",I[0],"A",T,",",T," 0 0,",d," ",I[1],"A",t,",",t," 0 ",g^mo(I[1][0],I[1][1],O[1][0],O[1][1]),",",1-g," ",O[1],"A",T,",",T," 0 0,",d," ",O[0]):S.push("L",I[0],"A",T,",",T," 0 0,",d," ",O[0])}else S.push("L",M,",",C)}else S.push("M",m,",",x),null!=b&&S.push("A",s,",",s," 0 ",E,",",g," ",b,",",w),S.push("L",M,",",C),null!=k&&S.push("A",t,",",t," 0 ",F,",",1-g," ",k,",",A);return S.push("Z"),S.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var n=ho,r=go,a=fo,o=Su,i=po,l=vo,u=yo;return t.innerRadius=function(e){return arguments.length?(n=Nt(e),t):n},t.outerRadius=function(e){return arguments.length?(r=Nt(e),t):r},t.cornerRadius=function(e){return arguments.length?(a=Nt(e),t):a},t.padRadius=function(e){return arguments.length?(o=e==Su?Su:Nt(e),t):o},t.startAngle=function(e){return arguments.length?(i=Nt(e),t):i},t.endAngle=function(e){return arguments.length?(l=Nt(e),t):l},t.padAngle=function(e){return arguments.length?(u=Nt(e),t):u},t.centroid=function(){var t=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,e=(+i.apply(this,arguments)+ +l.apply(this,arguments))/2-Hi;return[Math.cos(e)*t,Math.sin(e)*t]},t};var Su="auto";ui.svg.line=function(){return bo(m)};var Eu=ui.map({linear:wo,"linear-closed":Mo,step:Co,"step-before":ko,"step-after":Ao,basis:Fo,"basis-open":Bo,"basis-closed":Do,bundle:To,cardinal:So,"cardinal-open":No,"cardinal-closed":_o,monotone:Ho});Eu.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var zu=[0,2/3,1/3,0],Fu=[0,1/3,2/3,0],Bu=[0,1/6,2/3,1/6];ui.svg.line.radial=function(){var t=bo(Uo);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},ko.reverse=Ao,Ao.reverse=ko,ui.svg.area=function(){return Vo(m)},ui.svg.area.radial=function(){var t=Vo(Uo);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},ui.svg.chord=function(){function t(t,l){var u=e(this,o,t,l),s=e(this,i,t,l);return"M"+u.p0+r(u.r,u.p1,u.a1-u.a0)+(n(u,s)?a(u.r,u.p1,u.r,u.p0):a(u.r,u.p1,s.r,s.p0)+r(s.r,s.p1,s.a1-s.a0)+a(s.r,s.p1,u.r,u.p0))+"Z"}function e(t,e,n,r){var a=e.call(t,n,r),o=l.call(t,a,r),i=u.call(t,a,r)-Hi,c=s.call(t,a,r)-Hi;return{r:o,a0:i,a1:c,p0:[o*Math.cos(i),o*Math.sin(i)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function r(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Pi)+",1 "+e}function a(t,e,n,r){return"Q 0,0 "+r}var o=xn,i=bn,l=jo,u=po,s=vo;return t.radius=function(e){return arguments.length?(l=Nt(e),t):l},t.source=function(e){return arguments.length?(o=Nt(e),t):o},t.target=function(e){return arguments.length?(i=Nt(e),t):i},t.startAngle=function(e){return arguments.length?(u=Nt(e),t):u},t.endAngle=function(e){return arguments.length?(s=Nt(e),t):s},t},ui.svg.diagonal=function(){function t(t,a){var o=e.call(this,t,a),i=n.call(this,t,a),l=(o.y+i.y)/2,u=[o,{x:o.x,y:l},{x:i.x,y:l},i];return u=u.map(r),"M"+u[0]+"C"+u[1]+" "+u[2]+" "+u[3]}var e=xn,n=bn,r=Oo;return t.source=function(n){return arguments.length?(e=Nt(n),t):e},t.target=function(e){return arguments.length?(n=Nt(e),t):n},t.projection=function(e){return arguments.length?(r=e,t):r},t},ui.svg.diagonal.radial=function(){var t=ui.svg.diagonal(),e=Oo,n=t.projection;return t.projection=function(t){return arguments.length?n(Io(e=t)):e},t},ui.svg.symbol=function(){function t(t,r){return(Du.get(e.call(this,t,r))||Wo)(n.call(this,t,r))}var e=Zo,n=Yo;return t.type=function(n){return arguments.length?(e=Nt(n),t):e},t.size=function(e){return arguments.length?(n=Nt(e),t):n},t};var Du=ui.map({circle:Wo,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Gu)),n=e*Gu;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Tu),n=e*Tu/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Tu),n=e*Tu/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});ui.svg.symbolTypes=Du.keys();var Tu=Math.sqrt(3),Gu=Math.tan(30*Ui);_i.transition=function(t){for(var e,n,r=Lu||++Hu,a=Qo(t),o=[],i=Pu||{time:Date.now(),ease:Nr,delay:0,duration:250},l=-1,u=this.length;++l<u;){o.push(e=[]);for(var s=this[l],c=-1,f=s.length;++c<f;)(n=s[c])&&ti(n,c,a,r,i),e.push(n)}return $o(o,a,r)},_i.interrupt=function(t){return this.each(null==t?qu:Xo(Qo(t)))};var Lu,Pu,qu=Xo(Qo()),Ru=[],Hu=0;Ru.call=_i.call,Ru.empty=_i.empty,Ru.node=_i.node,Ru.size=_i.size,ui.transition=function(t,e){return t&&t.transition?Lu?t.transition(e):t:ui.selection().transition(t)},ui.transition.prototype=Ru,Ru.select=function(t){var e,n,r,a=this.id,o=this.namespace,i=[];t=S(t);for(var l=-1,u=this.length;++l<u;){i.push(e=[]);for(var s=this[l],c=-1,f=s.length;++c<f;)(r=s[c])&&(n=t.call(r,r.__data__,c,l))?("__data__"in r&&(n.__data__=r.__data__),ti(n,c,o,a,r[o][a]),e.push(n)):e.push(null)}return $o(i,o,a)},Ru.selectAll=function(t){var e,n,r,a,o,i=this.id,l=this.namespace,u=[];t=E(t);for(var s=-1,c=this.length;++s<c;)for(var f=this[s],h=-1,g=f.length;++h<g;)if(r=f[h]){o=r[l][i],n=t.call(r,r.__data__,h,s),u.push(e=[]);for(var p=-1,d=n.length;++p<d;)(a=n[p])&&ti(a,p,l,i,o),e.push(a)}return $o(u,l,i)},Ru.filter=function(t){var e,n,r,a=[];"function"!=typeof t&&(t=U(t));for(var o=0,i=this.length;o<i;o++){a.push(e=[]);for(var n=this[o],l=0,u=n.length;l<u;l++)(r=n[l])&&t.call(r,r.__data__,l,o)&&e.push(r)}return $o(a,this.namespace,this.id)},Ru.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):j(this,null==e?function(e){e[r][n].tween.remove(t)}:function(a){a[r][n].tween.set(t,e)})},Ru.attr=function(t,e){function n(){this.removeAttribute(l)}function r(){this.removeAttributeNS(l.space,l.local)}function a(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(l);return n!==t&&(e=i(n,t),function(t){this.setAttribute(l,e(t))})})}function o(t){return null==t?r:(t+="",function(){var e,n=this.getAttributeNS(l.space,l.local);return n!==t&&(e=i(n,t),function(t){this.setAttributeNS(l.space,l.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var i="transform"==t?Zr:xr,l=ui.ns.qualify(t);return Jo(this,"attr."+t,e,l.local?o:a)},Ru.attrTween=function(t,e){function n(t,n){var r=e.call(this,t,n,this.getAttribute(a));return r&&function(t){this.setAttribute(a,r(t))}}function r(t,n){var r=e.call(this,t,n,this.getAttributeNS(a.space,a.local));return r&&function(t){this.setAttributeNS(a.space,a.local,r(t))}}var a=ui.ns.qualify(t);return this.tween("attr."+t,a.local?r:n)},Ru.style=function(t,n,r){function a(){this.style.removeProperty(t)}function o(n){return null==n?a:(n+="",function(){var a,o=e(this).getComputedStyle(this,null).getPropertyValue(t);return o!==n&&(a=xr(o,n),function(e){this.style.setProperty(t,a(e),r)})})}var i=arguments.length;if(i<3){if("string"!=typeof t){i<2&&(n="");for(r in t)this.style(r,t[r],n);return this}r=""}return Jo(this,"style."+t,n,o)},Ru.styleTween=function(t,n,r){function a(a,o){var i=n.call(this,a,o,e(this).getComputedStyle(this,null).getPropertyValue(t));return i&&function(e){this.style.setProperty(t,i(e),r)}}return arguments.length<3&&(r=""),this.tween("style."+t,a)},Ru.text=function(t){return Jo(this,"text",t,Ko)},Ru.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Ru.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=ui.ease.apply(ui,arguments)),j(this,function(r){r[n][e].ease=t}))},Ru.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:j(this,"function"==typeof t?function(r,a,o){r[n][e].delay=+t.call(r,r.__data__,a,o)}:(t=+t,function(r){r[n][e].delay=t}))},Ru.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:j(this,"function"==typeof t?function(r,a,o){r[n][e].duration=Math.max(1,t.call(r,r.__data__,a,o))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},Ru.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var a=Pu,o=Lu;try{Lu=n,j(this,function(e,a,o){Pu=e[r][n],t.call(e,e.__data__,a,o)})}finally{Pu=a,Lu=o}}else j(this,function(a){var o=a[r][n];(o.event||(o.event=ui.dispatch("start","end","interrupt"))).on(t,e)});return this},Ru.transition=function(){for(var t,e,n,r,a=this.id,o=++Hu,i=this.namespace,l=[],u=0,s=this.length;u<s;u++){l.push(t=[]);for(var e=this[u],c=0,f=e.length;c<f;c++)(n=e[c])&&(r=n[i][a],ti(n,c,i,o,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),t.push(n)}return $o(l,i,o)},ui.svg.axis=function(){function t(t){t.each(function(){var t,s=ui.select(this),c=this.__chart__||n,f=this.__chart__=n.copy(),h=null==u?f.ticks?f.ticks.apply(f,l):f.domain():u,g=null==e?f.tickFormat?f.tickFormat.apply(f,l):m:e,p=s.selectAll(".tick").data(h,f),d=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Gi),v=ui.transition(p.exit()).style("opacity",Gi).remove(),y=ui.transition(p.order()).style("opacity",1),x=Math.max(a,0)+i,b=Oa(f),w=s.selectAll(".domain").data([0]),M=(w.enter().append("path").attr("class","domain"),ui.transition(w));d.append("line"),d.append("text");var C,k,A,N,_=d.select("line"),S=y.select("line"),E=p.select("text").text(g),z=d.select("text"),F=y.select("text"),B="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(t=ei,C="x",A="y",k="x2",N="y2",E.attr("dy",B<0?"0em":".71em").style("text-anchor","middle"),M.attr("d","M"+b[0]+","+B*o+"V0H"+b[1]+"V"+B*o)):(t=ni,C="y",A="x",k="y2",N="x2",E.attr("dy",".32em").style("text-anchor",B<0?"end":"start"),M.attr("d","M"+B*o+","+b[0]+"H0V"+b[1]+"H"+B*o)),_.attr(N,B*a),z.attr(A,B*x),S.attr(k,0).attr(N,B*a),F.attr(C,0).attr(A,B*x),f.rangeBand){var D=f,T=D.rangeBand()/2;c=f=function(t){return D(t)+T}}else c.rangeBand?c=f:v.call(t,f,c);d.call(t,c,f),y.call(t,f,f)})}var e,n=ui.scale.linear(),r=Uu,a=6,o=6,i=3,l=[10],u=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(r=e in Vu?e+"":Uu,t):r},t.ticks=function(){return arguments.length?(l=ci(arguments),t):l},t.tickValues=function(e){return arguments.length?(u=e,t):u},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(a=+e,o=+arguments[n-1],t):a},t.innerTickSize=function(e){return arguments.length?(a=+e,t):a},t.outerTickSize=function(e){return arguments.length?(o=+e,t):o},t.tickPadding=function(e){return arguments.length?(i=+e,t):i},t.tickSubdivide=function(){return arguments.length&&t},t};var Uu="bottom",Vu={top:1,right:1,bottom:1,left:1};ui.svg.brush=function(){function t(e){e.each(function(){var e=ui.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),i=e.selectAll(".background").data([0]);i.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var l=e.selectAll(".resize").data(d,m);l.exit().remove(),l.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return ju[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),l.style("display",t.empty()?"none":null);var u,f=ui.transition(e),h=ui.transition(i);s&&(u=Oa(s),h.attr("x",u[0]).attr("width",u[1]-u[0]),r(f)),c&&(u=Oa(c),h.attr("y",u[0]).attr("height",u[1]-u[0]),a(f)),n(f)})}function n(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+f[+/e$/.test(t)]+","+h[+/^s/.test(t)]+")"})}function r(t){t.select(".extent").attr("x",f[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function a(t){t.select(".extent").attr("y",h[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function o(){function o(){32==ui.event.keyCode&&(E||(x=null,F[0]-=f[1],F[1]-=h[1],E=2),k())}function d(){32==ui.event.keyCode&&2==E&&(F[0]+=f[1],F[1]+=h[1],E=0,k())}function v(){var t=ui.mouse(w),e=!1;b&&(t[0]+=b[0],t[1]+=b[1]),E||(ui.event.altKey?(x||(x=[(f[0]+f[1])/2,(h[0]+h[1])/2]),F[0]=f[+(t[0]<x[0])],F[1]=h[+(t[1]<x[1])]):x=null),_&&y(t,s,0)&&(r(A),e=!0),S&&y(t,c,1)&&(a(A),e=!0),e&&(n(A),C({type:"brush",mode:E?"move":"resize"}))}function y(t,e,n){var r,a,o=Oa(e),u=o[0],s=o[1],c=F[n],d=n?h:f,v=d[1]-d[0];if(E&&(u-=c,s-=v+c),r=(n?p:g)?Math.max(u,Math.min(s,t[n])):t[n],E?a=(r+=c)+v:(x&&(c=Math.max(u,Math.min(s,2*x[n]-r))),c<r?(a=r,r=c):a=c),d[0]!=r||d[1]!=a)return n?l=null:i=null,d[0]=r,d[1]=a,!0}function m(){v(),A.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),ui.select("body").style("cursor",null),B.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),z(),C({type:"brushend"})}var x,b,w=this,M=ui.select(ui.event.target),C=u.of(w,arguments),A=ui.select(w),N=M.datum(),_=!/^(n|s)$/.test(N)&&s,S=!/^(e|w)$/.test(N)&&c,E=M.classed("extent"),z=X(w),F=ui.mouse(w),B=ui.select(e(w)).on("keydown.brush",o).on("keyup.brush",d);if(ui.event.changedTouches?B.on("touchmove.brush",v).on("touchend.brush",m):B.on("mousemove.brush",v).on("mouseup.brush",m),A.interrupt().selectAll("*").interrupt(),E)F[0]=f[0]-F[0],F[1]=h[0]-F[1];else if(N){var D=+/w$/.test(N),T=+/^n/.test(N);b=[f[1-D]-F[0],h[1-T]-F[1]],F[0]=f[D],F[1]=h[T]}else ui.event.altKey&&(x=F.slice());A.style("pointer-events","none").selectAll(".resize").style("display",null),ui.select("body").style("cursor",M.style("cursor")),C({type:"brushstart"}),v()}var i,l,u=N(t,"brushstart","brush","brushend"),s=null,c=null,f=[0,0],h=[0,0],g=!0,p=!0,d=Ou[0];return t.event=function(t){t.each(function(){var t=u.of(this,arguments),e={x:f,y:h,i:i,j:l},n=this.__chart__||e;this.__chart__=e,Lu?ui.select(this).transition().each("start.brush",function(){i=n.i,l=n.j,f=n.x,h=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=br(f,e.x),r=br(h,e.y);return i=l=null,function(a){f=e.x=n(a),h=e.y=r(a),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){i=e.i,l=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(s=e,d=Ou[!s<<1|!c],t):s},t.y=function(e){return arguments.length?(c=e,d=Ou[!s<<1|!c],t):c},t.clamp=function(e){return arguments.length?(s&&c?(g=!!e[0],p=!!e[1]):s?g=!!e:c&&(p=!!e),t):s&&c?[g,p]:s?g:c?p:null},t.extent=function(e){var n,r,a,o,u;return arguments.length?(s&&(n=e[0],r=e[1],c&&(n=n[0],r=r[0]),i=[n,r],s.invert&&(n=s(n),r=s(r)),r<n&&(u=n,n=r,r=u),n==f[0]&&r==f[1]||(f=[n,r])),c&&(a=e[0],o=e[1],s&&(a=a[1],o=o[1]),l=[a,o],c.invert&&(a=c(a),o=c(o)),o<a&&(u=a,a=o,o=u),a==h[0]&&o==h[1]||(h=[a,o])),t):(s&&(i?(n=i[0],r=i[1]):(n=f[0],r=f[1],s.invert&&(n=s.invert(n),r=s.invert(r)),r<n&&(u=n,n=r,r=u))),c&&(l?(a=l[0],o=l[1]):(a=h[0],o=h[1],c.invert&&(a=c.invert(a),o=c.invert(o)),o<a&&(u=a,a=o,o=u))),s&&c?[[n,a],[r,o]]:s?[n,r]:c&&[a,o])},t.clear=function(){return t.empty()||(f=[0,0],h=[0,0],i=l=null),t},t.empty=function(){return!!s&&f[0]==f[1]||!!c&&h[0]==h[1]},ui.rebind(t,u,"on")};var ju={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ou=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Iu=cl.format=vl.timeFormat,Yu=Iu.utc,Zu=Yu("%Y-%m-%dT%H:%M:%S.%LZ");Iu.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ri:Zu,ri.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},ri.toString=Zu.toString,cl.second=Ht(function(t){return new fl(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),cl.seconds=cl.second.range,cl.seconds.utc=cl.second.utc.range,cl.minute=Ht(function(t){return new fl(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),cl.minutes=cl.minute.range,cl.minutes.utc=cl.minute.utc.range,cl.hour=Ht(function(t){var e=t.getTimezoneOffset()/60;return new fl(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),cl.hours=cl.hour.range,cl.hours.utc=cl.hour.utc.range,cl.month=Ht(function(t){return t=cl.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),cl.months=cl.month.range,cl.months.utc=cl.month.utc.range;var Wu=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Xu=[[cl.second,1],[cl.second,5],[cl.second,15],[cl.second,30],[cl.minute,1],[cl.minute,5],[cl.minute,15],[cl.minute,30],[cl.hour,1],[cl.hour,3],[cl.hour,6],[cl.hour,12],[cl.day,1],[cl.day,2],[cl.week,1],[cl.month,1],[cl.month,3],[cl.year,1]],$u=Iu.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Ee]]),Ju={range:function(t,e,n){return ui.range(Math.ceil(t/n)*n,+e,n).map(oi)},floor:m,ceil:m};Xu.year=cl.year,cl.scale=function(){return ai(ui.scale.linear(),Xu,$u)};var Ku=Xu.map(function(t){return[t[0].utc,t[1]]}),Qu=Yu.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Ee]]);Ku.year=cl.year.utc,cl.scale.utc=function(){return ai(ui.scale.linear(),Ku,Qu)},ui.text=_t(function(t){return t.responseText}),ui.json=function(t,e){return St(t,"application/json",ii,e)},ui.html=function(t,e){return St(t,"text/html",li,e)},ui.xml=_t(function(t){return t.responseXML}),"function"==typeof define&&define.amd?(this.d3=ui,define(ui)):"object"==typeof module&&module.exports?module.exports=ui:this.d3=ui}(),function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):e(t):e(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";var n={};return n.util={},n.util.inherits=function(t){function e(){}return e.prototype=t.prototype||t,new e},n.util.getUniqueId=function(){return(new Date).getTime()},n.util.getMax=function(t,e){switch(e){case"stepup":return this.getStepMaxValue(t);case"normal":return this.getMaxValue(t);case"percent":return 100;case"waterfall":return this.getWaterfallMaxValue(t);default:console.error("Unknown classification for chart",e)}},n.util.getMaxValue=function(t){return d3.max(t.categories.map(function(e){return d3.max(t.dataset[e].map(function(t){return t.value}))}))},n.util.getStepMaxValue=function(t){var e=t.dataset[t.categories[0]].map(function(){return 0}),n=e.map(function(){return 0});return t.categories.map(function(r){t.dataset[r].map(function(t,r){!0===t.resetSum&&(e[r]=0),e[r]+=t.value,n[r]=d3.max([e[r],n[r]])})}),d3.max(n)},n.util.getWaterfallMaxValue=function(t){var e=t.categories.map(function(){return 0});return t.categories.map(function(n,r){var a=0;t.dataset[n].map(function(t){a+=t.value,e[r]<a&&(e[r]=a)})}),d3.max(e)},n.util.getMin=function(t,e){switch(e){case"normal":return this.getMinValue(t);case"stepup":return this.getStepMinValue(t);default:return 0}},n.util.getMinValue=function(t){return d3.min([0,d3.min(t.categories.map(function(e){return d3.min(t.dataset[e].map(function(t){return t.value}))}))])},n.util.getStepMinValue=function(t){var e=t.dataset[t.categories[0]].map(function(){return 0}),n=e.map(function(){return 0});return t.categories.map(function(r){t.dataset[r].map(function(t,r){e[r]+=t.value,n[r]=d3.min([e[r],n[r]])})}),d3.min(n)},n.util.getSumUpArray=function(t){var e=t.dataset[t.categories[0]].map(function(){return 0});return t.categories.map(function(n){t.dataset[n].map(function(t,n){e[n]+=t.value})}),e},n.util.getPercentage=function(t,e){return 100*t/e},n.util.getDataArray=function(t){return t.categories.map(function(e){return t.dataset[e]})},n.util.getTabularArray=function(t){var e,n,r,a,o=[],i=[];for(e=0,a=t.dataset[t.categories[0]].length;e<a;e+=1){for(i=[],i.push(t.dataset[t.categories[0]][e].name),n=0,r=t.categories.length;n<r;n+=1)i.push(t.dataset[t.categories[n]][e].value);o.push(i)}return o},n.util.getLabelArray=function(t,e){return t.dataset[t.categories[e||0]].map(function(t){return t.name})},n.util.getCategoryArray=function(t){return t.categories.map(function(t){return t})},n.util.getCategoryData=function(t,e){return e.map(function(e){return t.dataset[e].map(function(t){return t.value})})},n.util.transposeData=function(t){var e,n,r,a,o,i,l,u,s={},c=t.dataset[t.categories[0]].map(function(t){return t.name});for(e=0,r=c.length;e<r;e+=1)s[c[e]]=[];for(e=0,r=t.categories.length;e<r;e+=1)for(i=t.categories[e],n=0,a=t.dataset[i].length;n<a;n+=1)l=t.dataset[i][n].name,u=t.dataset[i][n].value,o=t.dataset[i][n].resetSum,s[l].push({name:i,value:u,resetSum:o});t.categories=c,t.dataset=s},n.util.getPascalCasedName=function(t){return t.substring(0,1).toUpperCase()+t.substring(1)},n.util.getColorBand=function(t,e){var r=0;t.graph.palette;return t.graph.custompalette&&0!==t.graph.custompalette.length?(r=t.graph.custompalette.length,t.graph.custompalette[e%r]):(r=n.palette[t.graph.palette].length,n.palette[t.graph.palette][e%r])},n.util.formatClassName=function(t){return t.trim().replace(/[^A-Za-z0-9_\-]/g,"-").toLowerCase()},n.util.svgToPng=function(e,n){if(this.isCanvasSupported()){var r=d3.select(e.frame.node().parentNode).html(),a=document.createElement("canvas"),o=a.getContext("2d");a.setAttribute("width",d3.select(e.frame.node()).attr("width")),a.setAttribute("height",d3.select(e.frame.node()).attr("height")),o.drawSvg(r),a.toBlob(function(e){var n=document.createElement("a");document.body.appendChild(n),n.style="display: none";var r=t.URL.createObjectURL(e);n.href=r,n.download="png_download"+Math.ceil(1e5*Math.random())+".png",n.click()},"image/png"),n.call()}else console.log("uvCharts: Download feature is not supported in this version of browser")},n.util.isDownloadSupported=function(){var t=document.createElement("canvas");return"function"==typeof t.getContext("2d").drawSvg&&"function"==typeof t.toBlob},n.util.isCanvasSupported=function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},n.util.endAll=function(t,e){var n=0;t.each(function(){++n}).each("end",function(){--n||e.apply(this,arguments)})},n.util.getClassName=function(t,e){var r=n.util.formatClassName(e);return d3.select(t).attr("class")?-1!==d3.select(t).attr("class").split(" ").indexOf(r)?d3.select(t).attr("class"):d3.select(t).attr("class")+" "+r:r},n.util.getLabelValue=function(t,e){if(void 0!==t.config.label.formatter)return t.config.label.formatter(e.value);var n=e.value%1==0?e.value:e.value.toFixed(t.config.label.precision);return t.config.label.prefix+String(n)+t.config.label.suffix},n.util._deepClone=function(t,e){if("object"==typeof e){var r=!0;for(var a in e)r=!1,e.hasOwnProperty(a)&&(void 0===t&&(t=Array.isArray(e)?[]:{}),t[a]=n.util._deepClone(t[a],e[a]));r&&(t=Array.isArray(e)?[]:{})}else t=e;return t},n.util.extend=function(){if(void 0===arguments[0]||null===arguments[0])return arguments[0];for(var t=1;t<arguments.length;t++)for(var e in arguments[t])arguments[t].hasOwnProperty(e)&&(arguments[0][e]=n.util._deepClone(arguments[0][e],arguments[t][e]));return arguments[0]},n.util.getTooltipText=function(t,e,r,a){if(!t.config.tooltip.show)return"";var o=t.config.tooltip.format;return""===o?e+" ["+r+"] : "+n.util.getLabelValue(a):o.replace(/%c/gi,e).replace(/%l/gi,r).replace(/%v/gi,n.util.getLabelValue(t,a))},n.config={graph:{palette:"Default",bgcolor:"#FFFFFF",orientation:"Horizontal",max:0,min:0,custompalette:[],opacity:1,responsive:!0,align:"xMinYMin",meetOrSlice:"meet"},meta:{position:"#uv-div",caption:"",subcaption:"",hlabel:"",vlabel:"",hsublabel:"",vsublabel:"",isDownloadable:!1,downloadLabel:"Download"},dimension:{width:400,height:400},margin:{top:50,bottom:150,left:100,right:100},frame:{bgcolor:"#FFFFFF"},axis:{ticks:8,subticks:2,padding:5,minor:-10,strokecolor:"#000000",fontfamily:"Arial",fontsize:"14",fontweight:"bold",showticks:!0,showsubticks:!0,showtext:!0,showhortext:!0,showvertext:!0,opacity:.1,rotatexlabels:0},label:{fontfamily:"Arial",fontsize:"11",fontweight:"normal",strokecolor:"#000000",showlabel:!0,precision:2,prefix:"",suffix:"",formatter:void 0},tooltip:{show:!0,format:"%c [%l]: %v"},scale:{type:"linear",ordinality:.2},bar:{strokecolor:"none",fontfamily:"Arial",fontsize:"10",fontweight:"bold",textcolor:"#000"},line:{interpolation:"linear",showcircles:!0,circleradius:3.5,circleopacity:.6,fontfamily:"Arial",fontsize:"10",fontweight:"bold",textcolor:"#000",strokewidth:1.5,strokeopacity:1},area:{interpolation:"cardinal",offset:"zero",opacity:.2},pie:{fontfamily:"Arial",fontsize:"14",fontweight:"normal",fontvariant:"small-caps",fontfill:"#FFFFFF",strokecolor:"#FFFFFF",strokewidth:1},donut:{fontfamily:"Arial",fontsize:"14",fontweight:"normal",fontvariant:"small-caps",fontfill:"#000",factor:.4,strokecolor:"#FFFFFF",strokewidth:1},caption:{fontfamily:"Arial",fontsize:"14",fontweight:"bold",fontvariant:"small-caps",textdecoration:"none",hovercolor:"#696969",strokecolor:"#0000FF",textanchor:"middle",cursor:"pointer"},subCaption:{fontfamily:"Arial",fontsize:"9",fontweight:"normal",fontvariant:"normal",textdecoration:"none",textanchor:"middle"},legend:{position:"bottom",fontfamily:"Arial",fontsize:"11",fontweight:"normal",color:"#000000",strokewidth:.15,textmargin:15,symbolsize:10,inactivecolor:"#DDD",legendstart:0,legendtype:"categories",showlegends:!0,hoffset:100},effects:{hovercolor:"#FF0000",strokecolor:"none",textcolor:"#000000",duration:800,hover:400,showhovertext:!1}},n.constants={},n.constants.classes={uv:"uv",pos:"uv-div",frame:"uv-frame",panel:"uv-panel",bg:"uv-chart-bg",chart:"uv-chart",axes:"uv-axes",legend:"uv-legend",framebg:"uv-frame-bg",horaxis:"uv-hor-axis",veraxis:"uv-ver-axis",caption:"uv-caption",captiontext:"uv-caption-text",subcaption:"uv-subcaption",subcaptiontext:"uv-subcaption-text",axeslabelgroup:"uv-axes-label-group",
axeslabel:"uv-axes-label",axessublabel:"uv-axes-sub-label",legendsign:"uv-legend-sign",legendlabel:"uv-legend-label",hoverbg:"uv-hover-bg",arc:"uv-arc-",areapath:"uv-areapath-",linepath:"uv-linepath-",area:"uv-area-",line:"uv-line-",dot:"uv-dot",chartdiv:"uv-chart-div",circleticks:"circle-ticks",download:"uv-download-options"},n.constants.downloads={downloadLabel:"Download"},n.types={},n.addChart=function(t,e){n.types[t]=e},n.addChart("bar","BarGraph"),n.addChart("line","LineGraph"),n.addChart("stackedbar","StackedBarGraph"),n.addChart("stepupbar","StepUpBarGraph"),n.addChart("area","AreaGraph"),n.addChart("stackedarea","StackedAreaGraph"),n.addChart("percentbar","PercentBarGraph"),n.addChart("percentarea","PercentAreaGraph"),n.addChart("pie","PieGraph"),n.addChart("donut","DonutGraph"),n.addChart("waterfall","WaterfallGraph"),n.addChart("polararea","PolarAreaGraph"),n.chart=function(t,e,r){if(t=t.toLowerCase(),void 0!==n.types[t])return new n[n.types[t]](e,r)},n.effects={},n.effects.bar={},n.effects.bar.mouseover=function(t,e){var r=t.config,a=t.categories[e],o=t.labels[e],i=function(){t.frame.selectAll("rect.cr-"+n.util.formatClassName(a)).transition().duration(r.effects.hover).style("fill",r.effects.hovercolor).style("stroke",r.effects.strokecolor),r.effects.showhovertext&&t.frame.selectAll("text.cr-"+n.util.formatClassName(a)).transition().duration(r.effects.hover).style("fill",r.effects.textcolor).style("opacity",1)};return"categories"===r.legend.legendtype?t.effects[a].mouseover=i:t.effects[o].mouseover=i,i},n.effects.bar.mouseout=function(t,e,r){var a=t.config,o=t.categories[e],i=n.util.getColorBand(t.config,e),l=r||n.util.getColorBand(t.config,e),u=t.labels[e],s=function(){t.frame.selectAll("rect.cr-"+n.util.formatClassName(o)).transition().duration(a.effects.hover).style("fill",i).style("stroke","none"),t.frame.selectAll("text.cr-"+n.util.formatClassName(o)).transition().duration(a.effects.hover).style("fill",t.config.label.showlabel?l:"none")};return"categories"===a.legend.legendtype?t.effects[o].mouseout=s:t.effects[u].mouseout=s,s},n.effects.area={},n.effects.area.mouseover=function(t,e){var r=t.config,a=t.categories[e],o=function(){t.frame.selectAll(".cge-"+n.util.formatClassName(a)).select("path."+n.constants.classes.area+n.util.formatClassName(a)).transition().duration(r.effects.hover).style("fill",r.effects.hovercolor)};return t.effects[a].mouseover=o,o},n.effects.area.mouseout=function(t,e){var r=t.config,a=t.categories[e],o=function(){t.frame.selectAll(".cge-"+n.util.formatClassName(a)).select("path."+n.constants.classes.area+n.util.formatClassName(a)),t.frame.selectAll(".cge-"+n.util.formatClassName(a)).select("path."+n.constants.classes.area+n.util.formatClassName(a)).transition().duration(r.effects.hover).style("fill",n.util.getColorBand(r,e))};return t.effects[a].mouseout=o,o},n.effects.line={},n.effects.line.mouseover=function(t,e){var r=t.config,a=t.categories[e],o=function(){t.frame.selectAll(".cge-"+n.util.formatClassName(a)).selectAll("circle").transition().duration(r.effects.hover).style("fill",r.effects.hovercolor).style("fill-opacity",1).style("stroke",r.effects.hovercolor),t.frame.selectAll(".cge-"+n.util.formatClassName(a)).select("path").transition().duration(r.effects.hover).style("stroke",r.effects.hovercolor),r.effects.showhovertext&&t.frame.selectAll(".cge-"+n.util.formatClassName(a)).selectAll("text").transition().duration(r.effects.hover).style("fill",r.effects.textcolor)};return t.effects[a].mouseover=o,o},n.effects.line.mouseout=function(t,e,r){var a=t.config,o=t.categories[e],i=r||n.util.getColorBand(t.config,e),l=function(){t.frame.selectAll(".cge-"+n.util.formatClassName(o)).selectAll("circle").transition().duration(a.effects.hover).style("fill",i).style("fill-opacity",.6).style("stroke","#fff"),t.frame.selectAll(".cge-"+n.util.formatClassName(o)).select("path").transition().duration(a.effects.hover).style("stroke",i),t.frame.selectAll(".cge-"+n.util.formatClassName(o)).selectAll("text").transition().duration(a.effects.hover).style("fill",t.config.label.showlabel?i:"none")};return t.effects[o].mouseout=l,l},n.effects.caption={},n.effects.caption.mouseover=function(t){return function(){d3.select(this.parentNode.parentNode).select("."+n.constants.classes.hoverbg).transition().duration(t.effects.duration).style("fill",t.caption.hovercolor)}},n.effects.caption.mouseout=function(t){return function(){d3.select(this.parentNode.parentNode).select("."+n.constants.classes.hoverbg).transition().duration(t.effects.duration).style("fill",t.graph.bgcolor)}},n.effects.donut={},n.effects.donut.mouseover=function(t,e,n,r){return function(r){var a={x:e.centroid(r)[0]/5,y:e.centroid(r)[1]/5};d3.select(this.parentNode).transition().duration(n.effects.duration).attr("transform","translate("+(t.x+a.x)+","+(t.y+a.y)+")")}},n.effects.donut.mouseout=function(t,e){return function(){d3.select(this.parentNode).transition().duration(e.effects.duration).attr("transform","translate("+t.x+","+t.y+")")}},n.effects.pie={},n.effects.pie.mouseover=function(t,e,n,r){return function(t){var a={x:n.centroid(t)[0]/5,y:n.centroid(t)[1]/5};d3.select(this.parentNode).transition().duration(r.effects.duration).attr("transform","translate("+(e.x+a.x)+","+(e.y+a.y)+")")}},n.effects.pie.mouseout=function(t,e,n){return function(){d3.select(this.parentNode).transition().duration(n.effects.duration).attr("transform","translate("+e.x+","+e.y+")")}},n.effects.legend={},n.effects.legend.mouseover=function(t,e){return"categories"===t.config.legend.legendtype?t.effects.group[t.categories[e]].mouseover:t.effects.group[t.labels[e]].mouseover},n.effects.legend.mouseout=function(t,e){return"categories"===t.config.legend.legendtype?t.effects.group[t.categories[e]].mouseout:t.effects.group[t.labels[e]].mouseout},n.effects.legend.click=function(t,e,r){var a="false"!==d3.select(e).attr("disabled");r.toggleGraphGroup(t),d3.select(e).select("rect").style("fill",a?n.util.getColorBand(r.config,t):n.config.legend.inactivecolor),d3.select(e).select("text").style("fill",a?null:n.config.legend.inactivecolor),d3.select(e).attr("disabled",a?"false":"true")},n.palette={Default:["#00BBC9","#EC63AB","#AA8AE4","#83CE44","#ff8f25","#009EAA","#CA4F7F","#9C70C0","#6BAF3B"],OldDefault:["#7E6DA1","#C2CF30","#FF8900","#FE2600","#E3003F","#8E1E5F","#FE2AC2","#CCF030","#9900EC","#3A1AA8","#3932FE","#3276FF","#35B9F6","#42BC6A","#91E0CB"],Plain:["#B1EB68","#B1B9B5","#FFA16C","#9B64E7","#CEE113","#2F9CFA","#CA6877","#EC3D8C","#9CC66D","#C73640","#7D9532","#B064DC"],Android:["#33B5E5","#AA66CC","#99CC00","#FFBB33","#FF4444","#0099CC","#9933CC","#669900","#FF8800","#CC0000"],Soft:["#9ED8D2","#FFD478","#F16D9A","#A8D59D","#FDC180","#F05133","#EDED8A","#F6A0A5","#9F218B"],Simple:["#FF8181","#FFB081","#FFE081","#EFFF81","#BFFF81","#90FF81","#81FFA2","#81FFD1","#9681FF","#C281FF","#FF81DD"],Egypt:["#3A3E04","#784818","#FCFCA8","#C03C0C","#F0A830","#A8783C","#FCFCFC","#FCE460","#540C00","#C0C084","#3C303C","#1EA34A","#606C54","#F06048"],Olive:["#18240C","#3C6C18","#60A824","#90D824","#A8CC60","#789C60","#CCF030","#B4CCA8","#D8F078","#40190D","#E4F0CC"],Candid:["#AF5E14","#81400C","#E5785D","#FEBFBF","#A66363","#C7B752","#EFF1A7","#83ADB7","#528F98","#BCEDF5","#446B3D","#8BD96F","#E4FFB9"],Sulphide:["#594440","#0392A7","#FFC343","#E2492F","#007257","#B0BC4A","#2E5493","#7C2738","#FF538B","#A593A1","#EBBA86","#E2D9CA"],Lint:["#A8A878","#F0D89C","#60909C","#242418","#E49C30","#54483C","#306090","#C06C00","#C0C0C0","#847854","#6C3C00","#9C3C3C","#183C60","#FCCC00","#840000","#FCFCFC"]},n.Graph=function(t,e){var r=this;return r.id=n.util.getUniqueId(),r.graphdef=null,r.config=null,r.frame=null,r.panel=null,r.chart=null,r.bg=null,r.effects={},r.axes={hor:{group:null,scale:null,func:null,axis:null,line:null,label:null},ver:{group:null,scale:null,func:null,axis:null,line:null,label:null},meta:{min:null,max:null}},r.labels=null,r.categories=null,r.graphdef=t,r.config=n.util.extend({},n.config,e),this},n.Graph.prototype.init=function(){var t=this;return t.max().min().position(t.config.meta.position||"body").setDimensions().setFrame().setPanel().setBackground().setCaption().setSubCaption().setMetadata().setHorizontalAxis().setVerticalAxis().setEffectsObject(),t.config.meta.isDownloadable&&t.setDownloadOptions(),t.config.legend.showlegends&&t.setLegend(),t},n.Graph.prototype.setDimensions=function(){var t=this;return t.height(t.config.dimension.height).width(t.config.dimension.width).top(t.config.margin.top).bottom(t.config.margin.bottom).left(t.config.margin.left).right(t.config.margin.right),this},n.Graph.prototype.setDownloadOptions=function(){if(n.util.isDownloadSupported()){var t=this;t.download=t.panel.append("g").classed(n.constants.classes.download,!0),t.download.append("text").classed(n.constants.classes.download,!0).text(t.config.meta.downloadLabel).attr("y",-t.config.margin.top/2).attr("x",t.config.dimension.width-25).attr("text-anchor",t.config.caption.textanchor).style("font-family",t.config.caption.fontfamily).style("font-size","12").style("cursor",t.config.caption.cursor).style("stroke",t.config.caption.strokecolor).style("text-decoration","underline").on("mouseover",function(){d3.select(this).style("color","#0000FF")}).on("mouseout",function(){d3.select(this).style("color","#8D8D8D")}).on("click",function(){var e=d3.select(this);e.style("display","none"),n.util.svgToPng(t,function(){e.style("display",null)})})}},n.Graph.prototype.setFrame=function(){var t=this;return t.frame||(t.frame=d3.select(t.position()||"body").append("div").classed(n.constants.classes.chartdiv,!0).style("display","inline-block").style("width","100%").style("height","100%").append("svg")),t.frame.attr("id",n.constants.classes.uv+"-"+t.id).classed(n.constants.classes.frame,!0),!0===t.config.graph.responsive?t.frame.attr("width","100%").attr("height","100%").attr("preserveAspectRatio",t.config.graph.align+" "+t.config.graph.meetOrSlice).attr("viewBox","0 0 "+(t.width()+t.left()+t.right())+" "+(t.height()+t.top()+t.bottom())):t.frame.attr("width",t.width()+t.left()+t.right()).attr("height",t.height()+t.top()+t.bottom()),t.frame.append("rect").classed(n.constants.classes.framebg,!0).attr("width",t.width()+t.left()+t.right()).attr("height",t.height()+t.top()+t.bottom()).style("fill",t.config.frame.bgcolor),this},n.Graph.prototype.setPanel=function(){var t=this;return t.panel||(t.panel=t.frame.append("g")),t.panel.attr("id",n.constants.classes.panel+"-"+t.id).classed(n.constants.classes.panel,!0).attr("transform","translate("+t.left()+","+t.top()+")"),this},n.Graph.prototype.setBackground=function(t){var e=this;return e.bg||(e.bg=e.panel.append("rect").classed(n.constants.classes.bg,!0).attr("height",e.height()).attr("width",e.width())),e.bg.style("fill",t||e.config.graph.bgcolor),e.chart=e.panel.append("g").classed(n.constants.classes.chart,!0).style("opacity",e.config.graph.opacity),this},n.Graph.prototype.setCaption=function(){var t=this;return t.caption=t.panel.append("g").classed(n.constants.classes.caption,!0),t.caption.append("text").classed(n.constants.classes.captiontext,!0).text(t.config.meta.caption).attr("y",-t.config.margin.top/2).attr("x",t.config.dimension.width/2).attr("text-anchor",t.config.caption.textanchor).style("font-family",t.config.caption.fontfamily).style("font-size",t.config.caption.fontsize).style("font-weight",t.config.caption.fontweight).style("font-variant",t.config.caption.fontvariant).style("text-decoration",t.config.caption.textdecoration).on("mouseover",n.effects.caption.mouseover(t.config)).on("mouseout",n.effects.caption.mouseout(t.config)),this},n.Graph.prototype.setSubCaption=function(){var t=this;return t.subCaption=t.panel.append("g").classed(n.constants.classes.subcaption,!0),t.subCaption.append("text").classed(n.constants.classes.subcaptiontext,!0).text(t.config.meta.subcaption).attr("y",-t.config.margin.top/2+1*t.config.caption.fontsize).attr("x",t.config.dimension.width/2).attr("text-anchor",t.config.caption.textanchor).style("font-family",t.config.subCaption.fontfamily).style("font-size",t.config.subCaption.fontsize).style("font-weight",t.config.subCaption.fontweight).style("font-variant",t.config.subCaption.fontvariant).style("text-decoration",t.config.subCaption.textdecoration),this},n.Graph.prototype.setMetadata=function(){var t=this;return t.labels=n.util.getLabelArray(t.graphdef),t.categories=n.util.getCategoryArray(t.graphdef),this},n.Graph.prototype.setHorizontalAxis=function(){var t=this;t.graphdef;return t.axes.hor.group||(t.axes.hor.group=t.panel.append("g").classed(n.constants.classes.horaxis,!0).attr("transform","translate(0,"+t.height()+")").style("shape-rendering","crispEdges")),"Horizontal"===t.config.graph.orientation?(t.axes.hor.scale=d3.scale[t.config.scale.type]().domain(["log"===t.config.scale.type?1:t.min(),t.max()]).range([0,t.width()]),t.axes.hor.scale.nice&&t.axes.hor.scale.nice(),t.config.axis.showsubticks||(t.config.axis.subticks=0),t.axes.hor.func=d3.svg.axis().scale(t.axes.hor.scale).ticks(t.config.axis.ticks).tickSize(-t.height(),t.config.axis.minor,0).tickPadding(t.config.axis.padding).tickSubdivide(t.config.axis.subticks).orient("bottom")):(t.axes.hor.scale=d3.scale.ordinal().rangeRoundBands([0,t.width()],t.config.scale.ordinality),t.axes.hor.func=d3.svg.axis().scale(t.axes.hor.scale).tickPadding(t.config.axis.padding).orient("bottom"),t.config.axis.showtext&&t.config.axis.showhortext||t.axes.hor.func.tickSize(0)),t.config.axis.showtext&&t.config.axis.showhortext||t.axes.hor.func.tickFormat(function(t){return""}),this},n.Graph.prototype.setVerticalAxis=function(){var t=this;t.graphdef;return t.axes.ver.group||(t.axes.ver.group=t.panel.append("g").classed(n.constants.classes.veraxis,!0).style("shape-rendering","crispEdges")),"Vertical"===t.config.graph.orientation?(t.axes.ver.scale=d3.scale[t.config.scale.type]().domain([t.max(),"log"===t.config.scale.type?1:t.min()]).range([0,t.height()]),t.axes.ver.scale.nice&&t.axes.ver.scale.nice(),t.config.axis.showsubticks||(t.config.axis.subticks=0),t.axes.ver.func=d3.svg.axis().scale(t.axes.ver.scale).ticks(t.config.axis.ticks).tickSize(-t.width(),t.config.axis.minor,0).tickPadding(t.config.axis.padding).tickSubdivide(t.config.axis.subticks).orient("left")):(t.axes.ver.scale=d3.scale.ordinal().rangeRoundBands([0,t.height()],t.config.scale.ordinality),t.axes.ver.func=d3.svg.axis().scale(t.axes.ver.scale).tickPadding(t.config.axis.padding).orient("left"),t.config.axis.showtext&&t.config.axis.showvertext||t.axes.ver.func.tickSize(0)),t.config.axis.showtext&&t.config.axis.showvertext||t.axes.ver.func.tickFormat(function(t){return""}),this},n.Graph.prototype.setEffectsObject=function(){for(var t=this,e="categories"===t.config.legend.legendtype?t.categories:t.labels,n=0;n<e.length;n++)t.effects[e[n]]={};return t},n.Graph.prototype.drawHorizontalAxis=function(){var t=this;return t.axes.hor.axis=t.axes.hor.group.append("g").style("font-family",t.config.label.fontfamily).style("font-size",t.config.label.fontsize).style("font-weight",t.config.label.fontweight).call(t.axes.hor.func),0!=t.config.axis.rotatexlabels&&t.axes.hor.axis.selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").attr("transform",function(e){return"rotate("+t.config.axis.rotatexlabels+")"}),t.config.axis.showticks&&t.axes.hor.axis.selectAll("line").style("stroke",t.config.axis.strokecolor).style("opacity",t.config.axis.opacity),t.axes.hor.axis.selectAll("path").style("fill","none"),t.axes.hor.line=t.panel.append("line").classed(n.constants.classes.horaxis,!0).attr("y1","Horizontal"===t.config.graph.orientation?t.height():t.axes.ver.scale(0)).attr("y2","Horizontal"===t.config.graph.orientation?t.height():t.axes.ver.scale(0)).attr("x1","0").attr("x2",t.width()).style("stroke",t.config.axis.strokecolor),t.axes.hor.label=t.axes.hor.group.append("g").classed(n.constants.classes.axeslabelgroup,!0).attr("transform","translate("+t.width()/2+","+(1*t.config.margin.bottom/4+1*t.config.label.fontsize)+")"),t.axes.hor.label.append("text").attr("display","block").classed(n.constants.classes.axeslabel,!0).classed("cal",!0).attr("text-anchor","middle").style("font-size",t.config.axis.fontsize).style("font-family",t.config.axis.fontfamily).text(t.config.meta.hlabel),t.axes.hor.label.append("text").attr("display","block").attr("y",1*t.config.axis.fontsize).attr(n.constants.classes.axessublabel,!0).classed("casl",!0).attr("text-anchor","middle").style("font-size",t.config.axis.fontsize-2).style("font-family",t.config.axis.fontfamily).text(t.config.meta.hsublabel),this},n.Graph.prototype.drawVerticalAxis=function(){var t=this;return t.axes.ver.axis=t.axes.ver.group.append("g").classed(n.constants.classes.axes,!0).style("font-family",t.config.label.fontfamily).style("font-size",t.config.label.fontsize).style("font-weight",t.config.label.fontweight).call(t.axes.ver.func),t.config.axis.showticks&&t.axes.ver.axis.selectAll("line").style("stroke",t.config.axis.strokecolor).style("opacity",t.config.axis.opacity),t.axes.ver.axis.selectAll("path").style("fill","none"),t.axes.ver.line=t.panel.append("line").classed(n.constants.classes.veraxis,!0).attr("x1","Horizontal"===t.config.graph.orientation?t.axes.hor.scale(0):0).attr("x2","Horizontal"===t.config.graph.orientation?t.axes.hor.scale(0):0).attr("y1",0).attr("y2",t.height()).style("stroke",t.config.axis.strokecolor),t.axes.ver.label=t.axes.ver.group.append("g").attr("transform","translate("+-4*t.config.margin.left/5+","+t.height()/2+")rotate(270)"),t.axes.ver.label.append("text").classed(n.constants.classes.axeslabel,!0).attr("text-anchor","middle").classed("cal",!0).style("font-family",t.config.axis.fontfamily).style("font-size",t.config.axis.fontsize).text(t.config.meta.vlabel),t.axes.ver.label.append("text").classed(n.constants.classes.axessublabel,!0).attr("text-anchor","middle").attr("y",+t.config.axis.fontsize).classed("casl",!0).style("font-family",t.config.axis.fontfamily).style("font-size",t.config.axis.fontsize-2).text(t.config.meta.vsublabel),this},n.Graph.prototype.setLegend=function(){var t=this,e=t.panel.append("g").classed(n.constants.classes.legend,!0).attr("transform",function(e,n){if("right"===t.config.legend.position)return"translate("+t.width()+", 10)";if("bottom"===t.config.legend.position){return"translate(0, "+(t.height()+t.config.margin.bottom/2+Number(t.config.axis.fontsize))+")"}});return t.legends=e.selectAll("g").data("categories"===t.config.legend.legendtype?t.categories:t.labels),t.legends.enter().append("g").attr("transform",function(e,n){if("right"===t.config.legend.position)return"translate(10,"+10*(2*n-1)+")";if("bottom"===t.config.legend.position){var r=t.config.legend.hoffset,a=r*n-r*Math.floor(t.config.dimension.width/r)*t.config.legend.legendstart,o=20*t.config.legend.legendstart;return a+r>=t.config.dimension.width&&(t.config.legend.legendstart=t.config.legend.legendstart+1,a=r*n-r*Math.floor(t.config.dimension.width/r)*t.config.legend.legendstart,o=20*t.config.legend.legendstart),"translate("+a+","+o+")"}}).attr("class",function(e,r){var a="categories"===t.config.legend.legendtype?t.categories[r]:t.labels[r];return n.util.getClassName(this,"cl-"+a)}).attr("disabled","false").on("mouseover",function(e,n){t.effects[e].mouseover&&"function"==typeof t.effects[e].mouseover&&t.effects[e].mouseover()}).on("mouseout",function(e,n){t.effects[e].mouseout&&"function"==typeof t.effects[e].mouseout&&t.effects[e].mouseout()}).on("click",function(e,r){n.effects.legend.click(r,this,t)}),t.legends.append("rect").classed(n.constants.classes.legendsign,!0).attr("height",t.config.legend.symbolsize).attr("width",t.config.legend.symbolsize).style("fill",function(e,r){return n.util.getColorBand(t.config,r)}).style("stroke","none"),t.legends.append("text").classed(n.constants.classes.legendlabel,!0).text(function(e,n){return"categories"===t.config.legend.legendtype?t.categories[n]:t.labels[n]}).attr("dx",t.config.legend.textmargin).attr("dy",".71em").attr("text-anchor","start").style("stroke",t.config.legend.color).style("fill",t.config.legend.color).style("stroke-width",t.config.legend.strokewidth).style("font-family",t.config.legend.fontfamily).style("font-size",t.config.legend.fontsize).style("font-weight",t.config.legend.fontweight),this},n.Graph.prototype.finalize=function(t){var e=this;return e.drawHorizontalAxis().drawVerticalAxis(),e.frame.selectAll("text").style("cursor","default"),t&&console.log(e),this},n.Graph.prototype.remove=function(){return this.frame.remove(),this},n.Graph.prototype.removeCaption=function(){return this.caption.remove(),this},n.Graph.prototype.removeLegend=function(){return this.legends[0]&&this.legends[0].parentNode.remove(),this},n.Graph.prototype.removePanel=function(){return this.panel.remove(),this},n.Graph.prototype.removeHorAxis=function(){return this.panel.selectAll("g."+n.constants.classes.horaxis+" >*").remove(),this.panel.selectAll("line."+n.constants.classes.horaxis).remove(),this},n.Graph.prototype.removeVerAxis=function(){return this.panel.selectAll("g."+n.constants.classes.veraxis+" >*").remove(),this.panel.selectAll("line."+n.constants.classes.veraxis).remove(),this},n.Graph.prototype.width=function(t){return t?(this.config.dimension.width=t,this):this.config.dimension.width},n.Graph.prototype.height=function(t){return t?(this.config.dimension.height=t,this):this.config.dimension.height},n.Graph.prototype.top=function(t){return t?(this.config.margin.top=t,this):this.config.margin.top},n.Graph.prototype.bottom=function(t){return t?(this.config.margin.bottom=t,this):this.config.margin.bottom},n.Graph.prototype.left=function(t){return t?(this.config.margin.left=t,this):this.config.margin.left},n.Graph.prototype.right=function(t){return t?(this.config.margin.right=t,this):this.config.margin.right},n.Graph.prototype.position=function(t){return t?(this.config.meta.position=t,this):this.config.meta.position},n.Graph.prototype.caption=function(t){return t?(this.config.meta.caption=t,this):this.config.meta.caption},n.Graph.prototype.subCaption=function(t){return t?(this.config.meta.subCaption=t,this):this.config.meta.caption},n.Graph.prototype.isDownloadable=function(t){return t?(this.config.meta.isDownload=t,this):this.config.meta.isDownload},n.Graph.prototype.max=function(){return null!==this.axes.meta.max?this.axes.meta.max:(this.axes.meta.max=n.util.getMax(this.graphdef,this.graphdef.stepup),this)},n.Graph.prototype.min=function(){return null!==this.axes.meta.min?this.axes.meta.min:(this.axes.meta.min=n.util.getMin(this.graphdef,this.graphdef.stepup),this)},n.Graph.prototype.toggleGraphGroup=function(t){var e=this,r=e.categories[t],a=e.frame.select("g.cge-"+n.util.formatClassName(r)).style("display");n.util.getColorBand(e.config,t);return e.frame.selectAll("g.cge-"+n.util.formatClassName(r)).style("display","none"===a?null:"none"),this},n.AreaGraph=function(t,e){var r=this;n.Graph.call(r,t,e).setDefaults().init(),r.areagroups=[],r.dataset=n.util.getDataArray(r.graphdef);var a,o,i,l,u=r.graphdef.dataset[r.graphdef.categories[0]];for(r.axes["Horizontal"===r.config.graph.orientation?"ver":"hor"].scale.domain(u.map(function(t){return t.name})),i=0,l=r.dataset.length;i<l;i+=1)o=r.chart.append("g").classed("cg-"+n.util.formatClassName(r.categories[i]),!0).append("g").classed("cge-"+n.util.formatClassName(r.categories[i]),!0).datum(r.dataset[i]),a={path:o,linefunc:void 0,areafunc:void 0,line:void 0,area:void 0},r["draw"+r.config.graph.orientation+"Area"](a,i),r.areagroups.push(a);r.finalize()},n.AreaGraph.prototype=n.util.inherits(n.Graph),n.AreaGraph.prototype.setDefaults=function(){return this.graphdef.stepup="normal",this},n.AreaGraph.prototype.drawHorizontalArea=function(t,e){var r=this,a=n.util.getColorBand(r.config,e);r.axes.ver.scale.rangePoints([0,r.height()]),t.linefunc=d3.svg.line().x(function(t){return r.axes.hor.scale(t.value)}).y(function(t){return r.axes.ver.scale(t.name)+r.axes.ver.scale.rangeBand()/2}).interpolate(r.config.area.interpolation),t.areafunc=d3.svg.area().x0(r.axes.hor.scale(0)).x1(t.linefunc.x()).y(t.linefunc.y()).interpolate(r.config.area.interpolation),t.area=t.path.append("svg:path").classed(n.constants.classes.areapath+e,!0).attr("d",t.areafunc).style("opacity",r.config.area.opacity).style("-moz-opacity",r.config.area.opacity).style("fill",a),t.line=t.path.append("svg:path").classed(n.constants.classes.linepath+e,!0).attr("d",t.linefunc).style("stroke",a).style("fill","none"),t.path.selectAll("."+n.constants.classes.dot).data(r.dataset[e]).enter().append("circle").classed(n.constants.classes.dot,!0).attr("cx",t.linefunc.x()).attr("cy",t.linefunc.y()).attr("r",3.5).style("fill",a)},n.AreaGraph.prototype.drawVerticalArea=function(t,e){var r=this,a=n.util.getColorBand(r.config,e);r.axes.hor.scale.rangePoints([0,r.width()]),t.linefunc=d3.svg.line().x(function(t){return r.axes.hor.scale(t.name)+r.axes.hor.scale.rangeBand()/2}).y(function(t){return r.axes.ver.scale(t.value)}).interpolate(r.config.area.interpolation),t.areafunc=d3.svg.area().x(t.linefunc.x()).y0(t.linefunc.y()).y1(r.axes.ver.scale(0)).interpolate(r.config.area.interpolation),t.area=t.path.append("svg:path").classed(n.constants.classes.areapath+e,!0).attr("d",t.areafunc).style("opacity",r.config.area.opacity).style("-moz-opacity",r.config.area.opacity).style("fill",a),t.line=t.path.append("svg:path").classed(n.constants.classes.linepath+e,!0).attr("d",t.linefunc).style("stroke",a).style("fill","none"),t.path.selectAll("."+n.constants.classes.dot).data(r.dataset[e]).enter().append("circle").classed(n.constants.classes.dot,!0).attr("cx",t.linefunc.x()).attr("cy",t.linefunc.y()).attr("r",3.5).style("fill",a)},n.BarGraph=function(t,e){var r=this;n.Graph.call(r,t,e).setDefaults().init(),r.bargroups={},r.axes["Horizontal"===r.config.graph.orientation?"ver":"hor"].scale.domain(r.labels);var a,o,i=r.categories.length;for(a=0;a<i;a+=1)o=r.categories[a],r.bargroups[o]=r.chart.append("g").classed("cg-"+n.util.formatClassName(o),!0),r["draw"+r.config.graph.orientation+"Bars"](a);r.finalize()},n.BarGraph.prototype=n.util.inherits(n.Graph),n.BarGraph.prototype.setDefaults=function(){return this.graphdef.stepup="normal",this},n.BarGraph.prototype.drawHorizontalBars=function(t){var e=this,r=n.util.getColorBand(this.config,t),a=e.categories.length,o=e.bargroups[e.categories[t]].selectAll("g").data(e.graphdef.dataset[e.categories[t]]).enter().append("g").classed("cge-"+n.util.formatClassName(e.categories[t]),!0).attr("transform",function(t){if(t.value<0)return"scale(-1,1)"});o.append("rect").classed(n.util.formatClassName(e.categories[t]),!0).classed("cr-"+n.util.formatClassName(e.categories[t]),!0).attr("height",e.axes.ver.scale.rangeBand()/a).attr("x",function(t){return t.value<0?-e.axes.hor.scale(0):e.axes.hor.scale(0)}).attr("y",function(t){return e.axes.ver.scale(t.name)}).attr("width",0).style("stroke",e.config.bar.strokecolor).style("fill",r).transition().duration(e.config.effects.duration).delay(function(t,n){return n*e.config.effects.duration}).attr("width",function(t){return e.axes.hor.scale(Math.abs(t.value))-e.axes.hor.scale(0)}).call(n.util.endAll,function(r,a){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",n.effects.bar.mouseover(e,t)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",n.effects.bar.mouseout(e,t)),"function"==typeof e.config.graph.clickCallback&&d3.select(this.parentNode.parentNode).selectAll("rect").on("click",function(t){e.config.graph.clickCallback.apply(null,[t])})}),o.append("text").attr("x",function(t){return e.axes.hor.scale(0)}).attr("y",function(t){return e.axes.ver.scale(t.name)+e.axes.ver.scale.rangeBand()/a/2}).attr("dx",function(t){return t.value<0?"-20px":"4px"}).attr("dy",".35em").attr("text-anchor","start").classed("cr-"+n.util.formatClassName(e.categories[t]),!0).style("fill",e.config.label.showlabel?n.util.getColorBand(e.config,t):"none").style("font-family",e.config.bar.fontfamily).style("font-size",e.config.bar.fontsize).style("font-weight",e.config.bar.fontweight).style("transform",function(t){return t.value<0?"scale(-1,1)":"scale(1,1)"}).style("opacity",0).text(function(t){return n.util.getLabelValue(e,t)}).transition().duration(e.config.effects.duration).delay(function(t,n){return n*e.config.effects.duration}).style("opacity",1).attr("x",function(t){return e.axes.hor.scale(t.value)}),o.append("svg:title").text(function(r,a){return n.util.getTooltipText(e,e.categories[t],e.labels[a],r)}),e.bargroups[e.categories[t]].attr("transform","translate(0,"+t*e.axes.ver.scale.rangeBand()/a+")")},n.BarGraph.prototype.drawVerticalBars=function(t){var e=this,r=n.util.getColorBand(this.config,t),a=e.categories.length,o=e.bargroups[e.categories[t]].selectAll("g").data(e.graphdef.dataset[e.categories[t]]).enter().append("g").classed("cge-"+n.util.formatClassName(e.categories[t]),!0).attr("transform",function(t){if(t.value<0)return"scale(1, -1)"});o.append("rect").classed(n.util.formatClassName(e.categories[t]),!0).classed("cr-"+n.util.formatClassName(e.categories[t]),!0).attr("height",0).attr("width",e.axes.hor.scale.rangeBand()/a).attr("x",function(t){return e.axes.hor.scale(t.name)}).attr("y",function(t){return(t.value<0?-1:1)*(e.height()-e.axes.ver.scale(0))}).style("stroke",e.config.bar.strokecolor).style("fill",r).transition().duration(e.config.effects.duration).delay(t*e.config.effects.duration).attr("height",function(t){return Math.abs(e.axes.ver.scale(0)-e.axes.ver.scale(t.value))}).call(n.util.endAll,function(r,a){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",n.effects.bar.mouseover(e,t)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",n.effects.bar.mouseout(e,t)),"function"==typeof e.config.graph.clickCallback&&d3.select(this.parentNode.parentNode).selectAll("rect").on("click",function(t){e.config.graph.clickCallback.apply(null,[t])})}),o.append("text").attr("transform",function(t){return t.value<0?"scale(1,1)":"scale(1,-1)"}).attr("x",function(t){return e.axes.hor.scale(t.name)+e.axes.hor.scale.rangeBand()/a/2}).attr("y",function(t){return e.height()-e.axes.ver.scale(0)}).attr("dx",0).attr("dy",function(t){return t.value<0?"2em":".35em"}).attr("text-anchor","middle").classed("cr-"+n.util.formatClassName(e.categories[t]),!0).style("fill",e.config.label.showlabel?n.util.getColorBand(e.config,t):"none").style("font-family",e.config.bar.fontfamily).style("font-size",e.config.bar.fontsize).style("font-weight",e.config.bar.fontweight).style("opacity",0).text(function(t){return n.util.getLabelValue(e,t)}).transition().duration(e.config.effects.duration).delay(t*e.config.effects.duration).style("opacity",1).attr("y",function(t){return-(e.height()-e.axes.ver.scale(t.value))-10}),o.append("svg:title").text(function(r,a){return n.util.getTooltipText(e,e.categories[t],e.labels[a],r)}),e.bargroups[e.categories[t]].attr("transform","translate("+t*e.axes.hor.scale.rangeBand()/a+","+e.height()+") scale(1,-1)")},n.DonutGraph=function(t,e){var r=this;n.Graph.call(r,t,e).setDefaults().init(),r.radius=2*Math.min(r.height(),r.width())/5,r.center={x:r.width()/2,y:r.height()/2},r.category=t.categories[0];var a=n.util.getCategoryData(r.graphdef,[r.category]),o=d3.svg.arc().innerRadius(r.radius*r.config.donut.factor).outerRadius(r.radius),i=d3.layout.pie();r.chart.data(a),r.arcs=r.chart.selectAll("g.arc").data(i).enter().append("g").classed(n.constants.classes.arc+n.util.formatClassName(r.category),!0).attr("transform","translate("+r.center.x+","+r.center.y+")"),r.arcs.append("path").attr("d",o).style("fill",function(t,e){return n.util.getColorBand(r.config,e)}).style("stroke",r.config.donut.strokecolor).style("stroke-width",r.config.donut.strokewidth).on("mouseover",n.effects.donut.mouseover(r.center,o,r.config)).on("mouseout",n.effects.donut.mouseout(r.center,r.config)),"function"==typeof r.config.graph.clickCallback&&r.arcs.on("click",function(t){r.config.graph.clickCallback.apply(null,[t])
}),r.arcs.append("text").attr("transform",function(t){return"translate("+o.centroid(t)+")"}).attr("dy",".35em").attr("text-anchor","middle").style("fill",r.config.label.showlabel?r.config.donut.fontfill:"none").style("font-family",r.config.donut.fontfamily).style("font-size",r.config.donut.fontsize).style("font-weight",r.config.donut.fontweight).style("font-variant",r.config.donut.fontvariant).text(function(t){return n.util.getLabelValue(r,t)}),r.arcs.append("svg:title").text(function(t,e){return n.util.getTooltipText(r,r.category,r.labels[e],t)})},n.DonutGraph.prototype=n.util.inherits(n.Graph),n.DonutGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup="normal",t.config.legend.legendtype="labels",this},n.LineGraph=function(t,e){var r=this;n.Graph.call(r,t,e).setDefaults().init(),r.linegroups={},r.dataset=n.util.getDataArray(r.graphdef);var a,o,i,l=r.categories.length,u=r.labels;for(r.axes["Horizontal"===r.config.graph.orientation?"ver":"hor"].scale.domain(u),i=0;i<l;i+=1)o=r.chart.append("g").classed("cg-"+n.util.formatClassName(r.categories[i]),!0).append("g").classed("cge-"+n.util.formatClassName(r.categories[i]),!0).datum(r.dataset[i]),a={path:o,func:void 0},r["draw"+r.config.graph.orientation+"Lines"](a,i),r.linegroups[r.categories[i]]=a;r.finalize()},n.LineGraph.prototype=n.util.inherits(n.Graph),n.LineGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup="normal",t.config.scale.ordinality=0,this},n.LineGraph.prototype.drawHorizontalLines=function(t,e){var r=this,a=r.axes,o=(r.config,n.util.getColorBand(r.config,e));return r.axes.ver.scale.rangePoints([0,r.height()]),t.func=d3.svg.line().x(function(t){return a.hor.scale(t.value)}).y(function(t){return a.ver.scale(t.name)+a.ver.scale.rangeBand()/2}).interpolate(n.config.line.interpolation),t.path.append("path").classed("cr-"+n.util.formatClassName(r.categories[e]),!0).attr("d",t.func).style("fill","none").style("stroke",o).style("stroke-width",r.config.line.strokewidth).style("stroke-opacity",r.config.line.strokeopacity).transition().duration(3*r.config.effects.duration).delay(2*e*r.config.effects.duration).style("stroke-opacity",1).call(n.util.endAll,function(t,a){d3.select(this.parentNode.parentNode).selectAll("path").on("mouseover",n.effects.line.mouseover(r,e)),d3.select(this.parentNode.parentNode).selectAll("path").on("mouseout",n.effects.line.mouseout(r,e)),d3.select(this.parentNode.parentNode).selectAll("circle").on("mouseover",n.effects.line.mouseover(r,e)),d3.select(this.parentNode.parentNode).selectAll("circle").on("mouseout",n.effects.line.mouseout(r,e))}),r.config.line.showcircles&&t.path.selectAll("circle").data(r.dataset[e]).enter().append("circle").classed("cr-"+n.util.formatClassName(r.categories[e]),!0).attr("cx",t.func.x()).attr("cy",t.func.y()).attr("r",r.config.line.circleradius).style("fill",o).style("fill-opacity",r.config.line.circleopacity).style("stroke","#fff").append("svg:title").text(function(t,a){return n.util.getTooltipText(r,r.categories[e],r.labels[a],t)}),t.path.selectAll("text").data(r.dataset[e]).enter().append("text").attr("x",function(t){return a.hor.scale(t.value)}).attr("y",function(t){return a.ver.scale(t.name)+a.ver.scale.rangeBand()/2}).attr("dx",10).attr("dy",".35em").attr("text-anchor","start").style("opacity",0).classed("cr-"+n.util.formatClassName(r.categories[e]),!0).style("fill",r.config.label.showlabel?n.util.getColorBand(r.config,e):"none").style("font-family",r.config.line.fontfamily).style("font-size",r.config.line.fontsize).style("font-weight",r.config.line.fontweight).text(function(t){return n.util.getLabelValue(r,t)}).transition().duration(3*r.config.effects.duration).delay(2*e*r.config.effects.duration).style("opacity",1),this},n.LineGraph.prototype.drawVerticalLines=function(t,e){var r=this,a=r.axes,o=(r.config,n.util.getColorBand(r.config,e));return r.axes.hor.scale.rangePoints([0,r.width()]),t.func=d3.svg.line().x(function(t){return a.hor.scale(t.name)+a.hor.scale.rangeBand()/2}).y(function(t){return a.ver.scale(t.value)}).interpolate(n.config.line.interpolation),t.path.append("path").attr("d",t.func).classed("cr-"+n.util.formatClassName(r.categories[e]),!0).style("fill","none").style("stroke",o).style("stroke-width",r.config.line.strokewidth).style("stroke-opacity",r.config.line.strokeopacity).transition().duration(r.config.effects.duration).delay(2*e*r.config.effects.duration).style("stroke-opacity",1).call(n.util.endAll,function(t,a){d3.select(this.parentNode.parentNode).selectAll("path").on("mouseover",n.effects.line.mouseover(r,e)),d3.select(this.parentNode.parentNode).selectAll("path").on("mouseout",n.effects.line.mouseout(r,e)),d3.select(this.parentNode.parentNode).selectAll("circle").on("mouseover",n.effects.line.mouseover(r,e)),d3.select(this.parentNode.parentNode).selectAll("circle").on("mouseout",n.effects.line.mouseout(r,e))}),r.config.line.showcircles&&t.path.selectAll("circle").data(r.dataset[e]).enter().append("circle").attr("cx",t.func.x()).attr("cy",t.func.y()).attr("r",r.config.line.circleradius).classed("cr-"+n.util.formatClassName(r.categories[e]),!0).style("fill",o).style("fill-opacity",r.config.line.circleopacity).style("stroke","#fff").append("svg:title").text(function(t,a){return n.util.getTooltipText(r,r.categories[e],r.labels[a],t)}),t.path.selectAll("text").data(r.dataset[e]).enter().append("text").attr("x",function(t){return a.hor.scale(t.name)+a.hor.scale.rangeBand()/2}).attr("y",function(t){return a.ver.scale(t.value)-20}).attr("dx",0).attr("dy",".71em").attr("text-anchor","middle").classed("cr-"+n.util.formatClassName(r.categories[e]),!0).style("fill",r.config.label.showlabel?n.util.getColorBand(r.config,e):"none").style("font-family",r.config.line.fontfamily).style("font-size",r.config.line.fontsize).style("font-weight",r.config.line.fontweight).style("opacity",0).text(function(t){return n.util.getLabelValue(r,t)}).transition().duration(3*r.config.effects.duration).delay(2*e*r.config.effects.duration).style("opacity",1),this},n.PercentAreaGraph=function(t,e){var r=this;n.Graph.call(r,t,e).setDefaults().init();var a=d3.layout.stack().offset("zero")(r.categories.map(function(e){return t.dataset[e].map(function(t){return{x:t.name,y:+t.value}})})),o=r.labels;r.categories;r.axes["Horizontal"===r.config.graph.orientation?"ver":"hor"].scale.domain(o),r.areagroup=r.chart.selectAll("g.areagroup").data(a).enter().append("g").attr("class",function(t,e){return n.util.getClassName(this,"cge-"+r.categories[e])}),r["draw"+r.config.graph.orientation+"Area"](),r.finalize()},n.PercentAreaGraph.prototype=n.util.inherits(n.Graph),n.PercentAreaGraph.prototype.setDefaults=function(){return this.graphdef.stepup="percent",this},n.PercentAreaGraph.prototype.drawHorizontalArea=function(){var t=this,e=t.axes,r=t.categories,a=t.config,o=n.util.getSumUpArray(t.graphdef);e.ver.scale.rangePoints([0,t.height()]);for(var i=0;i<r.length;i+=1)n.effects.area.mouseover(t,i),n.effects.area.mouseout(t,i);t.areagroup.append("path").attr("class",function(t,e){return n.util.getClassName(this,n.constants.classes.area+n.util.formatClassName(r[e]))}).style("fill",function(t,e){return n.util.getColorBand(a,e)}).attr("d",d3.svg.area().y(function(t){return e.ver.scale(t.x)+e.ver.scale.rangeBand()/2}).x0(function(t,r){return e.hor.scale(n.util.getPercentage(t.y0,o[r]))}).x1(function(t,r){return e.hor.scale(n.util.getPercentage(t.y0+t.y,o[r]))}).interpolate(t.config.area.interpolation)).on("mouseover",function(e,n){t.effects[r[n]].mouseover()}).on("mouseout",function(e,n){t.effects[r[n]].mouseout()}),t.areagroup.append("path").attr("class",function(t,e){return n.util.getClassName(this,n.constants.classes.line+n.util.formatClassName(r[e]))}).style("stroke","white").style("fill","none").style("stroke-width",2).attr("d",d3.svg.line().y(function(t){return e.ver.scale(t.x)+e.ver.scale.rangeBand()/2}).x(function(t,r){return e.hor.scale(n.util.getPercentage(t.y0+t.y,o[r]))}).interpolate(t.config.area.interpolation))},n.PercentAreaGraph.prototype.drawVerticalArea=function(){var t=this,e=t.axes,r=t.categories,a=t.config,o=n.util.getSumUpArray(t.graphdef);e.hor.scale.rangePoints([0,t.width()]);for(var i=0;i<r.length;i+=1)n.effects.area.mouseover(t,i),n.effects.area.mouseout(t,i);t.areagroup.append("path").attr("class",function(t,e){return n.util.getClassName(this,n.constants.classes.area+n.util.formatClassName(r[e]))}).style("fill",function(t,e){return n.util.getColorBand(a,e)}).attr("d",d3.svg.area().x(function(t){return e.hor.scale(t.x)+e.hor.scale.rangeBand()/2}).y0(function(t,r){return e.ver.scale(n.util.getPercentage(t.y0,o[r]))}).y1(function(t,r){return e.ver.scale(n.util.getPercentage(t.y0+t.y,o[r]))}).interpolate(t.config.area.interpolation)).on("mouseover",function(e,n){t.effects[r[n]].mouseover()}).on("mouseout",function(e,n){t.effects[r[n]].mouseout()}),t.areagroup.append("path").attr("class",function(t,e){return n.util.getClassName(this,n.constants.classes.line+n.util.formatClassName(r[e]))}).style("stroke","white").style("fill","none").style("stroke-width",2).attr("d",d3.svg.line().x(function(t,n){return e.hor.scale(t.x)+e.hor.scale.rangeBand()/2}).y(function(t,r){return e.ver.scale(n.util.getPercentage(t.y0+t.y,o[r]))}).interpolate(t.config.area.interpolation))},n.PercentBarGraph=function(t,e){var r=this;n.Graph.call(r,t,e).setDefaults().init(),r.bargroups=[];var a,o,i,l,u=r.labels,s=u.map(function(t){return 0}),c=u.map(function(t){return 0});for(r.axes["Horizontal"===r.config.graph.orientation?"ver":"hor"].scale.domain(u),i=0,l=r.categories.length;i<l;i+=1)n.util.getColorBand(r.config,i),a=r.chart.append("g").classed("cg-"+r.categories[i],!0),o=a.selectAll("g").data(r.graphdef.dataset[r.categories[i]]).enter().append("g").classed("cge-"+n.util.formatClassName(r.categories[i]),!0),r["draw"+n.util.getPascalCasedName(r.config.graph.orientation)+"Bars"](o,s,c,i),"Vertical"===r.config.graph.orientation&&a.attr("transform","translate(0,"+2*r.height()+") scale(1,-1)"),r.bargroups.push(a);r.finalize()},n.PercentBarGraph.prototype=n.util.inherits(n.Graph),n.PercentBarGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup="percent",t.config.scale.ordinality=0,this},n.PercentBarGraph.prototype.drawHorizontalBars=function(t,e,r,a){var o=this,i=this.axes,l=n.util.getColorBand(this.config,a),u=(this.config,n.util.getSumUpArray(this.graphdef));t.append("rect").attr("height",i.ver.scale.rangeBand()).attr("width",0).attr("x",function(t,r){var a=i.hor.scale(n.util.getPercentage(e[r],u[r]));return e[r]+=t.value,a}).attr("y",function(t){return i.ver.scale(t.name)}).classed("cr-"+n.util.formatClassName(o.categories[a]),!0).style("stroke","none").style("fill",l).transition().duration(o.config.effects.duration).delay(a*o.config.effects.duration).attr("width",function(t,e){return i.hor.scale(n.util.getPercentage(t.value,u[e]))}).call(n.util.endAll,function(t,e){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",n.effects.bar.mouseover(o,a,o.config.effects.textcolor)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",n.effects.bar.mouseout(o,a,o.config.effects.textcolor))}),t.append("text").attr("y",function(t){return i.ver.scale(t.name)+i.ver.scale.rangeBand()/2}).attr("dx",0).attr("dy",".35em").attr("text-anchor","end").classed("cr-"+n.util.formatClassName(o.categories[a]),!0).style("fill",o.config.label.showlabel?o.config.effects.textcolor:"none").style("font-family",this.config.bar.fontfamily).style("font-size",this.config.bar.fontsize).style("font-weight",this.config.bar.fontweight).text(function(t,r){return i.hor.scale(n.util.getPercentage(e[r],u[r]))>15?String(Math.round(n.util.getPercentage(t.value,u[r]))):null}).transition().duration(o.config.effects.duration).delay(a*o.config.effects.duration).attr("x",function(t,e){return r[e]+=t.value,i.hor.scale(n.util.getPercentage(r[e],u[e]))-5})},n.PercentBarGraph.prototype.drawVerticalBars=function(t,e,r,a){var o=this,i=this.height(),l=this.axes,u=n.util.getColorBand(this.config,a),s=(this.config,n.util.getSumUpArray(this.graphdef));t.append("rect").attr("height",0).attr("width",l.hor.scale.rangeBand()).attr("x",function(t){return l.hor.scale(t.name)}).attr("y",function(t,r){var a=l.ver.scale(n.util.getPercentage(e[r],s[r]));return e[r]-=t.value,a}).classed("cr-"+n.util.formatClassName(o.categories[a]),!0).style("stroke","none").style("fill",u).transition().duration(o.config.effects.duration).delay(a*o.config.effects.duration).attr("height",function(t,e){return i-l.ver.scale(n.util.getPercentage(t.value,s[e]))}).call(n.util.endAll,function(t,e){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",n.effects.bar.mouseover(o,a,o.config.effects.textcolor)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",n.effects.bar.mouseout(o,a,o.config.effects.textcolor))}),t.append("text").attr("transform","scale(1,-1)").attr("x",function(t){return l.hor.scale(t.name)+l.hor.scale.rangeBand()/2}).attr("y",5-i).attr("dy",".71em").attr("text-anchor","middle").classed("cr-"+n.util.formatClassName(o.categories[a]),!0).style("fill",o.config.label.showlabel?o.config.effects.textcolor:"none").style("font-family",this.config.bar.fontfamily).style("font-size",this.config.bar.fontsize).style("font-weight",this.config.bar.fontweight).text(function(t,e){return i-l.ver.scale(n.util.getPercentage(t.value,s[e]))>15?String(Math.round(n.util.getPercentage(t.value,s[e]))):null}).transition().duration(o.config.effects.duration).delay(a*o.config.effects.duration).attr("y",function(t,e){return r[e]+=t.value,5-(2*i-l.ver.scale(n.util.getPercentage(r[e],s[e])))})},n.PieGraph=function(t,e){var r=this;n.Graph.call(r,t,e).setDefaults().init(),r.radius=2*Math.min(r.height(),r.width())/5,r.center={x:r.width()/2,y:r.height()/2},r.category=t.categories[0];var a=n.util.getCategoryData(r.graphdef,[r.category]),o=d3.svg.arc().innerRadius(0).outerRadius(r.radius),i=d3.layout.pie();r.chart.data(a),r.arcs=r.chart.selectAll("g.arc").data(i).enter().append("g").classed(n.constants.classes.arc+n.util.formatClassName(r.category),!0).attr("class",function(t,e){return n.util.getClassName(this,"cge-"+r.labels[e])}).attr("transform","translate("+r.center.x+","+r.center.y+")"),r.arcs.append("path").attr("d",o).style("fill",function(t,e){return n.util.getColorBand(r.config,e)}).style("stroke",r.config.pie.strokecolor).style("stroke-width",r.config.pie.strokewidth).on("mouseover",n.effects.pie.mouseover(r,r.center,o,r.config)).on("mouseout",n.effects.pie.mouseout(r,r.center,r.config)),r.arcs.append("text").attr("transform",function(t){return"translate("+o.centroid(t)+")"}).attr("dy",".35em").attr("text-anchor","middle").style("fill",r.config.label.showlabel?r.config.pie.fontfill:"none").style("font-family",r.config.pie.fontfamily).style("font-size",r.config.pie.fontsize).style("font-weight",r.config.pie.fontweight).style("font-variant",r.config.pie.fontvariant).text(function(t){return n.util.getLabelValue(r,t)}),r.arcs.append("svg:title").text(function(t,e){return n.util.getTooltipText(r,r.category,r.labels[e],t)}),"function"==typeof r.config.graph.clickCallback&&r.arcs.on("click",function(t){r.config.graph.clickCallback.apply(null,[t])})},n.PieGraph.prototype=n.util.inherits(n.Graph),n.PieGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup="normal",t.config.legend.legendtype="labels",this},n.PolarAreaGraph=function(t,e){var r=this;n.Graph.call(r,t,e).setDefaults().init(),r.maxRadius=2*Math.min(r.height(),r.width())/5,r.center={x:r.width()/2,y:r.height()/2},r.category=r.categories[0];for(var a=n.util.getCategoryData(r.graphdef,[r.category]),o=a[0].map(function(t,e){return t}),i=d3.layout.pie().value(function(t){return r.max()/a[0].length}),l=[],u=d3.svg.arc().innerRadius(0).outerRadius(function(t,e){return o[e]*r.maxRadius/r.max()}),s=1;s<=r.config.axis.ticks;s++)l[s]=r.maxRadius/r.config.axis.ticks*s;r.chart.data(a),r.arcs=r.chart.selectAll("g.arc").data(i).enter().append("g").classed(n.constants.classes.arc+n.util.formatClassName(r.category),!0).attr("transform","translate("+r.center.x+","+r.center.y+")"),r.arcs.append("path").attr("d",u).style("fill",function(t,e){return n.util.getColorBand(r.config,e)}).style("stroke",r.config.pie.strokecolor).style("stroke-width",r.config.pie.strokewidth),r.arcs.append("svg:title").text(function(t,e){return n.util.getTooltipText(r,r.category,r.labels[e],t)}),r.chart.selectAll("."+n.constants.classes.circleticks).data(l).enter().append("svg:g").classed(n.constants.classes.circleticks,!0).append("svg:circle").attr("r",function(t,e){return t}).style("stroke",r.config.axis.strokecolor).style("opacity",r.config.axis.opacity).style("fill","none").attr("transform","translate("+r.center.x+","+r.center.y+")"),"function"==typeof r.config.graph.clickCallback&&r.arcs.on("click",function(t){r.config.graph.clickCallback.apply(null,[t])})},n.PolarAreaGraph.prototype=n.util.inherits(n.Graph),n.PolarAreaGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup="normal",t.config.legend.legendtype="labels",this},n.StackedAreaGraph=function(t,e){var r=this;n.Graph.call(r,t,e).setDefaults().init();var a=d3.layout.stack().offset(r.config.area.offset)(r.categories.map(function(e){return t.dataset[e].map(function(t){return{x:t.name,y:+t.value}})}));r.axes["Horizontal"===r.config.graph.orientation?"ver":"hor"].scale.domain(r.labels.map(function(t){return t})),r.areagroup=r.chart.append("g").selectAll("g").data(a).enter().append("g").attr("class",function(t,e){return n.util.getClassName(this,"cge-"+r.categories[e])}),r["draw"+r.config.graph.orientation+"Area"](),r.finalize()},n.StackedAreaGraph.prototype=n.util.inherits(n.Graph),n.StackedAreaGraph.prototype.setDefaults=function(){return this.graphdef.stepup="stepup",this},n.StackedAreaGraph.prototype.drawHorizontalArea=function(){var t=this,e=t.axes,r=t.categories,a=t.config;e.ver.scale.rangePoints([0,t.height()]);for(var o=0;o<r.length;o+=1)n.effects.area.mouseover(t,o),n.effects.area.mouseout(t,o);return t.areagroup.append("path").attr("class",function(t,e){return n.util.getClassName(this,n.constants.classes.area+r[e])}).style("fill",function(t,e){return n.util.getColorBand(a,e)}).attr("d",d3.svg.area().y(function(t){return e.ver.scale(t.x)+e.ver.scale.rangeBand()/2}).x0(function(t){return e.hor.scale(t.y0)}).x1(function(t){return e.hor.scale(t.y0+t.y)}).interpolate(t.config.area.interpolation)).on("mouseover",function(e,n){t.effects[r[n]].mouseover()}).on("mouseout",function(e,n){t.effects[r[n]].mouseout()}),t.areagroup.append("path").attr("class",function(t,e){return n.util.getClassName(this,n.constants.classes.line+r[e])}).style("stroke","white").style("fill","none").style("stroke-width",2).attr("d",d3.svg.line().y(function(t){return e.ver.scale(t.x)+e.ver.scale.rangeBand()/2}).x(function(t){return e.hor.scale(t.y0+t.y)}).interpolate(t.config.area.interpolation)),t},n.StackedAreaGraph.prototype.drawVerticalArea=function(){var t=this,e=t.axes,r=t.categories,a=t.config;e.hor.scale.rangePoints([0,t.width()]);for(var o=0;o<r.length;o+=1)n.effects.area.mouseover(t,o),n.effects.area.mouseout(t,o);return t.areagroup.append("path").attr("class",function(t,e){return n.util.getClassName(this,n.constants.classes.area+r[e])}).style("fill",function(t,e){return n.util.getColorBand(a,e)}).attr("d",d3.svg.area().x(function(t){return e.hor.scale(t.x)+e.hor.scale.rangeBand()/2}).y0(function(t){return e.ver.scale(t.y0)}).y1(function(t){return e.ver.scale(t.y0+t.y)}).interpolate(t.config.area.interpolation)).on("mouseover",function(e,n){t.effects[r[n]].mouseover()}).on("mouseout",function(e,n){t.effects[r[n]].mouseout()}),t.areagroup.append("path").attr("class",function(t,e){return n.util.getClassName(this,n.constants.classes.line+r[e])}).style("stroke","white").style("fill","none").style("stroke-width",2).attr("d",d3.svg.line().x(function(t){return e.hor.scale(t.x)+e.hor.scale.rangeBand()/2}).y(function(t){return e.ver.scale(t.y0+t.y)}).interpolate(t.config.area.interpolation)),t},n.StackedBarGraph=function(t,e){var r=this;n.Graph.call(r,t,e).setDefaults().init(),r.bargroups={};var a,o,i=r.labels,l=i.map(function(t){return 0}),u=i.map(function(t){return 0});for(r.axes["Horizontal"===r.config.graph.orientation?"ver":"hor"].scale.domain(i),a=0,o=r.categories.length;a<o;a+=1)r.bargroups[r.categories[a]]=r.chart.append("g").classed("cg-"+n.util.formatClassName(r.categories[a]),!0),r["draw"+r.config.graph.orientation+"Bars"](a,l,u);r.finalize()},n.StackedBarGraph.prototype=n.util.inherits(n.Graph),n.StackedBarGraph.prototype.setDefaults=function(){return this.graphdef.stepup="stepup",this},n.StackedBarGraph.prototype.drawHorizontalBars=function(t,e,r){var a=this,o=this.axes,i=n.util.getColorBand(this.config,t),l=this.config,u=this.bargroups[this.categories[t]],s=u.selectAll("g").data(this.graphdef.dataset[a.categories[t]]).enter().append("g").classed("cge-"+n.util.formatClassName(a.categories[t]),!0);s.append("rect").attr("height",o.ver.scale.rangeBand()).attr("width",0).attr("x",function(t,n){var r=o.hor.scale(e[n]);return e[n]+=t.value,r}).attr("y",function(t){return o.ver.scale(t.name)}).classed("cr-"+n.util.formatClassName(a.categories[t]),!0).style("stroke","none").style("fill",i).transition().duration(a.config.effects.duration).delay(t*a.config.effects.duration).attr("width",function(t,n){return o.hor.scale(e[n])-o.hor.scale(e[n]-t.value)}).each("end",function(e,r){d3.select(this).on("mouseover",n.effects.bar.mouseover(a,t,a.config.effects.textcolor)),d3.select(this).on("mouseout",n.effects.bar.mouseout(a,t,a.config.effects.textcolor)),"function"==typeof a.config.graph.clickCallback&&d3.select(this).on("click",function(t){a.config.graph.clickCallback.apply(null,[t])})}),s.append("text").attr("y",function(t){return o.ver.scale(t.name)+o.ver.scale.rangeBand()/2}).attr("dx",0).attr("dy",".35em").attr("text-anchor","end").classed("cr-"+n.util.formatClassName(a.categories[t]),!0).style("fill",a.config.label.showlabel?a.config.effects.textcolor:"none").style("font-family",l.bar.fontfamily).style("font-size",l.bar.fontsize).style("font-weight",l.bar.fontweight).style("opacity",0).text(function(t){return o.hor.scale(t.value)>15?n.util.getLabelValue(a,t):null}).transition().duration(a.config.effects.duration).delay(t*a.config.effects.duration).style("opacity",1).attr("x",function(t,e){return r[e]+=t.value,o.hor.scale(r[e])-5}),s.append("svg:title").text(function(e,r){return n.util.getTooltipText(a,a.categories[t],a.labels[r],e)})},n.StackedBarGraph.prototype.drawVerticalBars=function(t,e,r){var a=this,o=this.height(),i=this.axes,l=n.util.getColorBand(this.config,t),u=this.config,s=this.bargroups[a.categories[t]],c=s.selectAll("g").data(this.graphdef.dataset[a.categories[t]]).enter().append("g").classed("cge-"+n.util.formatClassName(a.categories[t]),!0);c.append("rect").attr("height",0).attr("width",i.hor.scale.rangeBand()).attr("x",function(t){return i.hor.scale(t.name)}).attr("y",function(t,n){var r=i.ver.scale(e[n]);return e[n]-=t.value,r}).classed("cr-"+n.util.formatClassName(a.categories[t]),!0).style("stroke","none").style("fill",l).transition().duration(a.config.effects.duration).delay(t*a.config.effects.duration).attr("height",function(t,n){return-(i.ver.scale(-e[n])-i.ver.scale(-e[n]-t.value))}).each("end",function(e,r){d3.select(this).on("mouseover",n.effects.bar.mouseover(a,t,a.config.effects.textcolor)),d3.select(this).on("mouseout",n.effects.bar.mouseout(a,t,a.config.effects.textcolor)),"function"==typeof a.config.graph.clickCallback&&d3.select(this).on("click",function(t){a.config.graph.clickCallback.apply(null,[t])})}),c.append("text").attr("transform","scale(1,-1)").attr("x",function(t){return i.hor.scale(t.name)+i.hor.scale.rangeBand()/2}).attr("y",5-o).attr("dy",".71em").attr("text-anchor","middle").classed("cr-"+n.util.formatClassName(a.categories[t]),!0).style("fill",a.config.label.showlabel?a.config.effects.textcolor:"none").style("font-family",u.bar.fontfamily).style("font-size",u.bar.fontsize).style("font-weight",u.bar.fontweight).style("opacity",0).text(function(t){return o-i.ver.scale(t.value)>15?n.util.getLabelValue(a,t):null}).transition().duration(a.config.effects.duration).delay(t*a.config.effects.duration).style("opacity",1).attr("y",function(t,e){return r[e]+=t.value,5-(2*o-i.ver.scale(r[e]))}),c.append("svg:title").text(function(e,r){return n.util.getTooltipText(a,a.categories[t],a.labels[r],e)}),s.attr("transform","translate(0,"+2*this.height()+") scale(1,-1)")},n.StepUpBarGraph=function(t,e){var r=this;n.Graph.call(r,t,e).setDefaults().init(),this.bargroups={};var a,o=r.categories.length,i=r.labels.map(function(t){return 0}),l=r.labels.map(function(t){return 0});for(r.axes["Horizontal"===this.config.graph.orientation?"ver":"hor"].scale.domain(this.labels),a=0;a<o;a+=1)r.bargroups[r.categories[a]]=this.chart.append("g").classed("cg-"+n.util.formatClassName(r.categories[a]),!0),r["draw"+r.config.graph.orientation+"Bars"](a,i,l);r.finalize()},n.StepUpBarGraph.prototype=n.util.inherits(n.Graph),n.StepUpBarGraph.prototype.setDefaults=function(){return this.graphdef.stepup="stepup",this},n.StepUpBarGraph.prototype.drawHorizontalBars=function(t,e,r){var a=this,o=a.categories.length,i=n.util.getColorBand(a.config,t),l=a.bargroups[a.categories[t]],u=l.selectAll("g").data(a.graphdef.dataset[a.categories[t]]).enter().append("g").classed("cge-"+n.util.formatClassName(a.categories[t]),!0);u.append("rect").attr("height",a.axes.ver.scale.rangeBand()/o).attr("width",0).attr("transform",function(t){return t.value<0?"scale(-1,1)":"scale(1,1)"}).attr("x",function(t,n){!0===t.resetSum&&(e[n]=0);var r=a.axes.hor.scale(e[n]);return e[n]+=t.value,t.value<0?-r:r}).attr("y",function(t){return a.axes.ver.scale(t.name)}).classed("cr-"+n.util.formatClassName(a.categories[t]),!0).style("stroke","none").style("fill",i).transition().duration(a.config.effects.duration).delay(t*a.config.effects.duration).attr("width",function(t,n){return Math.abs(a.axes.hor.scale(e[n])-a.axes.hor.scale(e[n]-t.value))}).call(n.util.endAll,function(e,r){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",n.effects.bar.mouseover(a,t)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",n.effects.bar.mouseout(a,t))}),u.append("text").attr("y",function(t){return a.axes.ver.scale(t.name)+a.axes.ver.scale.rangeBand()/o/2}).attr("dx",function(t){return t.value<0?-16:4}).attr("dy",".35em").attr("text-anchor","start").classed("cr-"+n.util.formatClassName(a.categories[t]),!0).style("fill",a.config.label.showlabel?n.util.getColorBand(a.config,t):"none").style("opacity",0).style("font-family",a.config.bar.fontfamily).style("font-size",a.config.bar.fontsize).style("font-weight",a.config.bar.fontweight).text(function(t){return n.util.getLabelValue(a,t)}).transition().duration(a.config.effects.duration).delay(t*a.config.effects.duration).style("opacity",1).attr("x",function(t,e){return!0===t.resetSum&&(r[e]=0),r[e]+=t.value,a.axes.hor.scale(r[e])}),u.append("svg:title").text(function(e,r){return n.util.getTooltipText(a,a.categories[t],a.labels[r],e)}),l.attr("transform","translate(0,"+t*a.axes.ver.scale.rangeBand()/o+")")},n.StepUpBarGraph.prototype.drawVerticalBars=function(t,e,r){var a=this,o=a.categories.length,i=n.util.getColorBand(a.config,t),l=a.bargroups[a.categories[t]],u=l.selectAll("g").data(a.graphdef.dataset[a.categories[t]]).enter().append("g").classed("cge-"+n.util.formatClassName(a.categories[t]),!0);u.append("rect").attr("height",0).attr("width",a.axes.hor.scale.rangeBand()/o).attr("transform",function(t){return t.value<0?"scale(1,-1)":"scale(1,1)"}).attr("x",function(t){return a.axes.hor.scale(t.name)}).attr("y",function(t,n){!0===t.resetSum&&(e[n]=0);var r=2*a.height()-a.axes.ver.scale(e[n]);return e[n]+=t.value,t.value<0?-r:r}).classed("cr-"+n.util.formatClassName(a.categories[t]),!0).style("stroke","none").style("fill",i).transition().duration(a.config.effects.duration).delay(t*a.config.effects.duration).attr("height",function(t,n){return Math.abs(a.axes.ver.scale(-e[n])-a.axes.ver.scale(-e[n]-t.value))}).call(n.util.endAll,function(e,r){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",n.effects.bar.mouseover(a,t)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",n.effects.bar.mouseout(a,t))}),u.append("text").attr("transform","scale(1,-1)").attr("x",function(t){return a.axes.hor.scale(t.name)+a.axes.hor.scale.rangeBand()/o/2}).attr("y",-a.height()-10).attr("dy",function(t){return t.value<0?"2.3em":".71em"}).attr("text-anchor","middle").classed("cr-"+n.util.formatClassName(a.categories[t]),!0).style("fill",a.config.label.showlabel?n.util.getColorBand(a.config,t):"none").style("font-family",a.config.bar.fontfamily).style("font-size",a.config.bar.fontsize).style("font-weight",a.config.bar.fontweight).style("opacity",0).text(function(t){return n.util.getLabelValue(a,t)}).transition().duration(a.config.effects.duration).delay(t*a.config.effects.duration).style("opacity",1).attr("y",function(t,e){return!0===t.resetSum&&(r[e]=0),r[e]+=t.value,-(2*a.height()-a.axes.ver.scale(r[e]))-10}),u.append("svg:title").text(function(e,r){return n.util.getTooltipText(a,a.categories[t],a.labels[r],e)}),l.attr("transform","translate("+t*a.axes.hor.scale.rangeBand()/o+","+2*a.height()+") scale(1,-1)")},n.Table=function(){this.caption=void 0,this.position=void 0,this.graphdef=void 0,this.table=void 0,this.header=void 0,this.body=void 0,this.bodyrows={}},n.Table.prototype.init=function(t,e){this.graphdef=t,this.config=n.util.extend({},e),this.position=this.config.meta.pos||"body",this.table=d3.select(this.position).append("table").classed(this.config.table.tableclass,!0),this.header=this.table.append("thead").classed(this.config.table.headerclass,!0),this.body=this.table.append("tbody").classed(this.config.table.bodyclass,!0),this.footer=this.table.append("tfoot").classed(this.config.table.footerclass,!0)},n.Table.prototype.finalize=function(){},n.TableGraph=function(t,e){n.Table.apply(this,[t]),this.init(t,e),"Horizontal"===this.config.graph.orientation?this.setHorTable():this.setVerTable(),this.finalize()},n.TableGraph.prototype=n.util.inherits(n.Table),n.TableGraph.prototype.setHorTable=function(){var t=this.graphdef.categories,e=n.util.getTabularArray(this.graphdef);t.unshift(""),this.header.append("tr").selectAll("td").data(t).enter().append("td").text(function(t){return t}),t.shift(),this.bodyrows=this.body.selectAll("tr").data(e).enter().append("tr"),this.bodyrows.selectAll("td").data(function(t,n){return e[n]}).enter().append("td").attr("class",function(t,e){var n=0===e?"chart3rtablelabel":"chart3rtabledata";return d3.select(this).attr("class")+n}).text(function(t){return t})},n.TableGraph.prototype.setVerTable=function(){var t=n.util.getLabelArray(this.graphdef),e=this.graphdef.dataset;t.unshift(""),this.header.append("tr").selectAll("td").data(t).enter().append("td").text(function(t){return t}),t.shift(),this.bodyrows=this.body.selectAll("tr").data(this.graphdef.categories).enter().append("tr"),this.bodyrows.selectAll("td").data(function(t){var n,r,a=[];for(a.push(t),n=0,r=e[t].length;n<r;n+=1)a.push(e[t][n].value);return a}).enter().append("td").attr("class",function(t,e){var n=0===e?"chart3rtablelabel":"chart3rtabledata";return d3.select(this).attr("class")+n}).text(function(t){return t})},n.WaterfallGraph=function(t,e){var r=this;n.Graph.call(r,t,e).setDefaults().init(),r.bargroups={},r.axes["Horizontal"===r.config.graph.orientation?"ver":"hor"].scale.domain(r.labels);var a;r.categories.length;a=r.categories[0],r.bargroups[a]=r.chart.append("g").classed("cg-"+n.util.formatClassName(a),!0),r["draw"+r.config.graph.orientation+"Bars"](0),r.finalize()},n.WaterfallGraph.prototype=n.util.inherits(n.Graph),n.WaterfallGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup="waterfall",t.config.legend.showlegends=!1,this},
n.WaterfallGraph.prototype.drawHorizontalBars=function(t){var e=this,r=e.categories.length,a=n.util.getColorBand(e.config,t),o=e.bargroups[e.categories[t]],i=0,l=0,u=o.selectAll("g").data(e.graphdef.dataset[e.categories[t]]).enter().append("g").classed("cge-"+n.util.formatClassName(e.categories[t]),!0);u.append("rect").attr("height",e.axes.ver.scale.rangeBand()/r-2).attr("width",0).attr("x",function(t,n){var r=t.value<0?i+t.value:i;return i+=t.value,e.axes.hor.scale(r)}).attr("y",function(t){return e.axes.ver.scale(t.name)}).classed("cr-"+n.util.formatClassName(e.categories[t]),!0).style("stroke","none").style("fill",a).transition().duration(e.config.effects.duration).delay(t*e.config.effects.duration).attr("width",function(t){return e.axes.hor.scale(Math.abs(t.value))}).call(n.util.endAll,function(r,a){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",n.effects.bar.mouseover(e,t)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",n.effects.bar.mouseout(e,t))}),u.append("text").attr("y",function(t){return e.axes.ver.scale(t.name)+e.axes.ver.scale.rangeBand()/r/2}).attr("dx",4).attr("dy",".35em").attr("text-anchor","start").classed("cr-"+n.util.formatClassName(e.categories[t]),!0).style("fill",e.config.label.showlabel?n.util.getColorBand(e.config,t):"none").style("font-family",e.config.bar.fontfamily).style("font-size",e.config.bar.fontsize).style("font-weight",e.config.bar.fontweight).text(function(t){return n.util.getLabelValue(e,t)}).transition().duration(e.config.effects.duration).delay(t*e.config.effects.duration).attr("x",function(t,n){var r=t.value<0?l:l+t.value;return l+=t.value,e.axes.hor.scale(r)}),u.append("svg:title").text(function(r,a){return n.util.getTooltipText(e,e.categories[t],e.labels[a],r)}),o.attr("transform","translate(0,"+t*e.axes.ver.scale.rangeBand()/r+")")},n.WaterfallGraph.prototype.drawVerticalBars=function(t){var e=this,r=n.util.getColorBand(this.config,t),a=e.categories.length,o=0,i=0,l=e.bargroups[e.categories[t]].selectAll("g").data(e.graphdef.dataset[e.categories[t]]).enter().append("g").classed("cge-"+n.util.formatClassName(e.categories[t]),!0);l.append("rect").classed("cr-"+n.util.formatClassName(e.categories[t]),!0).attr("height",0).attr("width",0).attr("x",function(t){return e.axes.hor.scale(t.name)}).attr("y",function(t){var n=t.value<0?o+t.value:o;return o+=t.value,e.height()-e.axes.ver.scale(n)}).style("stroke",e.config.bar.strokecolor).style("fill",r).transition().duration(e.config.effects.duration).delay(t*e.config.effects.duration).attr("height",function(t){return e.height()-e.axes.ver.scale(Math.abs(t.value))}).attr("width",e.axes.hor.scale.rangeBand()/a-2).call(n.util.endAll,function(r,a){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",n.effects.bar.mouseover(e,t)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",n.effects.bar.mouseout(e,t))}),l.append("text").attr("transform","scale(1,-1)").attr("x",function(t){return e.axes.hor.scale(t.name)+e.axes.hor.scale.rangeBand()/a/2}).attr("y",-10).attr("dx",0).attr("dy",".35em").attr("text-anchor","middle").classed("cr-"+n.util.formatClassName(e.categories[t]),!0).style("fill",e.config.label.showlabel?n.util.getColorBand(e.config,t):"none").style("font-family",e.config.bar.fontfamily).style("font-size",e.config.bar.fontsize).style("font-weight",e.config.bar.fontweight).text(function(t){return n.util.getLabelValue(e,t)}).transition().duration(e.config.effects.duration).delay(t*e.config.effects.duration).attr("y",function(t){i+=t.value;var n=t.value<0?i-t.value:i;return-(e.height()-e.axes.ver.scale(n))-10}),l.append("svg:title").text(function(r,a){return n.util.getTooltipText(e,e.categories[t],e.labels[a],r)}),e.bargroups[e.categories[t]].attr("transform","translate("+t*e.axes.hor.scale.rangeBand()/a+","+e.height()+") scale(1,-1)")},e||(t.uv={chart:n.chart}),{chart:n.chart}});